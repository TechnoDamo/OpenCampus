import{v as Se,k as fe,r as s,g as E,j as I,b as _e,R as S,w as Me}from"./index-B2ERGV2V.js";const B=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,G=Se,de=(e,t)=>n=>{var r;if(t?.variants==null)return G(e,n?.class,n?.className);const{variants:o,defaultVariants:i}=t,u=Object.keys(o).map(f=>{const m=n?.[f],c=i?.[f];if(m===null)return null;const d=B(m)||B(c);return o[f][d]}),p=n&&Object.entries(n).reduce((f,m)=>{let[c,d]=m;return d===void 0||(f[c]=d),f},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((f,m)=>{let{class:c,className:d,...a}=m;return Object.entries(a).every(L=>{let[v,y]=L;return Array.isArray(y)?y.includes({...i,...p}[v]):{...i,...p}[v]===y})?[...f,c,d]:f},[]);return G(e,u,l,n?.class,n?.className)};var A={},z;function Oe(){if(z)return A;z=1,A.match=i,A.parse=u;var e=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,t=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,n=/^(?:(min|max)-)?(.+)/,r=/(em|rem|px|cm|mm|in|pt|pc)?$/,o=/(dpi|dpcm|dppx)?$/;function i(m,c){return u(m).some(function(d){var a=d.inverse,L=d.type==="all"||c.type===d.type;if(L&&a||!(L||a))return!1;var v=d.expressions.every(function(y){var k=y.feature,O=y.modifier,g=y.value,b=c[k];if(!b)return!1;switch(k){case"orientation":case"scan":return b.toLowerCase()===g.toLowerCase();case"width":case"height":case"device-width":case"device-height":g=f(g),b=f(b);break;case"resolution":g=l(g),b=l(b);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":g=p(g),b=p(b);break;case"grid":case"color":case"color-index":case"monochrome":g=parseInt(g,10)||1,b=parseInt(b,10)||0;break}switch(O){case"min":return b>=g;case"max":return b<=g;default:return b===g}});return v&&!a||!v&&a})}function u(m){return m.split(",").map(function(c){c=c.trim();var d=c.match(e),a=d[1],L=d[2],v=d[3]||"",y={};return y.inverse=!!a&&a.toLowerCase()==="not",y.type=L?L.toLowerCase():"all",v=v.match(/\([^\)]+\)/g)||[],y.expressions=v.map(function(k){var O=k.match(t),g=O[1].toLowerCase().match(n);return{modifier:g[1],feature:g[2],value:O[2]}}),y})}function p(m){var c=Number(m),d;return c||(d=m.match(/^(\d+)\s*\/\s*(\d+)$/),c=d[1]/d[2]),c}function l(m){var c=parseFloat(m),d=String(m).match(o)[1];switch(d){case"dpcm":return c/2.54;case"dppx":return c*96;default:return c}}function f(m){var c=parseFloat(m),d=String(m).match(r)[1];switch(d){case"em":return c*16;case"rem":return c*16;case"cm":return c*96/2.54;case"mm":return c*96/2.54/10;case"in":return c*96;case"pt":return c*72;case"pc":return c*72/12;default:return c}}return A}var D,Q;function xe(){if(Q)return D;Q=1;var e=Oe().match,t=typeof window<"u"?window.matchMedia:null;function n(o,i,u){var p=this,l;t&&!u&&(l=t.call(window,o)),l?(this.matches=l.matches,this.media=l.media,l.addListener(c)):(this.matches=e(o,i),this.media=o),this.addListener=f,this.removeListener=m,this.dispose=d;function f(a){l&&l.addListener(a)}function m(a){l&&l.removeListener(a)}function c(a){p.matches=a.matches,p.media=a.media}function d(){l&&l.removeListener(c)}}function r(o,i,u){return new n(o,i,u)}return D=r,D}var Re=xe();const Te=fe(Re);var Pe=/[A-Z]/g,Ae=/^ms-/,W={};function Ie(e){return"-"+e.toLowerCase()}function me(e){if(W.hasOwnProperty(e))return W[e];var t=e.replace(Pe,Ie);return W[e]=Ae.test(t)?"-"+t:t}function De(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t),o=n.length;if(r.length!==o)return!1;for(let i=0;i<o;i++){const u=n[i];if(e[u]!==t[u]||!Object.prototype.hasOwnProperty.call(t,u))return!1}return!0}var N={exports:{}},K,Z;function We(){if(Z)return K;Z=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return K=e,K}var H,Y;function Ne(){if(Y)return H;Y=1;var e=We();function t(){}function n(){}return n.resetWarningCache=t,H=function(){function r(u,p,l,f,m,c){if(c!==e){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}r.isRequired=r;function o(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:t};return i.PropTypes=i,i},H}var X;function Ke(){return X||(X=1,N.exports=Ne()()),N.exports}var He=Ke();const h=fe(He),w=h.oneOfType([h.string,h.number]),he={all:h.bool,grid:h.bool,aural:h.bool,braille:h.bool,handheld:h.bool,print:h.bool,projection:h.bool,screen:h.bool,tty:h.bool,tv:h.bool,embossed:h.bool},je={orientation:h.oneOf(["portrait","landscape"]),scan:h.oneOf(["progressive","interlace"]),aspectRatio:h.string,deviceAspectRatio:h.string,height:w,deviceHeight:w,width:w,deviceWidth:w,color:h.bool,colorIndex:h.bool,monochrome:h.bool,resolution:w,type:Object.keys(he)},{type:At,...qe}=je,Fe={minAspectRatio:h.string,maxAspectRatio:h.string,minDeviceAspectRatio:h.string,maxDeviceAspectRatio:h.string,minHeight:w,maxHeight:w,minDeviceHeight:w,maxDeviceHeight:w,minWidth:w,maxWidth:w,minDeviceWidth:w,maxDeviceWidth:w,minColor:h.number,maxColor:h.number,minColorIndex:h.number,maxColorIndex:h.number,minMonochrome:h.number,maxMonochrome:h.number,minResolution:w,maxResolution:w,...qe},Ve={...he,...Fe};var Ue={all:Ve};const $e=e=>`not ${e}`,Be=(e,t)=>{const n=me(e);return typeof t=="number"&&(t=`${t}px`),t===!0?n:t===!1?$e(n):`(${n}: ${t})`},Ge=e=>e.join(" and "),ze=e=>{const t=[];return Object.keys(Ue.all).forEach(n=>{const r=e[n];r!=null&&t.push(Be(n,r))}),Ge(t)},Qe=s.createContext(void 0),Ze=e=>e.query||ze(e),J=e=>e?Object.keys(e).reduce((n,r)=>(n[me(r)]=e[r],n),{}):void 0,pe=()=>{const e=s.useRef(!1);return s.useEffect(()=>{e.current=!0},[]),e.current},Ye=e=>{const t=s.useContext(Qe),n=()=>J(e)||J(t),[r,o]=s.useState(n);return s.useEffect(()=>{const i=n();De(r,i)||o(i)},[e,t]),r},Xe=e=>{const t=()=>Ze(e),[n,r]=s.useState(t);return s.useEffect(()=>{const o=t();n!==o&&r(o)},[e]),n},Je=(e,t)=>{const n=()=>Te(e,t||{},!!t),[r,o]=s.useState(n),i=pe();return s.useEffect(()=>{if(i){const u=n();return o(u),()=>{u&&u.dispose()}}},[e,t]),r},et=e=>{const[t,n]=s.useState(e.matches);return s.useEffect(()=>{const r=o=>{n(o.matches)};return e.addListener(r),n(e.matches),()=>{e.removeListener(r)}},[e]),t},tt=(e,t,n)=>{const r=Ye(t),o=Xe(e);if(!o)throw new Error("Invalid or missing MediaQuery!");const i=Je(o,r),u=et(i);return pe(),s.useEffect(()=>{},[u]),s.useEffect(()=>()=>{i&&i.dispose()},[]),u},ye=s.createContext({theme:"system",setTheme:E,scrollAction:"pan",setScrollAction:E,showDBViews:!1,setShowDBViews:E,showCardinality:!0,setShowCardinality:E,showFieldAttributes:!0,setShowFieldAttributes:E,githubRepoOpened:!1,setGithubRepoOpened:E,starUsDialogLastOpen:0,setStarUsDialogLastOpen:E,showMiniMapOnCanvas:!1,setShowMiniMapOnCanvas:E}),nt=()=>s.useContext(ye);const rt=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),at=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),ee=e=>{const t=at(e);return t.charAt(0).toUpperCase()+t.slice(1)},ve=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),ot=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var it={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const st=s.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:i,iconNode:u,...p},l)=>s.createElement("svg",{ref:l,...it,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:ve("lucide",o),...!i&&!ot(p)&&{"aria-hidden":"true"},...p},[...u.map(([f,m])=>s.createElement(f,m)),...Array.isArray(i)?i:[i]]));const ct=(e,t)=>{const n=s.forwardRef(({className:r,...o},i)=>s.createElement(st,{ref:i,iconNode:t,className:ve(`lucide-${rt(ee(e))}`,`lucide-${e}`,r),...o}));return n.displayName=ee(e),n};const ut=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],lt=ct("loader-circle",ut),ft=de("flex-col items-center justify-center",{variants:{show:{true:"flex",false:"hidden"}},defaultVariants:{show:!0}}),dt=de("animate-spin text-primary",{variants:{size:{small:"size-6",medium:"size-8",large:"size-12"}},defaultVariants:{size:"medium"}});function It({size:e,show:t,children:n,className:r}){return I.jsxs("span",{className:ft({show:t}),children:[I.jsx(lt,{className:_e(dt({size:e}),r)}),n]})}const te="theme",ne="scroll_action",re="show_cardinality",mt="show_field_attributes",ae="github_repo_opened",oe="star_us_dialog_last_open",ie="show_minimap_on_canvas",se="show_db_views",Dt=({children:e})=>{const[t,n]=S.useState(localStorage.getItem(te)||"system"),[r,o]=S.useState(localStorage.getItem(ne)||"pan"),[i,u]=S.useState((localStorage.getItem(se)||"false")==="true"),[p,l]=S.useState((localStorage.getItem(re)||"true")==="true"),[f,m]=S.useState((localStorage.getItem(mt)||"true")==="true"),[c,d]=S.useState((localStorage.getItem(ae)||"false")==="true"),[a,L]=S.useState(parseInt(localStorage.getItem(oe)||"0")),[v,y]=S.useState((localStorage.getItem(ie)||"true")==="true");return s.useEffect(()=>{localStorage.setItem(oe,a.toString())},[a]),s.useEffect(()=>{localStorage.setItem(ae,c.toString())},[c]),s.useEffect(()=>{localStorage.setItem(te,t)},[t]),s.useEffect(()=>{localStorage.setItem(ne,r)},[r]),s.useEffect(()=>{localStorage.setItem(se,i.toString())},[i]),s.useEffect(()=>{localStorage.setItem(re,p.toString())},[p]),s.useEffect(()=>{localStorage.setItem(ie,v.toString())},[v]),I.jsx(ye.Provider,{value:{theme:t,setTheme:n,scrollAction:r,setScrollAction:o,showDBViews:i,setShowDBViews:u,showCardinality:p,setShowCardinality:l,showFieldAttributes:f,setShowFieldAttributes:m,setGithubRepoOpened:d,githubRepoOpened:c,starUsDialogLastOpen:a,setStarUsDialogLastOpen:L,showMiniMapOnCanvas:v,setShowMiniMapOnCanvas:y},children:e})},ht=s.createContext({theme:"system",setTheme:E,effectiveTheme:"light"});function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F.apply(null,arguments)}var ge=["shift","alt","meta","mod","ctrl"],pt={esc:"escape",return:"enter",".":"period",",":"comma","-":"slash"," ":"space","`":"backquote","#":"backslash","+":"bracketright",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function _(e){return(e&&pt[e]||e||"").trim().toLowerCase().replace(/key|digit|numpad|arrow/,"")}function yt(e){return ge.includes(e)}function j(e,t){return t===void 0&&(t=","),e.split(t)}function q(e,t,n){t===void 0&&(t="+");var r=e.toLocaleLowerCase().split(t).map(function(u){return _(u)}),o={alt:r.includes("alt"),ctrl:r.includes("ctrl")||r.includes("control"),shift:r.includes("shift"),meta:r.includes("meta"),mod:r.includes("mod")},i=r.filter(function(u){return!ge.includes(u)});return F({},o,{keys:i,description:n,hotkey:e})}(function(){typeof document<"u"&&(document.addEventListener("keydown",function(e){e.key!==void 0&&be([_(e.key),_(e.code)])}),document.addEventListener("keyup",function(e){e.key!==void 0&&Ce([_(e.key),_(e.code)])})),typeof window<"u"&&window.addEventListener("blur",function(){M.clear()})})();var M=new Set;function V(e){return Array.isArray(e)}function vt(e,t){t===void 0&&(t=",");var n=V(e)?e:e.split(t);return n.every(function(r){return M.has(r.trim().toLowerCase())})}function be(e){var t=Array.isArray(e)?e:[e];M.has("meta")&&M.forEach(function(n){return!yt(n)&&M.delete(n.toLowerCase())}),t.forEach(function(n){return M.add(n.toLowerCase())})}function Ce(e){var t=Array.isArray(e)?e:[e];e==="meta"?M.clear():t.forEach(function(n){return M.delete(n.toLowerCase())})}function gt(e,t,n){(typeof n=="function"&&n(e,t)||n===!0)&&e.preventDefault()}function bt(e,t,n){return typeof n=="function"?n(e,t):n===!0||n===void 0}function Ct(e){return ke(e,["input","textarea","select"])}function ke(e,t){t===void 0&&(t=!1);var n=e.target,r=e.composed,o=null;return kt(n)&&r?o=e.composedPath()[0]&&e.composedPath()[0].tagName:o=n&&n.tagName,V(t)?!!(o&&t&&t.some(function(i){var u;return i.toLowerCase()===((u=o)==null?void 0:u.toLowerCase())})):!!(o&&t&&t)}function kt(e){return!!e.tagName&&!e.tagName.startsWith("-")&&e.tagName.includes("-")}function wt(e,t){return e.length===0&&t?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):t?e.some(function(n){return t.includes(n)})||e.includes("*"):!0}var Lt=function(t,n,r){r===void 0&&(r=!1);var o=n.alt,i=n.meta,u=n.mod,p=n.shift,l=n.ctrl,f=n.keys,m=t.key,c=t.code,d=t.ctrlKey,a=t.metaKey,L=t.shiftKey,v=t.altKey,y=_(c),k=m.toLowerCase();if(!(f!=null&&f.includes(y))&&!(f!=null&&f.includes(k))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(y))return!1;if(!r){if(o===!v&&k!=="alt"||p===!L&&k!=="shift")return!1;if(u){if(!a&&!d)return!1}else if(i===!a&&k!=="meta"&&k!=="os"||l===!d&&k!=="ctrl"&&k!=="control")return!1}return f&&f.length===1&&(f.includes(k)||f.includes(y))?!0:f?vt(f):!f},Et=s.createContext(void 0),St=function(){return s.useContext(Et)};function we(e,t){return e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(e).length===Object.keys(t).length&&Object.keys(e).reduce(function(n,r){return n&&we(e[r],t[r])},!0):e===t}var _t=s.createContext({hotkeys:[],enabledScopes:[],toggleScope:function(){},enableScope:function(){},disableScope:function(){}}),Mt=function(){return s.useContext(_t)};function Ot(e){var t=s.useRef(void 0);return we(t.current,e)||(t.current=e),t.current}var ce=function(t){t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation()},xt=typeof window<"u"?s.useLayoutEffect:s.useEffect;function Rt(e,t,n,r){var o=s.useState(null),i=o[0],u=o[1],p=s.useRef(!1),l=n instanceof Array?r instanceof Array?void 0:r:n,f=V(e)?e.join(l?.splitKey):e,m=n instanceof Array?n:r instanceof Array?r:void 0,c=s.useCallback(t,m??[]),d=s.useRef(c);m?d.current=c:d.current=t;var a=Ot(l),L=Mt(),v=L.enabledScopes,y=St();return xt(function(){if(!(a?.enabled===!1||!wt(v,a?.scopes))){var k=function(C,T){var U;if(T===void 0&&(T=!1),!(Ct(C)&&!ke(C,a?.enableOnFormTags))){if(i!==null){var P=i.getRootNode();if((P instanceof Document||P instanceof ShadowRoot)&&P.activeElement!==i&&!i.contains(P.activeElement)){ce(C);return}}(U=C.target)!=null&&U.isContentEditable&&!(a!=null&&a.enableOnContentEditable)||j(f,a?.splitKey).forEach(function(Ee){var $,R=q(Ee,a?.combinationKey);if(Lt(C,R,a?.ignoreModifiers)||($=R.keys)!=null&&$.includes("*")){if(a!=null&&a.ignoreEventWhen!=null&&a.ignoreEventWhen(C)||T&&p.current)return;if(gt(C,R,a?.preventDefault),!bt(C,R,a?.enabled)){ce(C);return}d.current(C,R),T||(p.current=!0)}})}},O=function(C){C.key!==void 0&&(be(_(C.code)),(a?.keydown===void 0&&a?.keyup!==!0||a!=null&&a.keydown)&&k(C))},g=function(C){C.key!==void 0&&(Ce(_(C.code)),p.current=!1,a!=null&&a.keyup&&k(C,!0))},b=i||l?.document||document;return b.addEventListener("keyup",g,l?.eventListenerOptions),b.addEventListener("keydown",O,l?.eventListenerOptions),y&&j(f,a?.splitKey).forEach(function(x){return y.addHotkey(q(x,a?.combinationKey,a?.description))}),function(){b.removeEventListener("keyup",g,l?.eventListenerOptions),b.removeEventListener("keydown",O,l?.eventListenerOptions),y&&j(f,a?.splitKey).forEach(function(x){return y.removeHotkey(q(x,a?.combinationKey,a?.description))})}}},[i,f,a,v]),u}var Le=(e=>(e.REDO="redo",e.UNDO="undo",e.OPEN_DIAGRAM="open_diagram",e.SAVE_DIAGRAM="save_diagram",e.TOGGLE_SIDE_PANEL="toggle_side_panel",e.SHOW_ALL="show_all",e.TOGGLE_THEME="toggle_theme",e.TOGGLE_FILTER="toggle_filter",e))(Le||{});const ue={redo:{action:"redo",keyCombinationLabelMac:"⇧⌘Z",keyCombinationLabelWin:"Ctrl+Shift+Z",keyCombinationMac:"meta+shift+z",keyCombinationWin:"ctrl+shift+z"},undo:{action:"undo",keyCombinationLabelMac:"⌘Z",keyCombinationLabelWin:"Ctrl+Z",keyCombinationMac:"meta+z",keyCombinationWin:"ctrl+z"},open_diagram:{action:"open_diagram",keyCombinationLabelMac:"⌘O",keyCombinationLabelWin:"Ctrl+O",keyCombinationMac:"meta+o",keyCombinationWin:"ctrl+o"},save_diagram:{action:"save_diagram",keyCombinationLabelMac:"⌘S",keyCombinationLabelWin:"Ctrl+S",keyCombinationMac:"meta+s",keyCombinationWin:"ctrl+s"},toggle_side_panel:{action:"toggle_side_panel",keyCombinationLabelMac:"⌘B",keyCombinationLabelWin:"Ctrl+B",keyCombinationMac:"meta+b",keyCombinationWin:"ctrl+b"},show_all:{action:"show_all",keyCombinationLabelMac:"⌘0",keyCombinationLabelWin:"Ctrl+0",keyCombinationMac:"meta+0",keyCombinationWin:"ctrl+0"},toggle_theme:{action:"toggle_theme",keyCombinationLabelMac:"⌘M",keyCombinationLabelWin:"Ctrl+M",keyCombinationMac:"meta+m",keyCombinationWin:"ctrl+m"},toggle_filter:{action:"toggle_filter",keyCombinationLabelMac:"⌘F",keyCombinationLabelWin:"Ctrl+F",keyCombinationMac:"meta+f",keyCombinationWin:"ctrl+f"}},le=Me(),Tt=Object.keys(ue).reduce((e,t)=>{const n=ue[t],r=le==="mac"?n.keyCombinationLabelMac:n.keyCombinationLabelWin,o=le==="mac"?n.keyCombinationMac:n.keyCombinationWin;return{...e,[t]:{action:n.action,keyCombinationLabel:r,keyCombination:o}}},{}),Wt=({children:e})=>{const{theme:t,setTheme:n}=nt(),o=tt({query:"(prefers-color-scheme: dark)"})?"dark":"light",[i,u]=s.useState(o);s.useEffect(()=>{u(t==="system"?o:t)},[t,o]),s.useEffect(()=>{i==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[i]);const p=s.useCallback(()=>{n(t==="system"?i==="dark"?"light":"dark":t==="dark"?"light":"dark")},[t,i,n]);return Rt(Tt[Le.TOGGLE_THEME].keyCombination,p,{preventDefault:!0,enableOnFormTags:!0},[p]),I.jsx(ht.Provider,{value:{theme:t,setTheme:n,effectiveTheme:i},children:e})};export{Le as K,Dt as L,It as S,Wt as T,de as a,ht as b,ct as c,tt as d,lt as e,Rt as f,Tt as k,nt as u};
