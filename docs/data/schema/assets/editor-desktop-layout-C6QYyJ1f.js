const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./es-BR3itrZ-.js","./index-DlN4GKyY.js","./index-DKzVQlMx.css","./fr-C090SP5w.js","./de-m5sNv932.js","./hi_IN-CK7Z99UF.js","./ja-BLWn1FIe.js","./ko-CjyjrdhW.js","./ru-C_nkn0n8.js","./zh_CN-Bt6-tEwR.js","./zh_TW-B4K-MHhf.js","./pt_BR-BjMywehl.js","./bn_IN-A7ubNlDO.js","./en_US-093ND2do.js"])))=>i.map(i=>d[i]);
import{r as c,j as o,T as O,e as A,f as L,_ as i,b as S}from"./index-DlN4GKyY.js";import{b as P,d as v,f as I}from"./code-editor-DhNGJuNO.js";import{M as N,D as k,L as R,S as z,E as C,a as M}from"./menu-BLZSJ47r.js";import{C as V}from"./canvas-DF7MVb8y.js";import{g as U,h as B,u as H}from"./create-relationship-node-vT0p223z.js";import{u as $,C as G,a as W}from"./databases-CkBSmLA1.js";import{B as Z}from"./badge-ijTOJij9.js";import{c as F}from"./theme-provider-Bq6UCzHI.js";import"./storage-provider-BI6d8iAI.js";import"./use-storage-CXywz0c4.js";import"./label-CZlEQKST.js";import"./env--3GsIUeg.js";import"./import-C13S_KZ_.js";const K=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Y=F("save",K);var q=["second","minute","hour","day","week","month","year"];function J(e,t){if(t===0)return["just now","right now"];var r=q[Math.floor(t/2)];return e>1&&(r+="s"),[e+" "+r+" ago","in "+e+" "+r]}var Q=["秒","分钟","小时","天","周","个月","年"];function X(e,t){if(t===0)return["刚刚","片刻后"];var r=Q[~~(t/2)];return[e+" "+r+"前",e+" "+r+"后"]}var d={},p=function(e,t){d[e]=t},y=function(e){return d[e]||d.en_US},u=[60,60,24,7,365/7/12,12];function g(e){return e instanceof Date?e:!isNaN(e)||/^\d+$/.test(e)?new Date(parseInt(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(e))}function w(e,t){var r=e<0?1:0;e=Math.abs(e);for(var a=e,n=0;e>=u[n]&&n<u.length;n++)e/=u[n];return e=Math.floor(e),n*=2,e>(n===0?9:1)&&(n+=1),t(e,n,a)[r].replace("%s",e.toString())}function b(e,t){var r=t?g(t):new Date;return(+r-+g(e))/1e3}function ee(e){for(var t=1,r=0,a=Math.abs(e);e>=u[r]&&r<u.length;r++)e/=u[r],t*=u[r];return a=a%t,a=a?t-a:t,Math.ceil(a)}var te=function(e,t,r){var a=b(e,r&&r.relativeDate);return w(a,y(t))},j="timeago-id";function ae(e){return e.getAttribute("datetime")}function re(e,t){e.setAttribute(j,t)}function T(e){return parseInt(e.getAttribute(j))}var h={},f=function(e){clearTimeout(e),delete h[e]};function E(e,t,r,a){f(T(e));var n=a.relativeDate,s=a.minInterval,l=b(t,n);e.innerText=w(l,r);var _=setTimeout(function(){E(e,t,r,a)},Math.min(Math.max(ee(l),s||1)*1e3,2147483647));h[_]=0,re(e,_)}function x(e){e?f(T(e)):Object.keys(h).forEach(f)}function ne(e,t,r){var a=e.length?e:[e];return a.forEach(function(n){E(n,ae(n),y(t),r||{})}),a}p("en_US",J);p("zh_CN",X);var oe=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(a[s]=n[s])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function a(){this.constructor=t}t.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}})(),m=function(){return m=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},m.apply(this,arguments)},ie=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r},se=function(e){return""+(e instanceof Date?e.getTime():e)},le=(function(e){oe(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.dom=null,r}return t.prototype.componentDidMount=function(){this.renderTimeAgo()},t.prototype.componentDidUpdate=function(){this.renderTimeAgo()},t.prototype.renderTimeAgo=function(){var r=this.props,a=r.live,n=r.datetime,s=r.locale,l=r.opts;x(this.dom),a!==!1&&(this.dom.setAttribute("datetime",se(n)),ne(this.dom,s,l))},t.prototype.componentWillUnmount=function(){x(this.dom)},t.prototype.render=function(){var r=this,a=this.props,n=a.datetime;a.live;var s=a.locale,l=a.opts,_=ie(a,["datetime","live","locale","opts"]);return c.createElement("time",m({ref:function(D){r.dom=D}},_),te(n,s,l))},t.defaultProps={live:!0,className:""},t})(c.PureComponent);const ue=async e=>{let t,r;switch(e){case"es":t=(await i(async()=>{const{default:a}=await import("./es-BR3itrZ-.js").then(n=>n.e);return{default:a}},__vite__mapDeps([0,1,2]),import.meta.url)).default,r="es";break;case"fr":t=(await i(async()=>{const{default:a}=await import("./fr-C090SP5w.js").then(n=>n.f);return{default:a}},__vite__mapDeps([3,1,2]),import.meta.url)).default,r="fr";break;case"de":t=(await i(async()=>{const{default:a}=await import("./de-m5sNv932.js").then(n=>n.d);return{default:a}},__vite__mapDeps([4,1,2]),import.meta.url)).default,r="de";break;case"hi":t=(await i(async()=>{const{default:a}=await import("./hi_IN-CK7Z99UF.js").then(n=>n.h);return{default:a}},__vite__mapDeps([5,1,2]),import.meta.url)).default,r="hi_IN";break;case"ja":t=(await i(async()=>{const{default:a}=await import("./ja-BLWn1FIe.js").then(n=>n.j);return{default:a}},__vite__mapDeps([6,1,2]),import.meta.url)).default,r="ja";break;case"ko_KR":t=(await i(async()=>{const{default:a}=await import("./ko-CjyjrdhW.js").then(n=>n.k);return{default:a}},__vite__mapDeps([7,1,2]),import.meta.url)).default,r="ko";break;case"ru":t=(await i(async()=>{const{default:a}=await import("./ru-C_nkn0n8.js").then(n=>n.r);return{default:a}},__vite__mapDeps([8,1,2]),import.meta.url)).default,r="ru";break;case"zh_CN":t=(await i(async()=>{const{default:a}=await import("./zh_CN-Bt6-tEwR.js").then(n=>n.z);return{default:a}},__vite__mapDeps([9,1,2]),import.meta.url)).default,r="zh_CN";break;case"zh_TW":t=(await i(async()=>{const{default:a}=await import("./zh_TW-B4K-MHhf.js").then(n=>n.z);return{default:a}},__vite__mapDeps([10,1,2]),import.meta.url)).default,r="zh_TW";break;case"pt_BR":t=(await i(async()=>{const{default:a}=await import("./pt_BR-BjMywehl.js").then(n=>n.p);return{default:a}},__vite__mapDeps([11,1,2]),import.meta.url)).default,r="pt_BR";break;case"bn":t=(await i(async()=>{const{default:a}=await import("./bn_IN-A7ubNlDO.js").then(n=>n.b);return{default:a}},__vite__mapDeps([12,1,2]),import.meta.url)).default,r="bn";break;default:t=(await i(async()=>{const{default:a}=await import("./en_US-093ND2do.js").then(n=>n.e);return{default:a}},__vite__mapDeps([13,1,2]),import.meta.url)).default,r="en_US";break}return{locale:t,lang:r}},ce=()=>{const{currentDiagram:e}=U(),{i18n:t}=B(),[r,a]=c.useState("en_US");return c.useEffect(()=>{(async()=>{const{locale:s,lang:l}=await ue(t.language);p(t.language,s),a(l)})()},[t.language]),o.jsxs(O,{children:[o.jsx(A,{children:o.jsxs(Z,{variant:"secondary",className:"flex gap-1.5 whitespace-nowrap",children:[o.jsx(Y,{size:16}),o.jsx(le,{datetime:e.updatedAt,locale:r})]})}),o.jsx(L,{children:e.updatedAt.toLocaleString()})]})},_e=()=>{const{effectiveTheme:e}=$(),t=c.useCallback(()=>o.jsx("iframe",{src:"https://ghbtns.com/github-btn.html?user=chartdb&repo=chartdb&type=star&size=large&text=false",width:"40",height:"30",title:"GitHub"}),[]);return o.jsxs("nav",{className:"flex flex-col justify-between border-b px-3 md:h-12 md:flex-row md:items-center md:px-4",children:[o.jsxs("div",{className:"flex flex-1 flex-col justify-between gap-x-1 md:flex-row md:justify-normal",children:[o.jsx("div",{className:"flex items-center justify-between pt-[8px] font-primary md:py-[10px]",children:o.jsx("a",{href:"https://chartdb.io",className:"cursor-pointer",rel:"noreferrer",children:o.jsx("img",{src:e==="light"?G:W,alt:"chartDB",className:"h-4 max-w-fit"})})}),o.jsx(N,{})]}),o.jsx(k,{}),o.jsxs("div",{className:"hidden flex-1 items-center justify-end gap-2 sm:flex",children:[o.jsx(ce,{}),t(),o.jsx(R,{})]})]})},Ee=({initialDiagram:e})=>{const{isSidePanelShowed:t}=H();return o.jsxs(o.Fragment,{children:[o.jsx(_e,{}),o.jsxs(z,{defaultOpen:!1,open:!1,className:"h-full min-h-0",children:[o.jsx(C,{}),o.jsxs(P,{direction:"horizontal",children:[o.jsx(v,{defaultSize:25,minSize:25,maxSize:t?99:0,className:S("transition-[flex-grow] duration-200",{"min-w-[350px]":t}),children:o.jsx(M,{})}),o.jsx(I,{disabled:!t,className:t?"":"hidden"}),o.jsx(v,{defaultSize:75,children:o.jsx(V,{initialTables:e?.tables??[]})})]})]})]})};export{Ee as EditorDesktopLayout,Ee as default};
