import{r as l,E as bp,a7 as Cp,j as g,P as ye,a8 as Sp,a9 as Ep,aa as _p,ab as ii,g as z,D as be,t as Qe,A as pn,R as le,C as Te,J as nn,y as hn,B as Me,ac as at,G as fe,ad as Np,K as ai,b as me,o as gn,n as je,ae as ft,af as ks,s as _e,i as Kt,O as na,ag as Rp,ah as Vc,ai as ra,aj as Ve,ak as ss,al as Tp,k as Dp,am as oa,an as Ap,ao as Mp,x as uo,z as ci,F as li,ap as Pp,L as Bc,M as Wc,aq as Ip,ar as sa,as as kp}from"./index-DlN4GKyY.js";import{d as Op,c as Ne,a as jp}from"./theme-provider-Bq6UCzHI.js";import{v as Lp,c as $p,e as Fp,S as Hp}from"./databases-CkBSmLA1.js";import{u as zp,b as Vp,c as Bp}from"./use-storage-CXywz0c4.js";import{c as Wp,B as ia}from"./label-CZlEQKST.js";var Gp="Portal",fo=l.forwardRef((e,t)=>{const{container:n,...r}=e,[o,s]=l.useState(!1);bp(()=>s(!0),[]);const i=n||o&&globalThis?.document?.body;return i?Cp.createPortal(g.jsx(ye.div,{...r,ref:t}),i):null});fo.displayName=Gp;const Up=(e,t,n,r)=>{const o=[n,{code:t,...r||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(o,"warn","react-i18next::",!0);Tt(o[0])&&(o[0]=`react-i18next:: ${o[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...o):console?.warn&&console.warn(...o)},aa={},Os=(e,t,n,r)=>{Tt(n)&&aa[n]||(Tt(n)&&(aa[n]=new Date),Up(e,t,n,r))},Gc=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},js=(e,t,n)=>{e.loadNamespaces(t,Gc(e,n))},ca=(e,t,n,r)=>{if(Tt(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return js(e,n,r);n.forEach(o=>{e.options.ns.indexOf(o)<0&&e.options.ns.push(o)}),e.loadLanguages(t,Gc(e,r))},Xp=(e,t,n={})=>!t.languages||!t.languages.length?(Os(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:n.lng,precheck:(r,o)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!o(r.isLanguageChangingTo,e))return!1}}),Tt=e=>typeof e=="string",Yp=e=>typeof e=="object"&&e!==null,Zp=l.createContext();class Kp{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const qp=(e,t)=>{const n=l.useRef();return l.useEffect(()=>{n.current=e},[e,t]),n.current},Uc=(e,t,n,r)=>e.getFixedT(t,n,r),Qp=(e,t,n,r)=>l.useCallback(Uc(e,t,n,r),[e,t,n,r]),Jp=(e,t={})=>{const{i18n:n}=t,{i18n:r,defaultNS:o}=l.useContext(Zp)||{},s=n||r||Sp();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new Kp),!s){Os(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const b=(S,R)=>Tt(R)?R:Yp(R)&&Tt(R.defaultValue)?R.defaultValue:Array.isArray(S)?S[S.length-1]:S,N=[b,{},!1];return N.t=b,N.i18n={},N.ready=!1,N}s.options.react?.wait&&Os(s,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const i={...Ep(),...s.options.react,...t},{useSuspense:a,keyPrefix:u}=i;let c=o||s.options?.defaultNS;c=Tt(c)?[c]:c||["translation"],s.reportNamespaces.addUsedNamespaces?.(c);const d=(s.isInitialized||s.initializedStoreOnce)&&c.every(b=>Xp(b,s,i)),f=Qp(s,t.lng||null,i.nsMode==="fallback"?c:c[0],u),p=()=>f,h=()=>Uc(s,t.lng||null,i.nsMode==="fallback"?c:c[0],u),[m,x]=l.useState(p);let y=c.join();t.lng&&(y=`${t.lng}${y}`);const w=qp(y),E=l.useRef(!0);l.useEffect(()=>{const{bindI18n:b,bindI18nStore:N}=i;E.current=!0,!d&&!a&&(t.lng?ca(s,t.lng,c,()=>{E.current&&x(h)}):js(s,c,()=>{E.current&&x(h)})),d&&w&&w!==y&&E.current&&x(h);const S=()=>{E.current&&x(h)};return b&&s?.on(b,S),N&&s?.store.on(N,S),()=>{E.current=!1,s&&b&&b?.split(" ").forEach(R=>s.off(R,S)),N&&s&&N.split(" ").forEach(R=>s.store.off(R,S))}},[s,y]),l.useEffect(()=>{E.current&&d&&x(p)},[s,u,d]);const v=[m,s,d];if(v.t=m,v.i18n=s,v.ready=d,d||!d&&!a)return v;throw new Promise(b=>{t.lng?ca(s,t.lng,c,()=>b()):js(s,c,()=>b())})};var is={},Ls=function(e,t){return Ls=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},Ls(e,t)};function Xc(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Ls(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Le=function(){return Le=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Le.apply(this,arguments)};function po(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function Yc(e,t,n,r){var o=arguments.length,s=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function Zc(e,t){return function(n,r){t(n,r,e)}}function Kc(e,t,n,r,o,s){function i(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var a=r.kind,u=a==="getter"?"get":a==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,d=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),f,p=!1,h=n.length-1;h>=0;h--){var m={};for(var x in r)m[x]=x==="access"?{}:r[x];for(var x in r.access)m.access[x]=r.access[x];m.addInitializer=function(w){if(p)throw new TypeError("Cannot add initializers after decoration has completed");s.push(i(w||null))};var y=(0,n[h])(a==="accessor"?{get:d.get,set:d.set}:d[u],m);if(a==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(f=i(y.get))&&(d.get=f),(f=i(y.set))&&(d.set=f),(f=i(y.init))&&o.unshift(f)}else(f=i(y))&&(a==="field"?o.unshift(f):d[u]=f)}c&&Object.defineProperty(c,r.name,d),p=!0}function qc(e,t,n){for(var r=arguments.length>2,o=0;o<t.length;o++)n=r?t[o].call(e,n):t[o].call(e);return r?n:void 0}function Qc(e){return typeof e=="symbol"?e:"".concat(e)}function Jc(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function el(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function tl(e,t,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(d){try{c(r.next(d))}catch(f){i(f)}}function u(d){try{c(r.throw(d))}catch(f){i(f)}}function c(d){d.done?s(d.value):o(d.value).then(a,u)}c((r=r.apply(e,t||[])).next())})}function nl(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,o,s,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=a(0),i.throw=a(1),i.return=a(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(c){return function(d){return u([c,d])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(n=0)),n;)try{if(r=1,o&&(s=c[0]&2?o.return:c[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,c[1])).done)return s;switch(o=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,o=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(d){c=[6,d],o=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var ho=Object.create?(function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]});function rl(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&ho(t,e,n)}function Gn(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ui(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s}function ol(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ui(arguments[t]));return e}function sl(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)r[o]=s[i];return r}function di(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,s;r<o;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function rn(e){return this instanceof rn?(this.v=e,this):new rn(e)}function il(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",i),o[Symbol.asyncIterator]=function(){return this},o;function i(h){return function(m){return Promise.resolve(m).then(h,f)}}function a(h,m){r[h]&&(o[h]=function(x){return new Promise(function(y,w){s.push([h,x,y,w])>1||u(h,x)})},m&&(o[h]=m(o[h])))}function u(h,m){try{c(r[h](m))}catch(x){p(s[0][3],x)}}function c(h){h.value instanceof rn?Promise.resolve(h.value.v).then(d,f):p(s[0][2],h)}function d(h){u("next",h)}function f(h){u("throw",h)}function p(h,m){h(m),s.shift(),s.length&&u(s[0][0],s[0][1])}}function al(e){var t,n;return t={},r("next"),r("throw",function(o){throw o}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(o,s){t[o]=e[o]?function(i){return(n=!n)?{value:rn(e[o](i)),done:!1}:s?s(i):i}:s}}function cl(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Gn=="function"?Gn(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(i){return new Promise(function(a,u){i=e[s](i),o(a,u,i.done,i.value)})}}function o(s,i,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},i)}}function ll(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var eh=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},$s=function(e){return $s=Object.getOwnPropertyNames||function(t){var n=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[n.length]=r);return n},$s(e)};function ul(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=$s(e),r=0;r<n.length;r++)n[r]!=="default"&&ho(t,e,n[r]);return eh(t,e),t}function dl(e){return e&&e.__esModule?e:{default:e}}function fl(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}function pl(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n}function hl(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function gl(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,o;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(o=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");o&&(r=function(){try{o.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var th=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function ml(e){function t(s){e.error=e.hasError?new th(s,e.error,"An error was suppressed during disposal."):s,e.hasError=!0}var n,r=0;function o(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(o);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(s).then(o,function(i){return t(i),o()})}else r|=1}catch(i){t(i)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return o()}function yl(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,o,s,i){return r?t?".jsx":".js":o&&(!s||!i)?n:o+s+"."+i.toLowerCase()+"js"}):e}const nh={__extends:Xc,__assign:Le,__rest:po,__decorate:Yc,__param:Zc,__esDecorate:Kc,__runInitializers:qc,__propKey:Qc,__setFunctionName:Jc,__metadata:el,__awaiter:tl,__generator:nl,__createBinding:ho,__exportStar:rl,__values:Gn,__read:ui,__spread:ol,__spreadArrays:sl,__spreadArray:di,__await:rn,__asyncGenerator:il,__asyncDelegator:al,__asyncValues:cl,__makeTemplateObject:ll,__importStar:ul,__importDefault:dl,__classPrivateFieldGet:fl,__classPrivateFieldSet:pl,__classPrivateFieldIn:hl,__addDisposableResource:gl,__disposeResources:ml,__rewriteRelativeImportExtension:yl},rh=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:gl,get __assign(){return Le},__asyncDelegator:al,__asyncGenerator:il,__asyncValues:cl,__await:rn,__awaiter:tl,__classPrivateFieldGet:fl,__classPrivateFieldIn:hl,__classPrivateFieldSet:pl,__createBinding:ho,__decorate:Yc,__disposeResources:ml,__esDecorate:Kc,__exportStar:rl,__extends:Xc,__generator:nl,__importDefault:dl,__importStar:ul,__makeTemplateObject:ll,__metadata:el,__param:Zc,__propKey:Qc,__read:ui,__rest:po,__rewriteRelativeImportExtension:yl,__runInitializers:qc,__setFunctionName:Jc,__spread:ol,__spreadArray:di,__spreadArrays:sl,__values:Gn,default:nh},Symbol.toStringTag,{value:"Module"})),oh=_p(rh);var la;function sh(){return la||(la=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.EventEmitter=void 0;var t=oh,n=ii(),r=e.EventEmitter=(function(){function s(){var i=this;this.subscriptions=new Set,this.emit=function(a){var u,c;try{for(var d=(0,t.__values)(i.subscriptions),f=d.next();!f.done;f=d.next()){var p=f.value;p(a)}}catch(h){u={error:h}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}},this.useSubscription=function(a){var u=(0,n.useRef)(void 0);u.current=a,(0,n.useEffect)(function(){function c(d){u.current&&u.current(d)}return i.subscriptions.add(c),function(){i.subscriptions.delete(c)}},[])}}return s})();function o(){var s=(0,n.useRef)(void 0);return s.current||(s.current=new r),s.current}e.default=o})(is)),is}var vl=sh();const xl=l.createContext({databaseType:be.GENERIC,diagramName:"",diagramId:"",tables:[],relationships:[],dependencies:[],areas:[],customTypes:[],notes:[],schemas:[],highlightCustomTypeId:z,currentDiagram:{id:"",name:"",databaseType:be.GENERIC,createdAt:new Date,updatedAt:new Date},events:new vl.EventEmitter,updateDiagramId:z,updateDiagramName:z,updateDiagramUpdatedAt:z,loadDiagram:z,loadDiagramFromData:z,clearDiagramData:z,deleteDiagram:z,updateDiagramData:z,updateDatabaseType:z,updateDatabaseEdition:z,createTable:z,getTable:z,addTable:z,addTables:z,removeTable:z,removeTables:z,updateTable:z,updateTablesState:z,updateField:z,removeField:z,createField:z,addField:z,getField:z,createIndex:z,addIndex:z,getIndex:z,removeIndex:z,updateIndex:z,createCheckConstraint:z,addCheckConstraint:z,removeCheckConstraint:z,updateCheckConstraint:z,createRelationship:z,addRelationship:z,getRelationship:z,removeRelationship:z,updateRelationship:z,removeRelationships:z,addRelationships:z,createDependency:z,addDependency:z,getDependency:z,removeDependency:z,removeDependencies:z,addDependencies:z,updateDependency:z,createArea:z,addArea:z,addAreas:z,getArea:z,removeArea:z,removeAreas:z,updateArea:z,createNote:z,addNote:z,addNotes:z,getNote:z,removeNote:z,removeNotes:z,updateNote:z,createCustomType:z,addCustomType:z,addCustomTypes:z,getCustomType:z,removeCustomType:z,removeCustomTypes:z,updateCustomType:z}),ih=()=>l.useContext(xl),ah=l.createContext({openCreateDiagramDialog:z,closeCreateDiagramDialog:z,openOpenDiagramDialog:z,closeOpenDiagramDialog:z,openExportSQLDialog:z,closeExportSQLDialog:z,closeCreateRelationshipDialog:z,openCreateRelationshipDialog:z,openImportDatabaseDialog:z,closeImportDatabaseDialog:z,openTableSchemaDialog:z,closeTableSchemaDialog:z,openStarUsDialog:z,closeStarUsDialog:z,openExportImageDialog:z,closeExportImageDialog:z,openExportDiagramDialog:z,closeExportDiagramDialog:z,openImportDiagramDialog:z,closeImportDiagramDialog:z}),wS=()=>l.useContext(ah);function Ie(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,s;for(s=0;s<r.length;s++)o=r[s],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}var ch=["color"],lh=l.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Ie(e,ch);return l.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),l.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),uh=["color"],ua=l.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Ie(e,uh);return l.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),l.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),dh=["color"],bS=l.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Ie(e,dh);return l.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),l.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),fh=["color"],CS=l.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Ie(e,fh);return l.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),l.createElement("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),ph=["color"],SS=l.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Ie(e,ph);return l.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),l.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),hh=["color"],ES=l.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Ie(e,hh);return l.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),l.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),gh=["color"],jr=l.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Ie(e,gh);return l.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),l.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),mh=["color"],_S=l.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Ie(e,mh);return l.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.07451 1.82584C5.03267 1.81926 4.99014 1.81825 4.94803 1.82284C4.10683 1.91446 2.82673 2.36828 2.07115 2.77808C2.02106 2.80525 1.97621 2.84112 1.93869 2.88402C1.62502 3.24266 1.34046 3.82836 1.11706 4.38186C0.887447 4.95076 0.697293 5.55032 0.588937 5.98354C0.236232 7.39369 0.042502 9.08728 0.0174948 10.6925C0.0162429 10.7729 0.0351883 10.8523 0.0725931 10.9234C0.373679 11.496 1.02015 12.027 1.66809 12.4152C2.32332 12.8078 3.08732 13.1182 3.70385 13.1778C3.85335 13.1922 4.00098 13.1358 4.10282 13.0255C4.2572 12.8581 4.5193 12.4676 4.71745 12.1643C4.80739 12.0267 4.89157 11.8953 4.95845 11.7901C5.62023 11.9106 6.45043 11.9801 7.50002 11.9801C8.54844 11.9801 9.37796 11.9107 10.0394 11.7905C10.1062 11.8957 10.1903 12.0269 10.2801 12.1643C10.4783 12.4676 10.7404 12.8581 10.8947 13.0255C10.9966 13.1358 11.1442 13.1922 11.2937 13.1778C11.9102 13.1182 12.6742 12.8078 13.3295 12.4152C13.9774 12.027 14.6239 11.496 14.925 10.9234C14.9624 10.8523 14.9813 10.7729 14.9801 10.6925C14.9551 9.08728 14.7613 7.39369 14.4086 5.98354C14.3003 5.55032 14.1101 4.95076 13.8805 4.38186C13.6571 3.82836 13.3725 3.24266 13.0589 2.88402C13.0214 2.84112 12.9765 2.80525 12.9264 2.77808C12.1708 2.36828 10.8907 1.91446 10.0495 1.82284C10.0074 1.81825 9.96489 1.81926 9.92305 1.82584C9.71676 1.85825 9.5391 1.96458 9.40809 2.06355C9.26977 2.16804 9.1413 2.29668 9.0304 2.42682C8.86968 2.61544 8.71437 2.84488 8.61428 3.06225C8.27237 3.03501 7.90138 3.02 7.5 3.02C7.0977 3.02 6.72593 3.03508 6.38337 3.06244C6.28328 2.84501 6.12792 2.61549 5.96716 2.42682C5.85626 2.29668 5.72778 2.16804 5.58947 2.06355C5.45846 1.96458 5.2808 1.85825 5.07451 1.82584ZM11.0181 11.5382C11.0395 11.5713 11.0615 11.6051 11.0838 11.6392C11.2169 11.843 11.3487 12.0385 11.4508 12.1809C11.8475 12.0916 12.352 11.8818 12.8361 11.5917C13.3795 11.2661 13.8098 10.8918 14.0177 10.5739C13.9852 9.06758 13.7993 7.50369 13.4773 6.21648C13.38 5.82759 13.2038 5.27021 12.9903 4.74117C12.7893 4.24326 12.5753 3.82162 12.388 3.5792C11.7376 3.24219 10.7129 2.88582 10.0454 2.78987C10.0308 2.79839 10.0113 2.81102 9.98675 2.82955C9.91863 2.881 9.84018 2.95666 9.76111 3.04945C9.71959 3.09817 9.68166 3.1471 9.64768 3.19449C9.953 3.25031 10.2253 3.3171 10.4662 3.39123C11.1499 3.6016 11.6428 3.89039 11.884 4.212C12.0431 4.42408 12.0001 4.72494 11.788 4.884C11.5759 5.04306 11.2751 5.00008 11.116 4.788C11.0572 4.70961 10.8001 4.4984 10.1838 4.30877C9.58933 4.12585 8.71356 3.98 7.5 3.98C6.28644 3.98 5.41067 4.12585 4.81616 4.30877C4.19988 4.4984 3.94279 4.70961 3.884 4.788C3.72494 5.00008 3.42408 5.04306 3.212 4.884C2.99992 4.72494 2.95694 4.42408 3.116 4.212C3.35721 3.89039 3.85011 3.6016 4.53383 3.39123C4.77418 3.31727 5.04571 3.25062 5.35016 3.19488C5.31611 3.14738 5.27808 3.09831 5.23645 3.04945C5.15738 2.95666 5.07893 2.881 5.01081 2.82955C4.98628 2.81102 4.96674 2.79839 4.95217 2.78987C4.28464 2.88582 3.25999 3.24219 2.60954 3.5792C2.42226 3.82162 2.20825 4.24326 2.00729 4.74117C1.79376 5.27021 1.61752 5.82759 1.52025 6.21648C1.19829 7.50369 1.01236 9.06758 0.97986 10.5739C1.18772 10.8918 1.61807 11.2661 2.16148 11.5917C2.64557 11.8818 3.15003 12.0916 3.5468 12.1809C3.64885 12.0385 3.78065 11.843 3.9138 11.6392C3.93626 11.6048 3.95838 11.5708 3.97996 11.5375C3.19521 11.2591 2.77361 10.8758 2.50064 10.4664C2.35359 10.2458 2.4132 9.94778 2.63377 9.80074C2.85435 9.65369 3.15236 9.71329 3.29941 9.93387C3.56077 10.3259 4.24355 11.0201 7.50002 11.0201C10.7565 11.0201 11.4392 10.326 11.7006 9.93386C11.8477 9.71329 12.1457 9.65369 12.3663 9.80074C12.5869 9.94779 12.6465 10.2458 12.4994 10.4664C12.2262 10.8762 11.8041 11.2598 11.0181 11.5382ZM4.08049 7.01221C4.32412 6.74984 4.65476 6.60162 5.00007 6.59998C5.34538 6.60162 5.67603 6.74984 5.91966 7.01221C6.16329 7.27459 6.30007 7.62974 6.30007 7.99998C6.30007 8.37021 6.16329 8.72536 5.91966 8.98774C5.67603 9.25011 5.34538 9.39833 5.00007 9.39998C4.65476 9.39833 4.32412 9.25011 4.08049 8.98774C3.83685 8.72536 3.70007 8.37021 3.70007 7.99998C3.70007 7.62974 3.83685 7.27459 4.08049 7.01221ZM9.99885 6.59998C9.65354 6.60162 9.3229 6.74984 9.07926 7.01221C8.83563 7.27459 8.69885 7.62974 8.69885 7.99998C8.69885 8.37021 8.83563 8.72536 9.07926 8.98774C9.3229 9.25011 9.65354 9.39833 9.99885 9.39998C10.3442 9.39833 10.6748 9.25011 10.9184 8.98774C11.1621 8.72536 11.2989 8.37021 11.2989 7.99998C11.2989 7.62974 11.1621 7.27459 10.9184 7.01221C10.6748 6.74984 10.3442 6.60162 9.99885 6.59998Z",fill:r}))}),yh=["color"],NS=l.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Ie(e,yh);return l.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),l.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:r}))}),vh=["color"],RS=l.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Ie(e,vh);return l.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),l.createElement("path",{d:"M5.5 4.625C6.12132 4.625 6.625 4.12132 6.625 3.5C6.625 2.87868 6.12132 2.375 5.5 2.375C4.87868 2.375 4.375 2.87868 4.375 3.5C4.375 4.12132 4.87868 4.625 5.5 4.625ZM9.5 4.625C10.1213 4.625 10.625 4.12132 10.625 3.5C10.625 2.87868 10.1213 2.375 9.5 2.375C8.87868 2.375 8.375 2.87868 8.375 3.5C8.375 4.12132 8.87868 4.625 9.5 4.625ZM10.625 7.5C10.625 8.12132 10.1213 8.625 9.5 8.625C8.87868 8.625 8.375 8.12132 8.375 7.5C8.375 6.87868 8.87868 6.375 9.5 6.375C10.1213 6.375 10.625 6.87868 10.625 7.5ZM5.5 8.625C6.12132 8.625 6.625 8.12132 6.625 7.5C6.625 6.87868 6.12132 6.375 5.5 6.375C4.87868 6.375 4.375 6.87868 4.375 7.5C4.375 8.12132 4.87868 8.625 5.5 8.625ZM10.625 11.5C10.625 12.1213 10.1213 12.625 9.5 12.625C8.87868 12.625 8.375 12.1213 8.375 11.5C8.375 10.8787 8.87868 10.375 9.5 10.375C10.1213 10.375 10.625 10.8787 10.625 11.5ZM5.5 12.625C6.12132 12.625 6.625 12.1213 6.625 11.5C6.625 10.8787 6.12132 10.375 5.5 10.375C4.87868 10.375 4.375 10.8787 4.375 11.5C4.375 12.1213 4.87868 12.625 5.5 12.625Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),xh=["color"],wh=l.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Ie(e,xh);return l.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),l.createElement("path",{d:"M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),bh=["color"],TS=l.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Ie(e,bh);return l.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),l.createElement("path",{d:"M7.23336 4.69629C7.23336 2.96884 8.63335 1.56857 10.36 1.56857C11.3736 1.56857 12.183 2.04804 12.7254 2.74385C13.3079 2.62467 13.8557 2.40913 14.3513 2.11508C14.1559 2.72598 13.7424 3.2396 13.2033 3.56463C13.2038 3.56568 13.2042 3.56674 13.2047 3.56779C13.7334 3.50361 14.2364 3.36302 14.7048 3.15546L14.7037 3.15715C14.3667 3.66183 13.9431 4.10736 13.4561 4.47034C13.4823 4.64672 13.4956 4.82427 13.4956 5.00079C13.4956 8.6871 10.6873 12.9746 5.52122 12.9746C3.93906 12.9746 2.46544 12.511 1.22505 11.7152C0.992632 11.5661 0.925108 11.2568 1.07423 11.0244C1.0874 11.0038 1.10183 10.9846 1.11734 10.9666C1.20582 10.8202 1.37438 10.7309 1.5554 10.7522C2.47066 10.8601 3.38568 10.7485 4.19219 10.3962C3.39226 10.0434 2.77129 9.35975 2.50204 8.51974C2.45359 8.3686 2.48835 8.20311 2.59351 8.08422C2.59716 8.0801 2.60087 8.07606 2.60464 8.0721C1.96391 7.50819 1.55973 6.68208 1.55973 5.76143V5.72759C1.55973 5.56814 1.64411 5.42059 1.78155 5.33974C1.82671 5.31317 1.87537 5.29511 1.92532 5.28558C1.70549 4.86154 1.58116 4.37984 1.58116 3.86958C1.58116 3.40165 1.58384 2.81192 1.91332 2.28081C1.98718 2.16175 2.10758 2.08915 2.2364 2.07195C2.42588 2.01237 2.64087 2.06969 2.77406 2.23302C3.86536 3.57126 5.44066 4.49583 7.23366 4.73961L7.23336 4.69629ZM5.52122 11.9746C4.73387 11.9746 3.97781 11.8435 3.27248 11.6023C4.13012 11.4538 4.95307 11.1159 5.66218 10.5602C5.81211 10.4427 5.87182 10.2435 5.81126 10.0629C5.7507 9.88234 5.583 9.75943 5.39255 9.75607C4.68968 9.74366 4.06712 9.39716 3.67793 8.86845C3.86828 8.85306 4.05428 8.82039 4.23445 8.77167C4.43603 8.71716 4.57363 8.53114 4.56674 8.32243C4.55985 8.11372 4.41029 7.93718 4.20555 7.89607C3.42694 7.73977 2.79883 7.16764 2.56169 6.42174C2.76255 6.47025 2.97102 6.4991 3.18482 6.5061C3.38563 6.51267 3.56646 6.38533 3.62795 6.19405C3.68943 6.00277 3.61666 5.79391 3.44963 5.68224C2.86523 5.29155 2.48116 4.62464 2.48116 3.86958C2.48116 3.70213 2.48352 3.55268 2.49355 3.41719C3.85115 4.79913 5.70873 5.68931 7.77588 5.79338C7.93225 5.80126 8.08328 5.73543 8.18395 5.61553C8.28463 5.49562 8.32332 5.33548 8.28851 5.18284C8.25255 5.02517 8.23336 4.86284 8.23336 4.69629C8.23336 3.52085 9.18591 2.56857 10.36 2.56857C11.5943 2.56857 12.4956 3.71208 12.4956 5.00079C12.4956 8.25709 10.0202 11.9746 5.52122 11.9746Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Ch=["color"],DS=l.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Ie(e,Ch);return l.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),l.createElement("path",{d:"M8 2H13.5C13.7761 2 14 2.22386 14 2.5V12.5C14 12.7761 13.7761 13 13.5 13H8V2ZM7 2H1.5C1.22386 2 1 2.22386 1 2.5V12.5C1 12.7761 1.22386 13 1.5 13H7V2ZM0 2.5C0 1.67157 0.671573 1 1.5 1H13.5C14.3284 1 15 1.67157 15 2.5V12.5C15 13.3284 14.3284 14 13.5 14H1.5C0.671573 14 0 13.3284 0 12.5V2.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))});function da(e){const t=Sh(e),n=l.forwardRef((r,o)=>{const{children:s,...i}=r,a=l.Children.toArray(s),u=a.find(_h);if(u){const c=u.props.children,d=a.map(f=>f===u?l.Children.count(c)>1?l.Children.only(null):l.isValidElement(c)?c.props.children:null:f);return g.jsx(t,{...i,ref:o,children:l.isValidElement(c)?l.cloneElement(c,void 0,d):null})}return g.jsx(t,{...i,ref:o,children:s})});return n.displayName=`${e}.Slot`,n}function Sh(e){const t=l.forwardRef((n,r)=>{const{children:o,...s}=n;if(l.isValidElement(o)){const i=Rh(o),a=Nh(s,o.props);return o.type!==l.Fragment&&(a.ref=r?Qe(r,i):i),l.cloneElement(o,a)}return l.Children.count(o)>1?l.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Eh=Symbol("radix.slottable");function _h(e){return l.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Eh}function Nh(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{const u=s(...a);return o(...a),u}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}function Rh(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function wl(e){const t=e+"CollectionProvider",[n,r]=pn(t),[o,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=x=>{const{scope:y,children:w}=x,E=le.useRef(null),v=le.useRef(new Map).current;return g.jsx(o,{scope:y,itemMap:v,collectionRef:E,children:w})};i.displayName=t;const a=e+"CollectionSlot",u=da(a),c=le.forwardRef((x,y)=>{const{scope:w,children:E}=x,v=s(a,w),b=Te(y,v.collectionRef);return g.jsx(u,{ref:b,children:E})});c.displayName=a;const d=e+"CollectionItemSlot",f="data-radix-collection-item",p=da(d),h=le.forwardRef((x,y)=>{const{scope:w,children:E,...v}=x,b=le.useRef(null),N=Te(y,b),S=s(d,w);return le.useEffect(()=>(S.itemMap.set(b,{ref:b,...v}),()=>{S.itemMap.delete(b)})),g.jsx(p,{[f]:"",ref:N,children:E})});h.displayName=d;function m(x){const y=s(e+"CollectionConsumer",x);return le.useCallback(()=>{const E=y.collectionRef.current;if(!E)return[];const v=Array.from(E.querySelectorAll(`[${f}]`));return Array.from(y.itemMap.values()).sort((S,R)=>v.indexOf(S.ref.current)-v.indexOf(R.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:i,Slot:c,ItemSlot:h},m,r]}const Th=1,Dh=1e6;let as=0;function Ah(){return as=(as+1)%Number.MAX_SAFE_INTEGER,as.toString()}const cs=new Map,fa=e=>{if(cs.has(e))return;const t=setTimeout(()=>{cs.delete(e),Vn({type:"REMOVE_TOAST",toastId:e})},Dh);cs.set(e,t)},Mh=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,Th)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?fa(n):e.toasts.forEach(r=>{fa(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Lr=[];let $r={toasts:[]};function Vn(e){$r=Mh($r,e),Lr.forEach(t=>{t($r)})}function Ph({...e}){const t=Ah(),n=o=>Vn({type:"UPDATE_TOAST",toast:{...o,id:t}}),r=()=>Vn({type:"DISMISS_TOAST",toastId:t});return Vn({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:o=>{o||r()}}}),{id:t,dismiss:r,update:n}}function AS(){const[e,t]=le.useState($r);return le.useEffect(()=>(Lr.push(t),()=>{const n=Lr.indexOf(t);n>-1&&Lr.splice(n,1)}),[e]),{...e,toast:Ph,dismiss:n=>Vn({type:"DISMISS_TOAST",toastId:n})}}const Ih={sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1400px"};function MS(e){const t=Op({query:`(min-width: ${Ih[e]})`});return{[`is${e[0].toUpperCase()+e.substring(1)}`]:t}}var ls="focusScope.autoFocusOnMount",us="focusScope.autoFocusOnUnmount",pa={bubbles:!1,cancelable:!0},kh="FocusScope",go=l.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:s,...i}=e,[a,u]=l.useState(null),c=nn(o),d=nn(s),f=l.useRef(null),p=Te(t,x=>u(x)),h=l.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;l.useEffect(()=>{if(r){let x=function(v){if(h.paused||!a)return;const b=v.target;a.contains(b)?f.current=b:dt(f.current,{select:!0})},y=function(v){if(h.paused||!a)return;const b=v.relatedTarget;b!==null&&(a.contains(b)||dt(f.current,{select:!0}))},w=function(v){if(document.activeElement===document.body)for(const N of v)N.removedNodes.length>0&&dt(a)};document.addEventListener("focusin",x),document.addEventListener("focusout",y);const E=new MutationObserver(w);return a&&E.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",y),E.disconnect()}}},[r,a,h.paused]),l.useEffect(()=>{if(a){ga.add(h);const x=document.activeElement;if(!a.contains(x)){const w=new CustomEvent(ls,pa);a.addEventListener(ls,c),a.dispatchEvent(w),w.defaultPrevented||(Oh(Hh(bl(a)),{select:!0}),document.activeElement===x&&dt(a))}return()=>{a.removeEventListener(ls,c),setTimeout(()=>{const w=new CustomEvent(us,pa);a.addEventListener(us,d),a.dispatchEvent(w),w.defaultPrevented||dt(x??document.body,{select:!0}),a.removeEventListener(us,d),ga.remove(h)},0)}}},[a,c,d,h]);const m=l.useCallback(x=>{if(!n&&!r||h.paused)return;const y=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,w=document.activeElement;if(y&&w){const E=x.currentTarget,[v,b]=jh(E);v&&b?!x.shiftKey&&w===b?(x.preventDefault(),n&&dt(v,{select:!0})):x.shiftKey&&w===v&&(x.preventDefault(),n&&dt(b,{select:!0})):w===E&&x.preventDefault()}},[n,r,h.paused]);return g.jsx(ye.div,{tabIndex:-1,...i,ref:p,onKeyDown:m})});go.displayName=kh;function Oh(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(dt(r,{select:t}),document.activeElement!==n)return}function jh(e){const t=bl(e),n=ha(t,e),r=ha(t.reverse(),e);return[n,r]}function bl(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function ha(e,t){for(const n of e)if(!Lh(n,{upTo:t}))return n}function Lh(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function $h(e){return e instanceof HTMLInputElement&&"select"in e}function dt(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&$h(e)&&t&&e.select()}}var ga=Fh();function Fh(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=ma(e,t),e.unshift(t)},remove(t){e=ma(e,t),e[0]?.resume()}}}function ma(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Hh(e){return e.filter(t=>t.tagName!=="A")}var ds=0;function fi(){l.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??ya()),document.body.insertAdjacentElement("beforeend",e[1]??ya()),ds++,()=>{ds===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),ds--}},[])}function ya(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Fr="right-scroll-bar-position",Hr="width-before-scroll-bar",zh="with-scroll-bars-hidden",Vh="--removed-body-scroll-bar-size";function fs(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Bh(e,t){var n=l.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var Wh=typeof window<"u"?l.useLayoutEffect:l.useEffect,va=new WeakMap;function Gh(e,t){var n=Bh(null,function(r){return e.forEach(function(o){return fs(o,r)})});return Wh(function(){var r=va.get(n);if(r){var o=new Set(r),s=new Set(e),i=n.current;o.forEach(function(a){s.has(a)||fs(a,null)}),s.forEach(function(a){o.has(a)||fs(a,i)})}va.set(n,e)},[e]),n}function Uh(e){return e}function Xh(e,t){t===void 0&&(t=Uh);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var i=t(s,r);return n.push(i),function(){n=n.filter(function(a){return a!==i})}},assignSyncMedium:function(s){for(r=!0;n.length;){var i=n;n=[],i.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var i=[];if(n.length){var a=n;n=[],a.forEach(s),i=n}var u=function(){var d=i;i=[],d.forEach(s)},c=function(){return Promise.resolve().then(u)};c(),n={push:function(d){i.push(d),c()},filter:function(d){return i=i.filter(d),n}}}};return o}function Yh(e){e===void 0&&(e={});var t=Xh(null);return t.options=Le({async:!0,ssr:!1},e),t}var Cl=function(e){var t=e.sideCar,n=po(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return l.createElement(r,Le({},n))};Cl.isSideCarExport=!0;function Zh(e,t){return e.useMedium(t),Cl}var Sl=Yh(),ps=function(){},mo=l.forwardRef(function(e,t){var n=l.useRef(null),r=l.useState({onScrollCapture:ps,onWheelCapture:ps,onTouchMoveCapture:ps}),o=r[0],s=r[1],i=e.forwardProps,a=e.children,u=e.className,c=e.removeScrollBar,d=e.enabled,f=e.shards,p=e.sideCar,h=e.noRelative,m=e.noIsolation,x=e.inert,y=e.allowPinchZoom,w=e.as,E=w===void 0?"div":w,v=e.gapMode,b=po(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=p,S=Gh([n,t]),R=Le(Le({},b),o);return l.createElement(l.Fragment,null,d&&l.createElement(N,{sideCar:Sl,removeScrollBar:c,shards:f,noRelative:h,noIsolation:m,inert:x,setCallbacks:s,allowPinchZoom:!!y,lockRef:n,gapMode:v}),i?l.cloneElement(l.Children.only(a),Le(Le({},R),{ref:S})):l.createElement(E,Le({},R,{className:u,ref:S}),a))});mo.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};mo.classNames={fullWidth:Hr,zeroRight:Fr};var Kh=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function qh(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Kh();return t&&e.setAttribute("nonce",t),e}function Qh(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Jh(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var eg=function(){var e=0,t=null;return{add:function(n){e==0&&(t=qh())&&(Qh(t,n),Jh(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},tg=function(){var e=eg();return function(t,n){l.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},El=function(){var e=tg(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},ng={left:0,top:0,right:0,gap:0},hs=function(e){return parseInt(e||"",10)||0},rg=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[hs(n),hs(r),hs(o)]},og=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return ng;var t=rg(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},sg=El(),Jt="data-scroll-locked",ig=function(e,t,n,r){var o=e.left,s=e.top,i=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(zh,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Jt,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Fr,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Hr,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Fr," .").concat(Fr,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Hr," .").concat(Hr,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Jt,`] {
    `).concat(Vh,": ").concat(a,`px;
  }
`)},xa=function(){var e=parseInt(document.body.getAttribute(Jt)||"0",10);return isFinite(e)?e:0},ag=function(){l.useEffect(function(){return document.body.setAttribute(Jt,(xa()+1).toString()),function(){var e=xa()-1;e<=0?document.body.removeAttribute(Jt):document.body.setAttribute(Jt,e.toString())}},[])},cg=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;ag();var s=l.useMemo(function(){return og(o)},[o]);return l.createElement(sg,{styles:ig(s,!t,o,n?"":"!important")})},Fs=!1;if(typeof window<"u")try{var Cr=Object.defineProperty({},"passive",{get:function(){return Fs=!0,!0}});window.addEventListener("test",Cr,Cr),window.removeEventListener("test",Cr,Cr)}catch{Fs=!1}var Wt=Fs?{passive:!1}:!1,lg=function(e){return e.tagName==="TEXTAREA"},_l=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!lg(e)&&n[t]==="visible")},ug=function(e){return _l(e,"overflowY")},dg=function(e){return _l(e,"overflowX")},wa=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=Nl(e,r);if(o){var s=Rl(e,r),i=s[1],a=s[2];if(i>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},fg=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},pg=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Nl=function(e,t){return e==="v"?ug(t):dg(t)},Rl=function(e,t){return e==="v"?fg(t):pg(t)},hg=function(e,t){return e==="h"&&t==="rtl"?-1:1},gg=function(e,t,n,r,o){var s=hg(e,window.getComputedStyle(t).direction),i=s*r,a=n.target,u=t.contains(a),c=!1,d=i>0,f=0,p=0;do{if(!a)break;var h=Rl(e,a),m=h[0],x=h[1],y=h[2],w=x-y-s*m;(m||w)&&Nl(e,a)&&(f+=w,p+=m);var E=a.parentNode;a=E&&E.nodeType===Node.DOCUMENT_FRAGMENT_NODE?E.host:E}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(d&&Math.abs(f)<1||!d&&Math.abs(p)<1)&&(c=!0),c},Sr=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ba=function(e){return[e.deltaX,e.deltaY]},Ca=function(e){return e&&"current"in e?e.current:e},mg=function(e,t){return e[0]===t[0]&&e[1]===t[1]},yg=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},vg=0,Gt=[];function xg(e){var t=l.useRef([]),n=l.useRef([0,0]),r=l.useRef(),o=l.useState(vg++)[0],s=l.useState(El)[0],i=l.useRef(e);l.useEffect(function(){i.current=e},[e]),l.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var x=di([e.lockRef.current],(e.shards||[]).map(Ca),!0).filter(Boolean);return x.forEach(function(y){return y.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),x.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var a=l.useCallback(function(x,y){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!i.current.allowPinchZoom;var w=Sr(x),E=n.current,v="deltaX"in x?x.deltaX:E[0]-w[0],b="deltaY"in x?x.deltaY:E[1]-w[1],N,S=x.target,R=Math.abs(v)>Math.abs(b)?"h":"v";if("touches"in x&&R==="h"&&S.type==="range")return!1;var O=window.getSelection(),D=O&&O.anchorNode,V=D?D===S||D.contains(S):!1;if(V)return!1;var I=wa(R,S);if(!I)return!0;if(I?N=R:(N=R==="v"?"h":"v",I=wa(R,S)),!I)return!1;if(!r.current&&"changedTouches"in x&&(v||b)&&(r.current=N),!N)return!0;var $=r.current||N;return gg($,y,x,$==="h"?v:b)},[]),u=l.useCallback(function(x){var y=x;if(!(!Gt.length||Gt[Gt.length-1]!==s)){var w="deltaY"in y?ba(y):Sr(y),E=t.current.filter(function(N){return N.name===y.type&&(N.target===y.target||y.target===N.shadowParent)&&mg(N.delta,w)})[0];if(E&&E.should){y.cancelable&&y.preventDefault();return}if(!E){var v=(i.current.shards||[]).map(Ca).filter(Boolean).filter(function(N){return N.contains(y.target)}),b=v.length>0?a(y,v[0]):!i.current.noIsolation;b&&y.cancelable&&y.preventDefault()}}},[]),c=l.useCallback(function(x,y,w,E){var v={name:x,delta:y,target:w,should:E,shadowParent:wg(w)};t.current.push(v),setTimeout(function(){t.current=t.current.filter(function(b){return b!==v})},1)},[]),d=l.useCallback(function(x){n.current=Sr(x),r.current=void 0},[]),f=l.useCallback(function(x){c(x.type,ba(x),x.target,a(x,e.lockRef.current))},[]),p=l.useCallback(function(x){c(x.type,Sr(x),x.target,a(x,e.lockRef.current))},[]);l.useEffect(function(){return Gt.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",u,Wt),document.addEventListener("touchmove",u,Wt),document.addEventListener("touchstart",d,Wt),function(){Gt=Gt.filter(function(x){return x!==s}),document.removeEventListener("wheel",u,Wt),document.removeEventListener("touchmove",u,Wt),document.removeEventListener("touchstart",d,Wt)}},[]);var h=e.removeScrollBar,m=e.inert;return l.createElement(l.Fragment,null,m?l.createElement(s,{styles:yg(o)}):null,h?l.createElement(cg,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function wg(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const bg=Zh(Sl,xg);var yo=l.forwardRef(function(e,t){return l.createElement(mo,Le({},e,{ref:t,sideCar:bg}))});yo.classNames=mo.classNames;var Cg=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ut=new WeakMap,Er=new WeakMap,_r={},gs=0,Tl=function(e){return e&&(e.host||Tl(e.parentNode))},Sg=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Tl(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Eg=function(e,t,n,r){var o=Sg(t,Array.isArray(e)?e:[e]);_r[n]||(_r[n]=new WeakMap);var s=_r[n],i=[],a=new Set,u=new Set(o),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};o.forEach(c);var d=function(f){!f||u.has(f)||Array.prototype.forEach.call(f.children,function(p){if(a.has(p))d(p);else try{var h=p.getAttribute(r),m=h!==null&&h!=="false",x=(Ut.get(p)||0)+1,y=(s.get(p)||0)+1;Ut.set(p,x),s.set(p,y),i.push(p),x===1&&m&&Er.set(p,!0),y===1&&p.setAttribute(n,"true"),m||p.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",p,w)}})};return d(t),a.clear(),gs++,function(){i.forEach(function(f){var p=Ut.get(f)-1,h=s.get(f)-1;Ut.set(f,p),s.set(f,h),p||(Er.has(f)||f.removeAttribute(r),Er.delete(f)),h||f.removeAttribute(n)}),gs--,gs||(Ut=new WeakMap,Ut=new WeakMap,Er=new WeakMap,_r={})}},pi=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=Cg(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),Eg(r,o,n,"aria-hidden")):function(){return null}};function _g(e){const t=Ng(e),n=l.forwardRef((r,o)=>{const{children:s,...i}=r,a=l.Children.toArray(s),u=a.find(Tg);if(u){const c=u.props.children,d=a.map(f=>f===u?l.Children.count(c)>1?l.Children.only(null):l.isValidElement(c)?c.props.children:null:f);return g.jsx(t,{...i,ref:o,children:l.isValidElement(c)?l.cloneElement(c,void 0,d):null})}return g.jsx(t,{...i,ref:o,children:s})});return n.displayName=`${e}.Slot`,n}function Ng(e){const t=l.forwardRef((n,r)=>{const{children:o,...s}=n;if(l.isValidElement(o)){const i=Ag(o),a=Dg(s,o.props);return o.type!==l.Fragment&&(a.ref=r?Qe(r,i):i),l.cloneElement(o,a)}return l.Children.count(o)>1?l.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Rg=Symbol("radix.slottable");function Tg(e){return l.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Rg}function Dg(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{const u=s(...a);return o(...a),u}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}function Ag(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var vo="Dialog",[Dl,PS]=pn(vo),[Mg,Xe]=Dl(vo),Al=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:o,onOpenChange:s,modal:i=!0}=e,a=l.useRef(null),u=l.useRef(null),[c,d]=hn({prop:r,defaultProp:o??!1,onChange:s,caller:vo});return g.jsx(Mg,{scope:t,triggerRef:a,contentRef:u,contentId:Me(),titleId:Me(),descriptionId:Me(),open:c,onOpenChange:d,onOpenToggle:l.useCallback(()=>d(f=>!f),[d]),modal:i,children:n})};Al.displayName=vo;var Ml="DialogTrigger",Pl=l.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Xe(Ml,n),s=Te(t,o.triggerRef);return g.jsx(ye.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":mi(o.open),...r,ref:s,onClick:fe(e.onClick,o.onOpenToggle)})});Pl.displayName=Ml;var hi="DialogPortal",[Pg,Il]=Dl(hi,{forceMount:void 0}),kl=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:o}=e,s=Xe(hi,t);return g.jsx(Pg,{scope:t,forceMount:n,children:l.Children.map(r,i=>g.jsx(at,{present:n||s.open,children:g.jsx(fo,{asChild:!0,container:o,children:i})}))})};kl.displayName=hi;var Ur="DialogOverlay",Ol=l.forwardRef((e,t)=>{const n=Il(Ur,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,s=Xe(Ur,e.__scopeDialog);return s.modal?g.jsx(at,{present:r||s.open,children:g.jsx(kg,{...o,ref:t})}):null});Ol.displayName=Ur;var Ig=_g("DialogOverlay.RemoveScroll"),kg=l.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Xe(Ur,n);return g.jsx(yo,{as:Ig,allowPinchZoom:!0,shards:[o.contentRef],children:g.jsx(ye.div,{"data-state":mi(o.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Pt="DialogContent",jl=l.forwardRef((e,t)=>{const n=Il(Pt,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,s=Xe(Pt,e.__scopeDialog);return g.jsx(at,{present:r||s.open,children:s.modal?g.jsx(Og,{...o,ref:t}):g.jsx(jg,{...o,ref:t})})});jl.displayName=Pt;var Og=l.forwardRef((e,t)=>{const n=Xe(Pt,e.__scopeDialog),r=l.useRef(null),o=Te(t,n.contentRef,r);return l.useEffect(()=>{const s=r.current;if(s)return pi(s)},[]),g.jsx(Ll,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:fe(e.onCloseAutoFocus,s=>{s.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:fe(e.onPointerDownOutside,s=>{const i=s.detail.originalEvent,a=i.button===0&&i.ctrlKey===!0;(i.button===2||a)&&s.preventDefault()}),onFocusOutside:fe(e.onFocusOutside,s=>s.preventDefault())})}),jg=l.forwardRef((e,t)=>{const n=Xe(Pt,e.__scopeDialog),r=l.useRef(!1),o=l.useRef(!1);return g.jsx(Ll,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{e.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||n.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:s=>{e.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=s.target;n.triggerRef.current?.contains(i)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),Ll=l.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:s,...i}=e,a=Xe(Pt,n),u=l.useRef(null),c=Te(t,u);return fi(),g.jsxs(g.Fragment,{children:[g.jsx(go,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:s,children:g.jsx(ai,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":mi(a.open),...i,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),g.jsxs(g.Fragment,{children:[g.jsx(Lg,{titleId:a.titleId}),g.jsx(Fg,{contentRef:u,descriptionId:a.descriptionId})]})]})}),gi="DialogTitle",$l=l.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Xe(gi,n);return g.jsx(ye.h2,{id:o.titleId,...r,ref:t})});$l.displayName=gi;var Fl="DialogDescription",Hl=l.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Xe(Fl,n);return g.jsx(ye.p,{id:o.descriptionId,...r,ref:t})});Hl.displayName=Fl;var zl="DialogClose",Vl=l.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Xe(zl,n);return g.jsx(ye.button,{type:"button",...r,ref:t,onClick:fe(e.onClick,()=>o.onOpenChange(!1))})});Vl.displayName=zl;function mi(e){return e?"open":"closed"}var Bl="DialogTitleWarning",[IS,Wl]=Np(Bl,{contentName:Pt,titleName:gi,docsSlug:"dialog"}),Lg=({titleId:e})=>{const t=Wl(Bl),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return l.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},$g="DialogDescriptionWarning",Fg=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Wl($g).contentName}}.`;return l.useEffect(()=>{const o=e.current?.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},Gl=Al,kS=Pl,Ul=kl,yi=Ol,vi=jl,Xl=$l,Yl=Hl,Zl=Vl;function Hg(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Kl(...e){return t=>e.forEach(n=>Hg(n,t))}function Ft(...e){return l.useCallback(Kl(...e),e)}var ql=l.forwardRef((e,t)=>{const{children:n,...r}=e,o=l.Children.toArray(n),s=o.find(Vg);if(s){const i=s.props.children,a=o.map(u=>u===s?l.Children.count(i)>1?l.Children.only(null):l.isValidElement(i)?i.props.children:null:u);return g.jsx(Hs,{...r,ref:t,children:l.isValidElement(i)?l.cloneElement(i,void 0,a):null})}return g.jsx(Hs,{...r,ref:t,children:n})});ql.displayName="Slot";var Hs=l.forwardRef((e,t)=>{const{children:n,...r}=e;if(l.isValidElement(n)){const o=Wg(n);return l.cloneElement(n,{...Bg(r,n.props),ref:t?Kl(t,o):o})}return l.Children.count(n)>1?l.Children.only(null):null});Hs.displayName="SlotClone";var zg=({children:e})=>g.jsx(g.Fragment,{children:e});function Vg(e){return l.isValidElement(e)&&e.type===zg}function Bg(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{s(...a),o(...a)}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}function Wg(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Gg=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],rr=Gg.reduce((e,t)=>{const n=l.forwardRef((r,o)=>{const{asChild:s,...i}=r,a=s?ql:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g.jsx(a,{...i,ref:o})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),zs=globalThis?.document?l.useLayoutEffect:()=>{};function Ug(e,t){return l.useReducer((n,r)=>t[n][r]??n,e)}var or=e=>{const{present:t,children:n}=e,r=Xg(t),o=typeof n=="function"?n({present:r.isPresent}):l.Children.only(n),s=Ft(r.ref,Yg(o));return typeof n=="function"||r.isPresent?l.cloneElement(o,{ref:s}):null};or.displayName="Presence";function Xg(e){const[t,n]=l.useState(),r=l.useRef({}),o=l.useRef(e),s=l.useRef("none"),i=e?"mounted":"unmounted",[a,u]=Ug(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return l.useEffect(()=>{const c=Nr(r.current);s.current=a==="mounted"?c:"none"},[a]),zs(()=>{const c=r.current,d=o.current;if(d!==e){const p=s.current,h=Nr(c);e?u("MOUNT"):h==="none"||c?.display==="none"?u("UNMOUNT"):u(d&&p!==h?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,u]),zs(()=>{if(t){let c;const d=t.ownerDocument.defaultView??window,f=h=>{const x=Nr(r.current).includes(h.animationName);if(h.target===t&&x&&(u("ANIMATION_END"),!o.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",c=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},p=h=>{h.target===t&&(s.current=Nr(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(c),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:l.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function Nr(e){return e?.animationName||"none"}function Yg(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Zg(e,t=[]){let n=[];function r(s,i){const a=l.createContext(i),u=n.length;n=[...n,i];const c=f=>{const{scope:p,children:h,...m}=f,x=p?.[e]?.[u]||a,y=l.useMemo(()=>m,Object.values(m));return g.jsx(x.Provider,{value:y,children:h})};c.displayName=s+"Provider";function d(f,p){const h=p?.[e]?.[u]||a,m=l.useContext(h);if(m)return m;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[c,d]}const o=()=>{const s=n.map(i=>l.createContext(i));return function(a){const u=a?.[e]||s;return l.useMemo(()=>({[`__scope${e}`]:{...a,[e]:u}}),[a,u])}};return o.scopeName=e,[r,Kg(o,...t)]}function Kg(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=r.reduce((a,{useScope:u,scopeName:c})=>{const f=u(s)[`__scope${c}`];return{...a,...f}},{});return l.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function _t(e){const t=l.useRef(e);return l.useEffect(()=>{t.current=e}),l.useMemo(()=>(...n)=>t.current?.(...n),[])}var qg=l.createContext(void 0);function Qg(e){const t=l.useContext(qg);return e||t||"ltr"}function Jg(e,[t,n]){return Math.min(n,Math.max(t,e))}function Dt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e?.(o),n===!1||!o.defaultPrevented)return t?.(o)}}function em(e,t){return l.useReducer((n,r)=>t[n][r]??n,e)}var xi="ScrollArea",[Ql]=Zg(xi),[tm,Fe]=Ql(xi),Jl=l.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:o,scrollHideDelay:s=600,...i}=e,[a,u]=l.useState(null),[c,d]=l.useState(null),[f,p]=l.useState(null),[h,m]=l.useState(null),[x,y]=l.useState(null),[w,E]=l.useState(0),[v,b]=l.useState(0),[N,S]=l.useState(!1),[R,O]=l.useState(!1),D=Ft(t,I=>u(I)),V=Qg(o);return g.jsx(tm,{scope:n,type:r,dir:V,scrollHideDelay:s,scrollArea:a,viewport:c,onViewportChange:d,content:f,onContentChange:p,scrollbarX:h,onScrollbarXChange:m,scrollbarXEnabled:N,onScrollbarXEnabledChange:S,scrollbarY:x,onScrollbarYChange:y,scrollbarYEnabled:R,onScrollbarYEnabledChange:O,onCornerWidthChange:E,onCornerHeightChange:b,children:g.jsx(rr.div,{dir:V,...i,ref:D,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":v+"px",...e.style}})})});Jl.displayName=xi;var eu="ScrollAreaViewport",tu=l.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,asChild:o,nonce:s,...i}=e,a=Fe(eu,n),u=l.useRef(null),c=Ft(t,u,a.onViewportChange);return g.jsxs(g.Fragment,{children:[g.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:s}),g.jsx(rr.div,{"data-radix-scroll-area-viewport":"",...i,asChild:o,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style},children:dm({asChild:o,children:r},d=>g.jsx("div",{"data-radix-scroll-area-content":"",ref:a.onContentChange,style:{minWidth:a.scrollbarXEnabled?"fit-content":void 0},children:d}))})]})});tu.displayName=eu;var et="ScrollAreaScrollbar",wi=l.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Fe(et,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:i}=o,a=e.orientation==="horizontal";return l.useEffect(()=>(a?s(!0):i(!0),()=>{a?s(!1):i(!1)}),[a,s,i]),o.type==="hover"?g.jsx(nm,{...r,ref:t,forceMount:n}):o.type==="scroll"?g.jsx(rm,{...r,ref:t,forceMount:n}):o.type==="auto"?g.jsx(nu,{...r,ref:t,forceMount:n}):o.type==="always"?g.jsx(bi,{...r,ref:t}):null});wi.displayName=et;var nm=l.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Fe(et,e.__scopeScrollArea),[s,i]=l.useState(!1);return l.useEffect(()=>{const a=o.scrollArea;let u=0;if(a){const c=()=>{window.clearTimeout(u),i(!0)},d=()=>{u=window.setTimeout(()=>i(!1),o.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",d),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",d)}}},[o.scrollArea,o.scrollHideDelay]),g.jsx(or,{present:n||s,children:g.jsx(nu,{"data-state":s?"visible":"hidden",...r,ref:t})})}),rm=l.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Fe(et,e.__scopeScrollArea),s=e.orientation==="horizontal",i=wo(()=>u("SCROLL_END"),100),[a,u]=em("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return l.useEffect(()=>{if(a==="idle"){const c=window.setTimeout(()=>u("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,o.scrollHideDelay,u]),l.useEffect(()=>{const c=o.viewport,d=s?"scrollLeft":"scrollTop";if(c){let f=c[d];const p=()=>{const h=c[d];f!==h&&(u("SCROLL"),i()),f=h};return c.addEventListener("scroll",p),()=>c.removeEventListener("scroll",p)}},[o.viewport,s,u,i]),g.jsx(or,{present:n||a!=="hidden",children:g.jsx(bi,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Dt(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:Dt(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),nu=l.forwardRef((e,t)=>{const n=Fe(et,e.__scopeScrollArea),{forceMount:r,...o}=e,[s,i]=l.useState(!1),a=e.orientation==="horizontal",u=wo(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;i(a?c:d)}},10);return on(n.viewport,u),on(n.content,u),g.jsx(or,{present:r||s,children:g.jsx(bi,{"data-state":s?"visible":"hidden",...o,ref:t})})}),bi=l.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,o=Fe(et,e.__scopeScrollArea),s=l.useRef(null),i=l.useRef(0),[a,u]=l.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=au(a.viewport,a.content),d={...r,sizes:a,onSizesChange:u,hasThumb:c>0&&c<1,onThumbChange:p=>s.current=p,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:p=>i.current=p};function f(p,h){return lm(p,i.current,a,h)}return n==="horizontal"?g.jsx(om,{...d,ref:t,onThumbPositionChange:()=>{if(o.viewport&&s.current){const p=o.viewport.scrollLeft,h=Sa(p,a,o.dir);s.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:p=>{o.viewport&&(o.viewport.scrollLeft=p)},onDragScroll:p=>{o.viewport&&(o.viewport.scrollLeft=f(p,o.dir))}}):n==="vertical"?g.jsx(sm,{...d,ref:t,onThumbPositionChange:()=>{if(o.viewport&&s.current){const p=o.viewport.scrollTop,h=Sa(p,a);s.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:p=>{o.viewport&&(o.viewport.scrollTop=p)},onDragScroll:p=>{o.viewport&&(o.viewport.scrollTop=f(p))}}):null}),om=l.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,s=Fe(et,e.__scopeScrollArea),[i,a]=l.useState(),u=l.useRef(null),c=Ft(t,u,s.onScrollbarXChange);return l.useEffect(()=>{u.current&&a(getComputedStyle(u.current))},[u]),g.jsx(ou,{"data-orientation":"horizontal",...o,ref:c,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":xo(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(s.viewport){const p=s.viewport.scrollLeft+d.deltaX;e.onWheelScroll(p),lu(p,f)&&d.preventDefault()}},onResize:()=>{u.current&&s.viewport&&i&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:Yr(i.paddingLeft),paddingEnd:Yr(i.paddingRight)}})}})}),sm=l.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,s=Fe(et,e.__scopeScrollArea),[i,a]=l.useState(),u=l.useRef(null),c=Ft(t,u,s.onScrollbarYChange);return l.useEffect(()=>{u.current&&a(getComputedStyle(u.current))},[u]),g.jsx(ou,{"data-orientation":"vertical",...o,ref:c,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":xo(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(s.viewport){const p=s.viewport.scrollTop+d.deltaY;e.onWheelScroll(p),lu(p,f)&&d.preventDefault()}},onResize:()=>{u.current&&s.viewport&&i&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:Yr(i.paddingTop),paddingEnd:Yr(i.paddingBottom)}})}})}),[im,ru]=Ql(et),ou=l.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:o,onThumbChange:s,onThumbPointerUp:i,onThumbPointerDown:a,onThumbPositionChange:u,onDragScroll:c,onWheelScroll:d,onResize:f,...p}=e,h=Fe(et,n),[m,x]=l.useState(null),y=Ft(t,D=>x(D)),w=l.useRef(null),E=l.useRef(""),v=h.viewport,b=r.content-r.viewport,N=_t(d),S=_t(u),R=wo(f,10);function O(D){if(w.current){const V=D.clientX-w.current.left,I=D.clientY-w.current.top;c({x:V,y:I})}}return l.useEffect(()=>{const D=V=>{const I=V.target;m?.contains(I)&&N(V,b)};return document.addEventListener("wheel",D,{passive:!1}),()=>document.removeEventListener("wheel",D,{passive:!1})},[v,m,b,N]),l.useEffect(S,[r,S]),on(m,R),on(h.content,R),g.jsx(im,{scope:n,scrollbar:m,hasThumb:o,onThumbChange:_t(s),onThumbPointerUp:_t(i),onThumbPositionChange:S,onThumbPointerDown:_t(a),children:g.jsx(rr.div,{...p,ref:y,style:{position:"absolute",...p.style},onPointerDown:Dt(e.onPointerDown,D=>{D.button===0&&(D.target.setPointerCapture(D.pointerId),w.current=m.getBoundingClientRect(),E.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",h.viewport&&(h.viewport.style.scrollBehavior="auto"),O(D))}),onPointerMove:Dt(e.onPointerMove,O),onPointerUp:Dt(e.onPointerUp,D=>{const V=D.target;V.hasPointerCapture(D.pointerId)&&V.releasePointerCapture(D.pointerId),document.body.style.webkitUserSelect=E.current,h.viewport&&(h.viewport.style.scrollBehavior=""),w.current=null})})})}),Xr="ScrollAreaThumb",su=l.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=ru(Xr,e.__scopeScrollArea);return g.jsx(or,{present:n||o.hasThumb,children:g.jsx(am,{ref:t,...r})})}),am=l.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...o}=e,s=Fe(Xr,n),i=ru(Xr,n),{onThumbPositionChange:a}=i,u=Ft(t,f=>i.onThumbChange(f)),c=l.useRef(),d=wo(()=>{c.current&&(c.current(),c.current=void 0)},100);return l.useEffect(()=>{const f=s.viewport;if(f){const p=()=>{if(d(),!c.current){const h=um(f,a);c.current=h,a()}};return a(),f.addEventListener("scroll",p),()=>f.removeEventListener("scroll",p)}},[s.viewport,d,a]),g.jsx(rr.div,{"data-state":i.hasThumb?"visible":"hidden",...o,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Dt(e.onPointerDownCapture,f=>{const h=f.target.getBoundingClientRect(),m=f.clientX-h.left,x=f.clientY-h.top;i.onThumbPointerDown({x:m,y:x})}),onPointerUp:Dt(e.onPointerUp,i.onThumbPointerUp)})});su.displayName=Xr;var Ci="ScrollAreaCorner",iu=l.forwardRef((e,t)=>{const n=Fe(Ci,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?g.jsx(cm,{...e,ref:t}):null});iu.displayName=Ci;var cm=l.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,o=Fe(Ci,n),[s,i]=l.useState(0),[a,u]=l.useState(0),c=!!(s&&a);return on(o.scrollbarX,()=>{const d=o.scrollbarX?.offsetHeight||0;o.onCornerHeightChange(d),u(d)}),on(o.scrollbarY,()=>{const d=o.scrollbarY?.offsetWidth||0;o.onCornerWidthChange(d),i(d)}),c?g.jsx(rr.div,{...r,ref:t,style:{width:s,height:a,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Yr(e){return e?parseInt(e,10):0}function au(e,t){const n=e/t;return isNaN(n)?0:n}function xo(e){const t=au(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function lm(e,t,n,r="ltr"){const o=xo(n),s=o/2,i=t||s,a=o-i,u=n.scrollbar.paddingStart+i,c=n.scrollbar.size-n.scrollbar.paddingEnd-a,d=n.content-n.viewport,f=r==="ltr"?[0,d]:[d*-1,0];return cu([u,c],f)(e)}function Sa(e,t,n="ltr"){const r=xo(t),o=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-o,i=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,i]:[i*-1,0],c=Jg(e,u);return cu([0,i],[0,a])(c)}function cu(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function lu(e,t){return e>0&&e<t}var um=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return(function o(){const s={left:e.scrollLeft,top:e.scrollTop},i=n.left!==s.left,a=n.top!==s.top;(i||a)&&t(),n=s,r=window.requestAnimationFrame(o)})(),()=>window.cancelAnimationFrame(r)};function wo(e,t){const n=_t(e),r=l.useRef(0);return l.useEffect(()=>()=>window.clearTimeout(r.current),[]),l.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function on(e,t){const n=_t(t);zs(()=>{let r=0;if(e){const o=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return o.observe(e),()=>{window.cancelAnimationFrame(r),o.unobserve(e)}}},[e,n])}function dm(e,t){const{asChild:n,children:r}=e;if(!n)return typeof t=="function"?t(r):t;const o=l.Children.only(r);return l.cloneElement(o,{children:typeof t=="function"?t(o.props.children):t})}var uu=Jl,fm=tu,pm=iu;const Si=le.forwardRef(({className:e,children:t,...n},r)=>g.jsxs(uu,{ref:r,className:me("relative overflow-hidden",e),...n,children:[g.jsx(fm,{className:"size-full rounded-[inherit]",children:t}),g.jsx(du,{}),g.jsx(pm,{})]}));Si.displayName=uu.displayName;const du=le.forwardRef(({className:e,orientation:t="vertical",...n},r)=>g.jsx(wi,{ref:r,orientation:t,className:me("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:g.jsx(su,{className:"relative z-20 flex-1 rounded-full bg-border"})}));du.displayName=wi.displayName;const hm=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],gm=Ne("arrow-right",hm);const mm=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],OS=Ne("check",mm);const ym=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],jS=Ne("chevron-down",ym);const vm=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],xm=Ne("chevron-left",vm);const wm=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],LS=Ne("chevron-up",wm);const bm=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],$S=Ne("copy",bm);const Cm=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],FS=Ne("ellipsis",Cm);const Sm=[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 13v-1h6v1",key:"1dh9dg"}],["path",{d:"M5 12v6",key:"150t9c"}],["path",{d:"M4 18h2",key:"1xrofg"}]],HS=Ne("file-type-2",Sm);const Em=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],zS=Ne("file",Em);const _m=[["path",{d:"M3 7V5c0-1.1.9-2 2-2h2",key:"adw53z"}],["path",{d:"M17 3h2c1.1 0 2 .9 2 2v2",key:"an4l38"}],["path",{d:"M21 17v2c0 1.1-.9 2-2 2h-2",key:"144t0e"}],["path",{d:"M7 21H5c-1.1 0-2-.9-2-2v-2",key:"rtnfgi"}],["rect",{width:"7",height:"5",x:"7",y:"7",rx:"1",key:"1eyiv7"}],["rect",{width:"7",height:"5",x:"10",y:"12",rx:"1",key:"1qlmkx"}]],VS=Ne("group",_m);const Nm=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],BS=Ne("info",Nm);const Rm=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],WS=Ne("layout-grid",Rm);const Tm=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],GS=Ne("search",Tm);const Dm=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],US=Ne("square-plus",Dm);const Am=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],XS=Ne("table",Am);const Mm=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],YS=Ne("trash-2",Mm);const Pm=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ZS=Ne("triangle-alert",Pm);const Im=[["path",{d:"M21 17v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2",key:"mrq65r"}],["path",{d:"M21 7V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2",key:"be3xqs"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M18.944 12.33a1 1 0 0 0 0-.66 7.5 7.5 0 0 0-13.888 0 1 1 0 0 0 0 .66 7.5 7.5 0 0 0 13.888 0",key:"11ak4c"}]],KS=Ne("view",Im);const km=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Om=Ne("x",km),qS=Gl,jm=Ul,QS=Zl,fu=le.forwardRef(({className:e,...t},n)=>g.jsx(yi,{ref:n,className:me("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));fu.displayName=yi.displayName;const Lm=le.forwardRef(({className:e,children:t,showClose:n,showBack:r,onBackClick:o,backButtonClassName:s,blurBackground:i,forceOverlay:a,...u},c)=>g.jsxs(jm,{children:[a?g.jsx("div",{className:me("fixed inset-0 z-50 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",{"bg-black/80":!i,"bg-black/30 backdrop-blur-sm":i}),"data-state":"open"}):null,g.jsx(fu,{className:me({"bg-black/30 backdrop-blur-sm":i})}),g.jsxs(vi,{ref:c,className:me("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...u,children:[t,r&&g.jsx("button",{onClick:()=>o?.(),className:me("absolute left-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",s),children:g.jsx(xm,{className:"size-4"})}),n&&g.jsxs(Zl,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[g.jsx(jr,{className:"size-4"}),g.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Lm.displayName=vi.displayName;const $m=({className:e,...t})=>g.jsx("div",{className:me("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});$m.displayName="DialogHeader";const Fm=({className:e,...t})=>g.jsx("div",{className:me("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Fm.displayName="DialogFooter";const Hm=le.forwardRef(({className:e,...t},n)=>g.jsx(Xl,{ref:n,className:me("text-lg font-semibold leading-none tracking-tight",e),...t}));Hm.displayName=Xl.displayName;const zm=le.forwardRef(({className:e,...t},n)=>g.jsx(Yl,{ref:n,className:me("text-sm text-muted-foreground",e),...t}));zm.displayName=Yl.displayName;const Vm=le.forwardRef(({className:e,...t},n)=>g.jsx(Si,{ref:n,className:me("flex flex-1 max-h-screen flex-col overflow-y-auto",e),...t}));Vm.displayName="DialogInternalContent";const Bm=l.createContext({openedTableInSidebar:void 0,selectedSidebarSection:"tables",openRelationshipFromSidebar:z,closeAllRelationshipsInSidebar:z,openDependencyFromSidebar:z,closeAllDependenciesInSidebar:z,openedRefInSidebar:void 0,openRefFromSidebar:z,closeAllRefsInSidebar:z,openedAreaInSidebar:void 0,openAreaFromSidebar:z,closeAllAreasInSidebar:z,openedNoteInSidebar:void 0,openNoteFromSidebar:z,closeAllNotesInSidebar:z,openedCustomTypeInSidebar:void 0,openCustomTypeFromSidebar:z,closeAllCustomTypesInSidebar:z,selectSidebarSection:z,openTableFromSidebar:z,closeAllTablesInSidebar:z,selectedVisualsTab:"areas",selectVisualsTab:z,isSidePanelShowed:!1,hideSidePanel:z,showSidePanel:z,toggleSidePanel:z}),Wm=l.createContext({redoStack:[],undoStack:[],addRedoAction:z,addUndoAction:z,resetRedoStack:z,resetUndoStack:z,hasRedo:!1,hasUndo:!1}),Gm=()=>l.useContext(Wm);var Um=(function(){function e(){var t=this;this.subscriptions=new Set,this.emit=function(n){var r,o;try{for(var s=Gn(t.subscriptions),i=s.next();!i.done;i=s.next()){var a=i.value;a(n)}}catch(u){r={error:u}}finally{try{i&&!i.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}},this.useSubscription=function(n){var r=l.useRef(void 0);r.current=n,l.useEffect(function(){function o(s){r.current&&r.current(s)}return t.subscriptions.add(o),function(){t.subscriptions.delete(o)}},[])}}return e})();function Xm(){var e=l.useRef(void 0);return e.current||(e.current=new Um),e.current}const Ym=l.createContext(void 0),Ea=()=>{const e=l.useContext(Ym);if(e===void 0)throw new Error("useDiff must be used within an DiffProvider");return e};var Ei=(e=>(e.enum="enum",e.composite="composite",e))(Ei||{});const Zm=gn({field:_e(),type:_e()}),Km=gn({id:_e(),schema:_e().or(Kt()).optional(),name:_e(),kind:ks(Ei),values:ft(_e()).or(Kt()).optional(),fields:ft(Zm).or(Kt()).optional(),order:je().or(Kt()).optional()}),JS={enum:"Enum",composite:"Composite"},eE=({children:e,diagram:t,readonly:n})=>{const{hasDiff:r}=Ea(),o=zp(),s=Xm(),{addUndoAction:i,resetRedoStack:a,resetUndoStack:u}=Gm(),[c,d]=l.useState(""),[f,p]=l.useState(""),[h,m]=l.useState(new Date),[x,y]=l.useState(new Date),[w,E]=l.useState(be.GENERIC),[v,b]=l.useState(),[N,S]=l.useState(t?.tables??[]),[R,O]=l.useState(t?.relationships??[]),[D,V]=l.useState(t?.dependencies??[]),[I,$]=l.useState(t?.areas??[]),[W,_]=l.useState(t?.customTypes??[]),[j,M]=l.useState(t?.notes??[]),{events:F}=Ea(),[L,k]=l.useState(),U=l.useCallback(C=>{const{tablesToAdd:P,fieldsToAdd:q,relationshipsToAdd:B,areasToAdd:Q}=C.data;S(te=>[...te,...P??[]].map(J=>{const se=q.get(J.id);return se?{...J,fields:[...J.fields,...se]}:J})),O(te=>[...te,...B??[]]),$(te=>[...te,...Q??[]])},[]);F.useSubscription(U);const Z=l.useMemo(()=>na[w],[w]),A=l.useMemo(()=>n??r??!1,[n,r]),G=l.useMemo(()=>Rp.includes(w)?[...new Set(N.map(C=>C.schema).filter(C=>!!C))].sort((C,P)=>C===Z?-1:P===Z?1:C.localeCompare(P)).map(C=>({id:Vc(C),name:C,tableCount:N.filter(P=>P.schema===C).length})):[],[N,Z,w]),T=l.useMemo(()=>A?Vp:o,[o,A]),Y=l.useMemo(()=>({id:c,name:f,createdAt:h,updatedAt:x,databaseType:w,databaseEdition:v,tables:N,relationships:R,dependencies:D,areas:I,customTypes:W,notes:j}),[c,f,w,v,N,R,D,I,W,j,h,x]),H=l.useCallback(async()=>{const C=new Date;S([]),O([]),V([]),$([]),_([]),M([]),y(C),a(),u(),await Promise.all([T.updateDiagram({id:c,attributes:{updatedAt:C}}),T.deleteDiagramTables(c),T.deleteDiagramRelationships(c),T.deleteDiagramDependencies(c),T.deleteDiagramAreas(c),T.deleteDiagramCustomTypes(c),T.deleteDiagramNotes(c)])},[T,c,a,u]),X=l.useCallback(async()=>{d(""),p(""),E(be.GENERIC),b(void 0),S([]),O([]),V([]),$([]),_([]),M([]),a(),u(),await Promise.all([T.deleteDiagramTables(c),T.deleteDiagramRelationships(c),T.deleteDiagram(c),T.deleteDiagramDependencies(c),T.deleteDiagramAreas(c),T.deleteDiagramCustomTypes(c),T.deleteDiagramNotes(c)])},[T,c,a,u]),K=l.useCallback(async()=>{const C=new Date;y(C),await T.updateDiagram({id:c,attributes:{updatedAt:C}})},[T,c,y]),ee=l.useCallback(async C=>{E(C),await T.updateDiagram({id:c,attributes:{databaseType:C}})},[T,c,E]),ie=l.useCallback(async C=>{b(C),await T.updateDiagram({id:c,attributes:{databaseEdition:C}})},[T,c,b]),ue=l.useCallback(async C=>{const P=c;d(C),await T.updateDiagram({id:P,attributes:{id:C}})},[T,c,d]),oe=l.useCallback(async(C,P={updateHistory:!0})=>{const q=f;p(C);const B=new Date;y(B),await T.updateDiagram({id:c,attributes:{name:C,updatedAt:B}}),P.updateHistory&&(i({action:"updateDiagramName",redoData:{name:C},undoData:{name:q}}),a())},[T,c,p,i,f,a]),ae=l.useCallback(async(C,P={updateHistory:!0})=>{S(B=>[...B,...C]);const q=new Date;y(q),await Promise.all([T.updateDiagram({id:c,attributes:{updatedAt:q}}),...C.map(B=>T.addTable({diagramId:c,table:B}))]),s.emit({action:"add_tables",data:{tables:C}}),P.updateHistory&&(i({action:"addTables",redoData:{tables:C},undoData:{tableIds:C.map(B=>B.id)}}),a())},[T,c,S,i,a,s]),ge=l.useCallback(async(C,P={updateHistory:!0})=>ae([C],P),[ae]),ve=l.useCallback(async C=>{const P=C?.isView??!1,q=P?N.filter(Q=>Q.isView).length+1:N.filter(Q=>!Q.isView).length+1,B={id:Ve(),name:P?`view_${q}`:`table_${q}`,x:0,y:0,fields:[{id:Ve(),name:"id",type:ra(w),unique:!0,nullable:!1,primaryKey:!0,createdAt:Date.now()}],indexes:[],color:C?.isView?Lp:$p,createdAt:Date.now(),isView:!1,order:N.length,...C,schema:C?.schema??na[w]};return B.indexes=ss({table:B}),await ge(B),B},[ge,N,w]),re=l.useCallback(C=>N.find(P=>P.id===C)??null,[N]),Ce=l.useCallback(async(C,P)=>{const q=C.map(J=>re(J)).filter(J=>!!J),B=R.filter(J=>C.includes(J.sourceTableId)||C.includes(J.targetTableId)),Q=D.filter(J=>C.includes(J.tableId)||C.includes(J.dependentTableId));O(J=>J.filter(se=>!B.some(ce=>ce.id===se.id))),V(J=>J.filter(se=>!Q.some(ce=>ce.id===se.id))),S(J=>J.filter(se=>!C.includes(se.id))),s.emit({action:"remove_tables",data:{tableIds:C}});const te=new Date;y(te),await Promise.all([T.updateDiagram({id:c,attributes:{updatedAt:te}}),...B.map(J=>T.deleteRelationship({diagramId:c,id:J.id})),...Q.map(J=>T.deleteDependency({diagramId:c,id:J.id})),...C.map(J=>T.deleteTable({diagramId:c,id:J}))]),q.length>0&&P?.updateHistory&&(i({action:"removeTables",redoData:{tableIds:C},undoData:{tables:q,relationships:B,dependencies:Q}}),a())},[T,c,S,i,a,re,R,s,D]),Ze=l.useCallback(async(C,P={updateHistory:!0})=>Ce([C],P),[Ce]),He=l.useCallback(async(C,P,q={updateHistory:!0})=>{const B=re(C);S(te=>te.map(J=>J.id===C?{...J,...P}:J)),s.emit({action:"update_table",data:{id:C,table:P}});const Q=new Date;y(Q),await Promise.all([T.updateDiagram({id:c,attributes:{updatedAt:Q}}),T.updateTable({id:C,attributes:P})]),B&&q.updateHistory&&(i({action:"updateTable",redoData:{tableId:C,table:P},undoData:{tableId:C,table:B}}),a())},[T,S,i,a,re,c,s]),nt=l.useCallback(async(C,P={updateHistory:!0,forceOverride:!1})=>{const q=de=>{const Ee=C(de);return P.forceOverride?Ee:de.map(Oe=>{const Bt=Ee.find(br=>br.id===Oe.id);return Bt?{...Oe,...Bt}:Oe}).filter(Oe=>Ee.some(Bt=>Bt.id===Oe.id))},B=Tp(N),Q=q(N),te=B.filter(de=>!Q.some(Ee=>Ee.id===de.id)),J=R.filter(de=>te.some(Ee=>Ee.id===de.sourceTableId||Ee.id===de.targetTableId)),se=D.filter(de=>te.some(Ee=>Ee.id===de.tableId||Ee.id===de.dependentTableId));O(de=>de.filter(Ee=>!J.some(Oe=>Oe.id===Ee.id))),V(de=>de.filter(Ee=>!se.some(Oe=>Oe.id===Ee.id))),S(q),s.emit({action:"remove_tables",data:{tableIds:te.map(de=>de.id)}});const ce=[];for(const de of Q)ce.push(T.putTable({diagramId:c,table:de}));for(const de of te)ce.push(T.deleteTable({diagramId:c,id:de.id}));for(const de of J)ce.push(T.deleteRelationship({diagramId:c,id:de.id}));for(const de of se)ce.push(T.deleteDependency({diagramId:c,id:de.id}));const he=new Date;y(he),ce.push(T.updateDiagram({id:c,attributes:{updatedAt:he}})),await Promise.all(ce),P.updateHistory&&(i({action:"updateTablesState",redoData:{tables:Q},undoData:{tables:B,relationships:J,dependencies:se}}),a())},[T,N,S,c,i,a,R,s,D]),ze=l.useCallback((C,P)=>re(C)?.fields.find(B=>B.id===P)??null,[re]),xt=l.useCallback(async(C,P,q,B={updateHistory:!0})=>{const Q=ze(C,P),te=ce=>{const he={...ce,fields:ce.fields.map(de=>de.id===P?{...de,...q}:de)};return he.indexes=ss({table:he}),he};S(ce=>ce.map(he=>he.id===C?te(he):he));const J=await T.getTable({diagramId:c,id:C});if(!J)return;const se=new Date;y(se),await Promise.all([T.updateDiagram({id:c,attributes:{updatedAt:se}}),T.updateTable({id:C,attributes:{...te(J)}})]),Q&&B.updateHistory&&(i({action:"updateField",redoData:{tableId:C,fieldId:P,field:{...Q,...q}},undoData:{tableId:C,fieldId:P,field:Q}}),a())},[T,c,S,i,a,ze]),wt=l.useCallback(async(C,P,q={updateHistory:!0})=>{const B=ce=>{const he={...ce,fields:ce.fields.filter(de=>de.id!==P)};return he.indexes=ss({table:he}),he},Q=re(C)?.fields??[],te=ze(C,P);S(ce=>ce.map(he=>he.id===C?B(he):he)),s.emit({action:"remove_field",data:{tableId:C,fieldId:P,fields:Q.filter(ce=>ce.id!==P)}});const J=await T.getTable({diagramId:c,id:C});if(!J)return;const se=new Date;y(se),await Promise.all([T.updateDiagram({id:c,attributes:{updatedAt:se}}),T.updateTable({id:C,attributes:{...B(J)}})]),te&&q.updateHistory&&(i({action:"removeField",redoData:{tableId:C,fieldId:P},undoData:{tableId:C,field:te}}),a())},[T,c,S,i,a,ze,re,s]),bt=l.useCallback(async(C,P,q={updateHistory:!0})=>{const B=re(C)?.fields??[];if(S(J=>J.map(se=>se.id===C?(T.updateTable({id:C,attributes:{...se,fields:[...se.fields,P]}}),{...se,fields:[...se.fields,P]}):se)),s.emit({action:"add_field",data:{tableId:C,field:P,fields:[...B,P]}}),!await T.getTable({diagramId:c,id:C}))return;const te=new Date;y(te),await Promise.all([T.updateDiagram({id:c,attributes:{updatedAt:te}})]),q.updateHistory&&(i({action:"addField",redoData:{tableId:C,field:P},undoData:{tableId:C,fieldId:P.id}}),a())},[T,c,S,i,a,s,re]),zt=l.useCallback(async C=>{const P=re(C),q={id:Ve(),name:`field_${(P?.fields?.length??0)+1}`,type:ra(w),unique:!1,nullable:!0,primaryKey:!1,createdAt:Date.now()};return await bt(C,q),q},[bt,re,w]),ke=l.useCallback((C,P)=>re(C)?.indexes.find(B=>B.id===P)??null,[re]),rt=l.useCallback(async(C,P,q={updateHistory:!0})=>{S(te=>te.map(J=>J.id===C?{...J,indexes:[...J.indexes,P]}:J));const B=await T.getTable({diagramId:c,id:C});if(!B)return;const Q=new Date;y(Q),await Promise.all([T.updateDiagram({id:c,attributes:{updatedAt:Q}}),T.updateTable({id:C,attributes:{...B,indexes:[...B.indexes,P]}})]),q.updateHistory&&(i({action:"addIndex",redoData:{tableId:C,index:P},undoData:{tableId:C,indexId:P.id}}),a())},[T,c,S,i,a]),yr=l.useCallback(async(C,P,q={updateHistory:!0})=>{const B=ke(C,P);S(J=>J.map(se=>se.id===C?{...se,indexes:se.indexes.filter(ce=>ce.id!==P)}:se));const Q=await T.getTable({diagramId:c,id:C});if(!Q)return;const te=new Date;y(te),await Promise.all([T.updateDiagram({id:c,attributes:{updatedAt:te}}),T.updateTable({id:C,attributes:{...Q,indexes:Q.indexes.filter(J=>J.id!==P)}})]),B&&q.updateHistory&&(i({action:"removeIndex",redoData:{indexId:P,tableId:C},undoData:{tableId:C,index:B}}),a())},[T,c,S,i,a,ke]),$o=l.useCallback(async C=>{const P=re(C),q={id:Ve(),name:`index_${(P?.indexes?.length??0)+1}`,fieldIds:[],unique:!1,createdAt:Date.now()};return await rt(C,q),q},[rt,re]),mn=l.useCallback(async(C,P,q,B={updateHistory:!0})=>{const Q=ke(C,P);S(se=>se.map(ce=>ce.id===C?{...ce,indexes:ce.indexes.map(he=>he.id===P?{...he,...q}:he)}:ce));const te=await T.getTable({diagramId:c,id:C});if(!te)return;const J=new Date;y(J),await Promise.all([T.updateDiagram({id:c,attributes:{updatedAt:J}}),T.updateTable({id:C,attributes:{...te,indexes:te.indexes.map(se=>se.id===P?{...se,...q}:se)}})]),Q&&B.updateHistory&&(i({action:"updateIndex",redoData:{tableId:C,indexId:P,index:q},undoData:{tableId:C,indexId:P,index:Q}}),a())},[T,c,S,i,a,ke]),yn=l.useCallback(async(C,P,q={updateHistory:!0})=>{S(te=>te.map(J=>J.id===C?{...J,checkConstraints:[...J.checkConstraints??[],P]}:J));const B=await T.getTable({diagramId:c,id:C});if(!B)return;const Q=new Date;y(Q),await Promise.all([T.updateDiagram({id:c,attributes:{updatedAt:Q}}),T.updateTable({id:C,attributes:{...B,checkConstraints:[...B.checkConstraints??[],P]}})]),q.updateHistory&&(i({action:"addCheckConstraint",redoData:{tableId:C,constraint:P},undoData:{tableId:C,constraintId:P.id}}),a())},[T,c,S,i,a]),Fo=l.useCallback(async C=>{const P={id:Ve(),expression:"",createdAt:Date.now()};return await yn(C,P),P},[yn]),Ho=l.useCallback(async(C,P,q={updateHistory:!0})=>{const Q=re(C)?.checkConstraints?.find(se=>se.id===P);S(se=>se.map(ce=>ce.id===C?{...ce,checkConstraints:(ce.checkConstraints??[]).filter(he=>he.id!==P)}:ce));const te=await T.getTable({diagramId:c,id:C});if(!te)return;const J=new Date;y(J),await Promise.all([T.updateDiagram({id:c,attributes:{updatedAt:J}}),T.updateTable({id:C,attributes:{...te,checkConstraints:(te.checkConstraints??[]).filter(se=>se.id!==P)}})]),Q&&q.updateHistory&&(i({action:"removeCheckConstraint",redoData:{tableId:C,constraintId:P},undoData:{tableId:C,constraint:Q}}),a())},[T,c,S,i,a,re]),zo=l.useCallback(async(C,P,q,B={updateHistory:!0})=>{const te=re(C)?.checkConstraints?.find(ce=>ce.id===P);S(ce=>ce.map(he=>he.id===C?{...he,checkConstraints:(he.checkConstraints??[]).map(de=>de.id===P?{...de,...q}:de)}:he));const J=await T.getTable({diagramId:c,id:C});if(!J)return;const se=new Date;y(se),await Promise.all([T.updateDiagram({id:c,attributes:{updatedAt:se}}),T.updateTable({id:C,attributes:{...J,checkConstraints:(J.checkConstraints??[]).map(ce=>ce.id===P?{...ce,...q}:ce)}})]),te&&B.updateHistory&&(i({action:"updateCheckConstraint",redoData:{tableId:C,constraintId:P,constraint:q},undoData:{tableId:C,constraintId:P,constraint:te}}),a())},[T,c,S,i,a,re]),vn=l.useCallback(async(C,P={updateHistory:!0})=>{O(B=>[...B,...C]);const q=new Date;y(q),await Promise.all([...C.map(B=>T.addRelationship({diagramId:c,relationship:B})),T.updateDiagram({id:c,attributes:{updatedAt:q}})]),P.updateHistory&&(i({action:"addRelationships",redoData:{relationships:C},undoData:{relationshipIds:C.map(B=>B.id)}}),a())},[T,c,O,i,a]),xn=l.useCallback(async(C,P={updateHistory:!0})=>vn([C],P),[vn]),Vo=l.useCallback(async({sourceTableId:C,targetTableId:P,sourceFieldId:q,targetFieldId:B})=>{const Q=re(C),te=Q?.name??"",se=Q?.fields.find(Ee=>Ee.id===q)?.name??"",he=re(P)?.schema,de={id:Ve(),name:`${te}_${se}_fk`,sourceSchema:Q?.schema,sourceTableId:C,targetSchema:he,targetTableId:P,sourceFieldId:q,targetFieldId:B,sourceCardinality:"one",targetCardinality:"one",createdAt:Date.now()};return await xn(de),de},[xn,re]),wn=l.useCallback(C=>R.find(P=>P.id===C)??null,[R]),bn=l.useCallback(async(C,P={updateHistory:!0})=>{const q=[...R.filter(Q=>C.includes(Q.id))];O(Q=>Q.filter(te=>!C.includes(te.id)));const B=new Date;y(B),await Promise.all([...C.map(Q=>T.deleteRelationship({diagramId:c,id:Q})),T.updateDiagram({id:c,attributes:{updatedAt:B}})]),q.length>0&&P.updateHistory&&(i({action:"removeRelationships",redoData:{relationshipsIds:C},undoData:{relationships:q}}),a())},[T,c,O,R,i,a]),Bo=l.useCallback(async(C,P={updateHistory:!0})=>bn([C],P),[bn]),Wo=l.useCallback(async(C,P,q={updateHistory:!0})=>{const B=wn(C);O(te=>te.map(J=>J.id===C?{...J,...P}:J));const Q=new Date;y(Q),await Promise.all([T.updateDiagram({id:c,attributes:{updatedAt:Q}}),T.updateRelationship({id:C,attributes:P})]),B&&q.updateHistory&&(i({action:"updateRelationship",redoData:{relationshipId:C,relationship:P},undoData:{relationshipId:C,relationship:B}}),a())},[T,O,i,wn,a,c]),Cn=l.useCallback(async(C,P={updateHistory:!0})=>{V(B=>[...B,...C]);const q=new Date;y(q),await Promise.all([...C.map(B=>T.addDependency({diagramId:c,dependency:B})),T.updateDiagram({id:c,attributes:{updatedAt:q}})]),P.updateHistory&&(i({action:"addDependencies",redoData:{dependencies:C},undoData:{dependenciesIds:C.map(B=>B.id)}}),a())},[T,c,V,i,a]),Sn=l.useCallback(async(C,P={updateHistory:!0})=>Cn([C],P),[Cn]),Go=l.useCallback(async({tableId:C,dependentTableId:P})=>{const q=re(C),B=re(P),Q={id:Ve(),tableId:C,dependentTableId:P,dependentSchema:B?.schema,schema:q?.schema,createdAt:Date.now()};return await Sn(Q),Q},[Sn,re]),En=l.useCallback(C=>D.find(P=>P.id===C)??null,[D]),_n=l.useCallback(async(C,P={updateHistory:!0})=>{const q=[...D.filter(Q=>C.includes(Q.id))];V(Q=>Q.filter(te=>!C.includes(te.id)));const B=new Date;y(B),await Promise.all([...C.map(Q=>T.deleteDependency({diagramId:c,id:Q})),T.updateDiagram({id:c,attributes:{updatedAt:B}})]),q.length>0&&P.updateHistory&&(i({action:"removeDependencies",redoData:{dependenciesIds:C},undoData:{dependencies:q}}),a())},[T,c,V,i,a,D]),Uo=l.useCallback(async(C,P={updateHistory:!0})=>_n([C],P),[_n]),Xo=l.useCallback(async(C,P,q={updateHistory:!0})=>{const B=En(C);V(te=>te.map(J=>J.id===C?{...J,...P}:J));const Q=new Date;y(Q),await Promise.all([T.updateDiagram({id:c,attributes:{updatedAt:Q}}),T.updateDependency({id:C,attributes:P})]),B&&q.updateHistory&&(i({action:"updateDependency",redoData:{dependencyId:C,dependency:P},undoData:{dependencyId:C,dependency:B}}),a())},[T,c,V,i,a,En]),Nn=l.useCallback(async(C,P={updateHistory:!0})=>{$(B=>[...B,...C]);const q=new Date;y(q),await Promise.all([...C.map(B=>T.addArea({diagramId:c,area:B})),T.updateDiagram({id:c,attributes:{updatedAt:q}})]),P.updateHistory&&(i({action:"addAreas",redoData:{areas:C},undoData:{areaIds:C.map(B=>B.id)}}),a())},[T,c,$,i,a]),Rn=l.useCallback(async(C,P={updateHistory:!0})=>Nn([C],P),[Nn]),Yo=l.useCallback(async C=>{const P={id:Ve(),name:`Area ${I.length+1}`,x:0,y:0,width:300,height:200,color:Fp,...C};return await Rn(P),P},[I,Rn]),Tn=l.useCallback(C=>I.find(P=>P.id===C)??null,[I]),Dn=l.useCallback(async(C,P={updateHistory:!0})=>{const q=[...I.filter(Q=>C.includes(Q.id))];$(Q=>Q.filter(te=>!C.includes(te.id)));const B=new Date;y(B),await Promise.all([...C.map(Q=>T.deleteArea({diagramId:c,id:Q})),T.updateDiagram({id:c,attributes:{updatedAt:B}})]),q.length>0&&P.updateHistory&&(i({action:"removeAreas",redoData:{areaIds:C},undoData:{areas:q}}),a())},[T,c,$,I,i,a]),Zo=l.useCallback(async(C,P={updateHistory:!0})=>Dn([C],P),[Dn]),Ko=l.useCallback(async(C,P,q={updateHistory:!0})=>{const B=Tn(C);$(te=>te.map(J=>J.id===C?{...J,...P}:J));const Q=new Date;y(Q),await Promise.all([T.updateDiagram({id:c,attributes:{updatedAt:Q}}),T.updateArea({id:C,attributes:P})]),B&&q.updateHistory&&(i({action:"updateArea",redoData:{areaId:C,area:P},undoData:{areaId:C,area:B}}),a())},[T,c,$,Tn,i,a]),An=l.useCallback(async(C,P={updateHistory:!0})=>{M(B=>[...B,...C]);const q=new Date;y(q),await Promise.all([...C.map(B=>T.addNote({diagramId:c,note:B})),T.updateDiagram({id:c,attributes:{updatedAt:q}})]),P.updateHistory&&(i({action:"addNotes",redoData:{notes:C},undoData:{noteIds:C.map(B=>B.id)}}),a())},[T,c,M,i,a]),Mn=l.useCallback(async(C,P={updateHistory:!0})=>An([C],P),[An]),qo=l.useCallback(async C=>{const P={id:Ve(),content:"",x:0,y:0,width:200,height:150,color:"#ffe374",...C};return await Mn(P),P},[Mn]),Pn=l.useCallback(C=>j.find(P=>P.id===C)??null,[j]),In=l.useCallback(async(C,P={updateHistory:!0})=>{const q=[...j.filter(Q=>C.includes(Q.id))];M(Q=>Q.filter(te=>!C.includes(te.id)));const B=new Date;y(B),await Promise.all([...C.map(Q=>T.deleteNote({diagramId:c,id:Q})),T.updateDiagram({id:c,attributes:{updatedAt:B}})]),q.length>0&&P.updateHistory&&(i({action:"removeNotes",redoData:{noteIds:C},undoData:{notes:q}}),a())},[T,c,M,j,i,a]),vr=l.useCallback(async(C,P={updateHistory:!0})=>In([C],P),[In]),xr=l.useCallback(async(C,P,q={updateHistory:!0})=>{const B=Pn(C);M(te=>te.map(J=>J.id===C?{...J,...P}:J));const Q=new Date;y(Q),await Promise.all([T.updateDiagram({id:c,attributes:{updatedAt:Q}}),T.updateNote({id:C,attributes:P})]),B&&q.updateHistory&&(i({action:"updateNote",redoData:{noteId:C,note:P},undoData:{noteId:C,note:B}}),a())},[T,c,M,Pn,i,a]),wr=l.useCallback(C=>k(C),[k]),Qo=l.useMemo(()=>L?W.find(C=>C.id===L):void 0,[L,W]),Ct=l.useCallback(C=>{d(C.id),p(C.name),E(C.databaseType),b(C.databaseEdition),S(C.tables??[]),O(C.relationships??[]),V(C.dependencies??[]),$(C.areas??[]),_(C.customTypes??[]),m(C.createdAt),y(C.updatedAt),k(void 0),M(C.notes??[]),s.emit({action:"load_diagram",data:{diagram:C}}),a(),u()},[d,p,E,b,S,O,V,$,_,m,y,k,s,M,a,u]),Jo=l.useCallback(async(C,P)=>{const q=P?.forceUpdateStorage?o:T;await q.deleteDiagram(C.id),await q.addDiagram({diagram:C}),Ct(C)},[T,o,Ct]),es=l.useCallback(async C=>{const P=await o.getDiagram(C,{includeRelationships:!0,includeTables:!0,includeDependencies:!0,includeAreas:!0,includeCustomTypes:!0,includeNotes:!0});return P&&Ct(P),P},[o,Ct]),St=l.useCallback(C=>W.find(P=>P.id===C)??null,[W]),kn=l.useCallback(async(C,P={updateHistory:!0})=>{_(B=>[...B,...C]);const q=new Date;y(q),await Promise.all([T.updateDiagram({id:c,attributes:{updatedAt:q}}),...C.map(B=>T.addCustomType({diagramId:c,customType:B}))]),P.updateHistory&&(i({action:"addCustomTypes",redoData:{customTypes:C},undoData:{customTypeIds:C.map(B=>B.id)}}),a())},[T,c,_,i,a]),Vt=l.useCallback(async(C,P={updateHistory:!0})=>kn([C],P),[kn]),ts=l.useCallback(async C=>{const P={id:Ve(),name:`type_${W.length+1}`,kind:Ei.enum,values:[],fields:[],...C};return await Vt(P),P},[Vt,W]),On=l.useCallback(async(C,P={updateHistory:!0})=>{const q=C.map(Q=>St(Q)).filter(Boolean);_(Q=>Q.filter(te=>!C.includes(te.id)));const B=new Date;y(B),await Promise.all([T.updateDiagram({id:c,attributes:{updatedAt:B}}),...C.map(Q=>T.deleteCustomType({diagramId:c,id:Q}))]),q.length>0&&P.updateHistory&&(i({action:"removeCustomTypes",redoData:{customTypeIds:C},undoData:{customTypes:q}}),a())},[T,c,_,i,a,St]),ns=l.useCallback(async(C,P={updateHistory:!0})=>On([C],P),[On]),rs=l.useCallback(async(C,P,q={updateHistory:!0})=>{const B=St(C);_(te=>te.map(J=>J.id===C?{...J,...P}:J));const Q=new Date;y(Q),await Promise.all([T.updateDiagram({id:c,attributes:{updatedAt:Q}}),T.updateCustomType({id:C,attributes:P})]),B&&q.updateHistory&&(i({action:"updateCustomType",redoData:{customTypeId:C,customType:P},undoData:{customTypeId:C,customType:B}}),a())},[T,_,i,a,St,c]);return g.jsx(xl.Provider,{value:{diagramId:c,diagramName:f,databaseType:w,tables:N,relationships:R,dependencies:D,areas:I,notes:j,currentDiagram:Y,schemas:G,events:s,readonly:A,updateDiagramData:Jo,updateDiagramId:ue,updateDiagramName:oe,loadDiagram:es,loadDiagramFromData:Ct,updateDatabaseType:ee,updateDatabaseEdition:ie,clearDiagramData:H,deleteDiagram:X,updateDiagramUpdatedAt:K,createTable:ve,addTable:ge,addTables:ae,getTable:re,removeTable:Ze,removeTables:Ce,updateTable:He,updateTablesState:nt,updateField:xt,removeField:wt,createField:zt,addField:bt,addIndex:rt,createIndex:$o,removeIndex:yr,getField:ze,getIndex:ke,updateIndex:mn,createCheckConstraint:Fo,addCheckConstraint:yn,removeCheckConstraint:Ho,updateCheckConstraint:zo,addRelationship:xn,addRelationships:vn,createRelationship:Vo,getRelationship:wn,removeRelationship:Bo,removeRelationships:bn,updateRelationship:Wo,addDependency:Sn,addDependencies:Cn,createDependency:Go,getDependency:En,removeDependency:Uo,removeDependencies:_n,updateDependency:Xo,createArea:Yo,addArea:Rn,addAreas:Nn,getArea:Tn,removeArea:Zo,removeAreas:Dn,updateArea:Ko,customTypes:W,createCustomType:ts,addCustomType:Vt,addCustomTypes:kn,getCustomType:St,removeCustomType:ns,removeCustomTypes:On,updateCustomType:rs,highlightCustomTypeId:wr,highlightedCustomType:Qo,createNote:qo,addNote:Mn,addNotes:An,getNote:Pn,removeNote:vr,removeNotes:In,updateNote:xr},children:e})},qm=l.createContext({undo:z,redo:z,hasUndo:!1,hasRedo:!1});function Se(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Se(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Qm={value:()=>{}};function bo(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new zr(n)}function zr(e){this._=e}function Jm(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}zr.prototype=bo.prototype={constructor:zr,on:function(e,t){var n=this._,r=Jm(e+"",n),o,s=-1,i=r.length;if(arguments.length<2){for(;++s<i;)if((o=(e=r[s]).type)&&(o=e0(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(o=(e=r[s]).type)n[o]=_a(n[o],e.name,t);else if(t==null)for(o in n)n[o]=_a(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new zr(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,s;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,o=s.length;r<o;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,s=r.length;o<s;++o)r[o].value.apply(t,n)}};function e0(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function _a(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=Qm,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Vs="http://www.w3.org/1999/xhtml";const Na={svg:"http://www.w3.org/2000/svg",xhtml:Vs,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Co(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Na.hasOwnProperty(t)?{space:Na[t],local:e}:e}function t0(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Vs&&t.documentElement.namespaceURI===Vs?t.createElement(e):t.createElementNS(n,e)}}function n0(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function pu(e){var t=Co(e);return(t.local?n0:t0)(t)}function r0(){}function _i(e){return e==null?r0:function(){return this.querySelector(e)}}function o0(e){typeof e!="function"&&(e=_i(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,a=r[o]=new Array(i),u,c,d=0;d<i;++d)(u=s[d])&&(c=e.call(u,u.__data__,d,s))&&("__data__"in u&&(c.__data__=u.__data__),a[d]=c);return new Pe(r,this._parents)}function s0(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function i0(){return[]}function hu(e){return e==null?i0:function(){return this.querySelectorAll(e)}}function a0(e){return function(){return s0(e.apply(this,arguments))}}function c0(e){typeof e=="function"?e=a0(e):e=hu(e);for(var t=this._groups,n=t.length,r=[],o=[],s=0;s<n;++s)for(var i=t[s],a=i.length,u,c=0;c<a;++c)(u=i[c])&&(r.push(e.call(u,u.__data__,c,i)),o.push(u));return new Pe(r,o)}function gu(e){return function(){return this.matches(e)}}function mu(e){return function(t){return t.matches(e)}}var l0=Array.prototype.find;function u0(e){return function(){return l0.call(this.children,e)}}function d0(){return this.firstElementChild}function f0(e){return this.select(e==null?d0:u0(typeof e=="function"?e:mu(e)))}var p0=Array.prototype.filter;function h0(){return Array.from(this.children)}function g0(e){return function(){return p0.call(this.children,e)}}function m0(e){return this.selectAll(e==null?h0:g0(typeof e=="function"?e:mu(e)))}function y0(e){typeof e!="function"&&(e=gu(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,a=r[o]=[],u,c=0;c<i;++c)(u=s[c])&&e.call(u,u.__data__,c,s)&&a.push(u);return new Pe(r,this._parents)}function yu(e){return new Array(e.length)}function v0(){return new Pe(this._enter||this._groups.map(yu),this._parents)}function Zr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Zr.prototype={constructor:Zr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function x0(e){return function(){return e}}function w0(e,t,n,r,o,s){for(var i=0,a,u=t.length,c=s.length;i<c;++i)(a=t[i])?(a.__data__=s[i],r[i]=a):n[i]=new Zr(e,s[i]);for(;i<u;++i)(a=t[i])&&(o[i]=a)}function b0(e,t,n,r,o,s,i){var a,u,c=new Map,d=t.length,f=s.length,p=new Array(d),h;for(a=0;a<d;++a)(u=t[a])&&(p[a]=h=i.call(u,u.__data__,a,t)+"",c.has(h)?o[a]=u:c.set(h,u));for(a=0;a<f;++a)h=i.call(e,s[a],a,s)+"",(u=c.get(h))?(r[a]=u,u.__data__=s[a],c.delete(h)):n[a]=new Zr(e,s[a]);for(a=0;a<d;++a)(u=t[a])&&c.get(p[a])===u&&(o[a]=u)}function C0(e){return e.__data__}function S0(e,t){if(!arguments.length)return Array.from(this,C0);var n=t?b0:w0,r=this._parents,o=this._groups;typeof e!="function"&&(e=x0(e));for(var s=o.length,i=new Array(s),a=new Array(s),u=new Array(s),c=0;c<s;++c){var d=r[c],f=o[c],p=f.length,h=E0(e.call(d,d&&d.__data__,c,r)),m=h.length,x=a[c]=new Array(m),y=i[c]=new Array(m),w=u[c]=new Array(p);n(d,f,x,y,w,h,t);for(var E=0,v=0,b,N;E<m;++E)if(b=x[E]){for(E>=v&&(v=E+1);!(N=y[v])&&++v<m;);b._next=N||null}}return i=new Pe(i,r),i._enter=a,i._exit=u,i}function E0(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function _0(){return new Pe(this._exit||this._groups.map(yu),this._parents)}function N0(e,t,n){var r=this.enter(),o=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?s.remove():n(s),r&&o?r.merge(o).order():o}function R0(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,s=r.length,i=Math.min(o,s),a=new Array(o),u=0;u<i;++u)for(var c=n[u],d=r[u],f=c.length,p=a[u]=new Array(f),h,m=0;m<f;++m)(h=c[m]||d[m])&&(p[m]=h);for(;u<o;++u)a[u]=n[u];return new Pe(a,this._parents)}function T0(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,s=r[o],i;--o>=0;)(i=r[o])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function D0(e){e||(e=A0);function t(f,p){return f&&p?e(f.__data__,p.__data__):!f-!p}for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s){for(var i=n[s],a=i.length,u=o[s]=new Array(a),c,d=0;d<a;++d)(c=i[d])&&(u[d]=c);u.sort(t)}return new Pe(o,this._parents).order()}function A0(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function M0(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function P0(){return Array.from(this)}function I0(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,s=r.length;o<s;++o){var i=r[o];if(i)return i}return null}function k0(){let e=0;for(const t of this)++e;return e}function O0(){return!this.node()}function j0(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],s=0,i=o.length,a;s<i;++s)(a=o[s])&&e.call(a,a.__data__,s,o);return this}function L0(e){return function(){this.removeAttribute(e)}}function $0(e){return function(){this.removeAttributeNS(e.space,e.local)}}function F0(e,t){return function(){this.setAttribute(e,t)}}function H0(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function z0(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function V0(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function B0(e,t){var n=Co(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?$0:L0:typeof t=="function"?n.local?V0:z0:n.local?H0:F0)(n,t))}function vu(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function W0(e){return function(){this.style.removeProperty(e)}}function G0(e,t,n){return function(){this.style.setProperty(e,t,n)}}function U0(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function X0(e,t,n){return arguments.length>1?this.each((t==null?W0:typeof t=="function"?U0:G0)(e,t,n??"")):sn(this.node(),e)}function sn(e,t){return e.style.getPropertyValue(t)||vu(e).getComputedStyle(e,null).getPropertyValue(t)}function Y0(e){return function(){delete this[e]}}function Z0(e,t){return function(){this[e]=t}}function K0(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function q0(e,t){return arguments.length>1?this.each((t==null?Y0:typeof t=="function"?K0:Z0)(e,t)):this.node()[e]}function xu(e){return e.trim().split(/^|\s+/)}function Ni(e){return e.classList||new wu(e)}function wu(e){this._node=e,this._names=xu(e.getAttribute("class")||"")}wu.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function bu(e,t){for(var n=Ni(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function Cu(e,t){for(var n=Ni(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function Q0(e){return function(){bu(this,e)}}function J0(e){return function(){Cu(this,e)}}function e1(e,t){return function(){(t.apply(this,arguments)?bu:Cu)(this,e)}}function t1(e,t){var n=xu(e+"");if(arguments.length<2){for(var r=Ni(this.node()),o=-1,s=n.length;++o<s;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?e1:t?Q0:J0)(n,t))}function n1(){this.textContent=""}function r1(e){return function(){this.textContent=e}}function o1(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function s1(e){return arguments.length?this.each(e==null?n1:(typeof e=="function"?o1:r1)(e)):this.node().textContent}function i1(){this.innerHTML=""}function a1(e){return function(){this.innerHTML=e}}function c1(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function l1(e){return arguments.length?this.each(e==null?i1:(typeof e=="function"?c1:a1)(e)):this.node().innerHTML}function u1(){this.nextSibling&&this.parentNode.appendChild(this)}function d1(){return this.each(u1)}function f1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function p1(){return this.each(f1)}function h1(e){var t=typeof e=="function"?e:pu(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function g1(){return null}function m1(e,t){var n=typeof e=="function"?e:pu(e),r=t==null?g1:typeof t=="function"?t:_i(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function y1(){var e=this.parentNode;e&&e.removeChild(this)}function v1(){return this.each(y1)}function x1(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function w1(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function b1(e){return this.select(e?w1:x1)}function C1(e){return arguments.length?this.property("__data__",e):this.node().__data__}function S1(e){return function(t){e.call(this,t,this.__data__)}}function E1(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function _1(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,s;n<o;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function N1(e,t,n){return function(){var r=this.__on,o,s=S1(t);if(r){for(var i=0,a=r.length;i<a;++i)if((o=r[i]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=s,o.options=n),o.value=t;return}}this.addEventListener(e.type,s,n),o={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(o):this.__on=[o]}}function R1(e,t,n){var r=E1(e+""),o,s=r.length,i;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,c=a.length,d;u<c;++u)for(o=0,d=a[u];o<s;++o)if((i=r[o]).type===d.type&&i.name===d.name)return d.value}return}for(a=t?N1:_1,o=0;o<s;++o)this.each(a(r[o],t,n));return this}function Su(e,t,n){var r=vu(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function T1(e,t){return function(){return Su(this,e,t)}}function D1(e,t){return function(){return Su(this,e,t.apply(this,arguments))}}function A1(e,t){return this.each((typeof t=="function"?D1:T1)(e,t))}function*M1(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,s=r.length,i;o<s;++o)(i=r[o])&&(yield i)}var Eu=[null];function Pe(e,t){this._groups=e,this._parents=t}function sr(){return new Pe([[document.documentElement]],Eu)}function P1(){return this}Pe.prototype=sr.prototype={constructor:Pe,select:o0,selectAll:c0,selectChild:f0,selectChildren:m0,filter:y0,data:S0,enter:v0,exit:_0,join:N0,merge:R0,selection:P1,order:T0,sort:D0,call:M0,nodes:P0,node:I0,size:k0,empty:O0,each:j0,attr:B0,style:X0,property:q0,classed:t1,text:s1,html:l1,raise:d1,lower:p1,append:h1,insert:m1,remove:v1,clone:b1,datum:C1,on:R1,dispatch:A1,[Symbol.iterator]:M1};function Ae(e){return typeof e=="string"?new Pe([[document.querySelector(e)]],[document.documentElement]):new Pe([[e]],Eu)}function I1(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Be(e,t){if(e=I1(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const k1={passive:!1},Un={capture:!0,passive:!1};function ms(e){e.stopImmediatePropagation()}function en(e){e.preventDefault(),e.stopImmediatePropagation()}function _u(e){var t=e.document.documentElement,n=Ae(e).on("dragstart.drag",en,Un);"onselectstart"in t?n.on("selectstart.drag",en,Un):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Nu(e,t){var n=e.document.documentElement,r=Ae(e).on("dragstart.drag",null);t&&(r.on("click.drag",en,Un),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Rr=e=>()=>e;function Bs(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:s,x:i,y:a,dx:u,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}Bs.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function O1(e){return!e.ctrlKey&&!e.button}function j1(){return this.parentNode}function L1(e,t){return t??{x:e.x,y:e.y}}function $1(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ru(){var e=O1,t=j1,n=L1,r=$1,o={},s=bo("start","drag","end"),i=0,a,u,c,d,f=0;function p(b){b.on("mousedown.drag",h).filter(r).on("touchstart.drag",y).on("touchmove.drag",w,k1).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(b,N){if(!(d||!e.call(this,b,N))){var S=v(this,t.call(this,b,N),b,N,"mouse");S&&(Ae(b.view).on("mousemove.drag",m,Un).on("mouseup.drag",x,Un),_u(b.view),ms(b),c=!1,a=b.clientX,u=b.clientY,S("start",b))}}function m(b){if(en(b),!c){var N=b.clientX-a,S=b.clientY-u;c=N*N+S*S>f}o.mouse("drag",b)}function x(b){Ae(b.view).on("mousemove.drag mouseup.drag",null),Nu(b.view,c),en(b),o.mouse("end",b)}function y(b,N){if(e.call(this,b,N)){var S=b.changedTouches,R=t.call(this,b,N),O=S.length,D,V;for(D=0;D<O;++D)(V=v(this,R,b,N,S[D].identifier,S[D]))&&(ms(b),V("start",b,S[D]))}}function w(b){var N=b.changedTouches,S=N.length,R,O;for(R=0;R<S;++R)(O=o[N[R].identifier])&&(en(b),O("drag",b,N[R]))}function E(b){var N=b.changedTouches,S=N.length,R,O;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),R=0;R<S;++R)(O=o[N[R].identifier])&&(ms(b),O("end",b,N[R]))}function v(b,N,S,R,O,D){var V=s.copy(),I=Be(D||S,N),$,W,_;if((_=n.call(b,new Bs("beforestart",{sourceEvent:S,target:p,identifier:O,active:i,x:I[0],y:I[1],dx:0,dy:0,dispatch:V}),R))!=null)return $=_.x-I[0]||0,W=_.y-I[1]||0,function j(M,F,L){var k=I,U;switch(M){case"start":o[O]=j,U=i++;break;case"end":delete o[O],--i;case"drag":I=Be(L||F,N),U=i;break}V.call(M,b,new Bs(M,{sourceEvent:F,subject:_,target:p,identifier:O,active:U,x:I[0]+$,y:I[1]+W,dx:I[0]-k[0],dy:I[1]-k[1],dispatch:V}),R)}}return p.filter=function(b){return arguments.length?(e=typeof b=="function"?b:Rr(!!b),p):e},p.container=function(b){return arguments.length?(t=typeof b=="function"?b:Rr(b),p):t},p.subject=function(b){return arguments.length?(n=typeof b=="function"?b:Rr(b),p):n},p.touchable=function(b){return arguments.length?(r=typeof b=="function"?b:Rr(!!b),p):r},p.on=function(){var b=s.on.apply(s,arguments);return b===s?p:b},p.clickDistance=function(b){return arguments.length?(f=(b=+b)*b,p):Math.sqrt(f)},p}function Ri(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Tu(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ir(){}var Xn=.7,Kr=1/Xn,tn="\\s*([+-]?\\d+)\\s*",Yn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",F1=/^#([0-9a-f]{3,8})$/,H1=new RegExp(`^rgb\\(${tn},${tn},${tn}\\)$`),z1=new RegExp(`^rgb\\(${qe},${qe},${qe}\\)$`),V1=new RegExp(`^rgba\\(${tn},${tn},${tn},${Yn}\\)$`),B1=new RegExp(`^rgba\\(${qe},${qe},${qe},${Yn}\\)$`),W1=new RegExp(`^hsl\\(${Yn},${qe},${qe}\\)$`),G1=new RegExp(`^hsla\\(${Yn},${qe},${qe},${Yn}\\)$`),Ra={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ri(ir,It,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ta,formatHex:Ta,formatHex8:U1,formatHsl:X1,formatRgb:Da,toString:Da});function Ta(){return this.rgb().formatHex()}function U1(){return this.rgb().formatHex8()}function X1(){return Du(this).formatHsl()}function Da(){return this.rgb().formatRgb()}function It(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=F1.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Aa(t):n===3?new Re(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Tr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Tr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=H1.exec(e))?new Re(t[1],t[2],t[3],1):(t=z1.exec(e))?new Re(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=V1.exec(e))?Tr(t[1],t[2],t[3],t[4]):(t=B1.exec(e))?Tr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=W1.exec(e))?Ia(t[1],t[2]/100,t[3]/100,1):(t=G1.exec(e))?Ia(t[1],t[2]/100,t[3]/100,t[4]):Ra.hasOwnProperty(e)?Aa(Ra[e]):e==="transparent"?new Re(NaN,NaN,NaN,0):null}function Aa(e){return new Re(e>>16&255,e>>8&255,e&255,1)}function Tr(e,t,n,r){return r<=0&&(e=t=n=NaN),new Re(e,t,n,r)}function Y1(e){return e instanceof ir||(e=It(e)),e?(e=e.rgb(),new Re(e.r,e.g,e.b,e.opacity)):new Re}function Ws(e,t,n,r){return arguments.length===1?Y1(e):new Re(e,t,n,r??1)}function Re(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ri(Re,Ws,Tu(ir,{brighter(e){return e=e==null?Kr:Math.pow(Kr,e),new Re(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Xn:Math.pow(Xn,e),new Re(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Re(At(this.r),At(this.g),At(this.b),qr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ma,formatHex:Ma,formatHex8:Z1,formatRgb:Pa,toString:Pa}));function Ma(){return`#${Rt(this.r)}${Rt(this.g)}${Rt(this.b)}`}function Z1(){return`#${Rt(this.r)}${Rt(this.g)}${Rt(this.b)}${Rt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Pa(){const e=qr(this.opacity);return`${e===1?"rgb(":"rgba("}${At(this.r)}, ${At(this.g)}, ${At(this.b)}${e===1?")":`, ${e})`}`}function qr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function At(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Rt(e){return e=At(e),(e<16?"0":"")+e.toString(16)}function Ia(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new We(e,t,n,r)}function Du(e){if(e instanceof We)return new We(e.h,e.s,e.l,e.opacity);if(e instanceof ir||(e=It(e)),!e)return new We;if(e instanceof We)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),s=Math.max(t,n,r),i=NaN,a=s-o,u=(s+o)/2;return a?(t===s?i=(n-r)/a+(n<r)*6:n===s?i=(r-t)/a+2:i=(t-n)/a+4,a/=u<.5?s+o:2-s-o,i*=60):a=u>0&&u<1?0:i,new We(i,a,u,e.opacity)}function K1(e,t,n,r){return arguments.length===1?Du(e):new We(e,t,n,r??1)}function We(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ri(We,K1,Tu(ir,{brighter(e){return e=e==null?Kr:Math.pow(Kr,e),new We(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Xn:Math.pow(Xn,e),new We(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Re(ys(e>=240?e-240:e+120,o,r),ys(e,o,r),ys(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new We(ka(this.h),Dr(this.s),Dr(this.l),qr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=qr(this.opacity);return`${e===1?"hsl(":"hsla("}${ka(this.h)}, ${Dr(this.s)*100}%, ${Dr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ka(e){return e=(e||0)%360,e<0?e+360:e}function Dr(e){return Math.max(0,Math.min(1,e||0))}function ys(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ti=e=>()=>e;function q1(e,t){return function(n){return e+n*t}}function Q1(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function J1(e){return(e=+e)==1?Au:function(t,n){return n-t?Q1(t,n,e):Ti(isNaN(t)?n:t)}}function Au(e,t){var n=t-e;return n?q1(e,n):Ti(isNaN(e)?t:e)}const Qr=(function e(t){var n=J1(t);function r(o,s){var i=n((o=Ws(o)).r,(s=Ws(s)).r),a=n(o.g,s.g),u=n(o.b,s.b),c=Au(o.opacity,s.opacity);return function(d){return o.r=i(d),o.g=a(d),o.b=u(d),o.opacity=c(d),o+""}}return r.gamma=e,r})(1);function ey(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),o;return function(s){for(o=0;o<n;++o)r[o]=e[o]*(1-s)+t[o]*s;return r}}function ty(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ny(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,o=new Array(r),s=new Array(n),i;for(i=0;i<r;++i)o[i]=Bn(e[i],t[i]);for(;i<n;++i)s[i]=t[i];return function(a){for(i=0;i<r;++i)s[i]=o[i](a);return s}}function ry(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ke(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function oy(e,t){var n={},r={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?n[o]=Bn(e[o],t[o]):r[o]=t[o];return function(s){for(o in n)r[o]=n[o](s);return r}}var Gs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vs=new RegExp(Gs.source,"g");function sy(e){return function(){return e}}function iy(e){return function(t){return e(t)+""}}function Mu(e,t){var n=Gs.lastIndex=vs.lastIndex=0,r,o,s,i=-1,a=[],u=[];for(e=e+"",t=t+"";(r=Gs.exec(e))&&(o=vs.exec(t));)(s=o.index)>n&&(s=t.slice(n,s),a[i]?a[i]+=s:a[++i]=s),(r=r[0])===(o=o[0])?a[i]?a[i]+=o:a[++i]=o:(a[++i]=null,u.push({i,x:Ke(r,o)})),n=vs.lastIndex;return n<t.length&&(s=t.slice(n),a[i]?a[i]+=s:a[++i]=s),a.length<2?u[0]?iy(u[0].x):sy(t):(t=u.length,function(c){for(var d=0,f;d<t;++d)a[(f=u[d]).i]=f.x(c);return a.join("")})}function Bn(e,t){var n=typeof t,r;return t==null||n==="boolean"?Ti(t):(n==="number"?Ke:n==="string"?(r=It(t))?(t=r,Qr):Mu:t instanceof It?Qr:t instanceof Date?ry:ty(t)?ey:Array.isArray(t)?ny:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?oy:Ke)(e,t)}var Oa=180/Math.PI,Us={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Pu(e,t,n,r,o,s){var i,a,u;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,i=-i),{translateX:o,translateY:s,rotate:Math.atan2(t,e)*Oa,skewX:Math.atan(u)*Oa,scaleX:i,scaleY:a}}var Ar;function ay(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Us:Pu(t.a,t.b,t.c,t.d,t.e,t.f)}function cy(e){return e==null||(Ar||(Ar=document.createElementNS("http://www.w3.org/2000/svg","g")),Ar.setAttribute("transform",e),!(e=Ar.transform.baseVal.consolidate()))?Us:(e=e.matrix,Pu(e.a,e.b,e.c,e.d,e.e,e.f))}function Iu(e,t,n,r){function o(c){return c.length?c.pop()+" ":""}function s(c,d,f,p,h,m){if(c!==f||d!==p){var x=h.push("translate(",null,t,null,n);m.push({i:x-4,x:Ke(c,f)},{i:x-2,x:Ke(d,p)})}else(f||p)&&h.push("translate("+f+t+p+n)}function i(c,d,f,p){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),p.push({i:f.push(o(f)+"rotate(",null,r)-2,x:Ke(c,d)})):d&&f.push(o(f)+"rotate("+d+r)}function a(c,d,f,p){c!==d?p.push({i:f.push(o(f)+"skewX(",null,r)-2,x:Ke(c,d)}):d&&f.push(o(f)+"skewX("+d+r)}function u(c,d,f,p,h,m){if(c!==f||d!==p){var x=h.push(o(h)+"scale(",null,",",null,")");m.push({i:x-4,x:Ke(c,f)},{i:x-2,x:Ke(d,p)})}else(f!==1||p!==1)&&h.push(o(h)+"scale("+f+","+p+")")}return function(c,d){var f=[],p=[];return c=e(c),d=e(d),s(c.translateX,c.translateY,d.translateX,d.translateY,f,p),i(c.rotate,d.rotate,f,p),a(c.skewX,d.skewX,f,p),u(c.scaleX,c.scaleY,d.scaleX,d.scaleY,f,p),c=d=null,function(h){for(var m=-1,x=p.length,y;++m<x;)f[(y=p[m]).i]=y.x(h);return f.join("")}}}var ly=Iu(ay,"px, ","px)","deg)"),uy=Iu(cy,", ",")",")"),dy=1e-12;function ja(e){return((e=Math.exp(e))+1/e)/2}function fy(e){return((e=Math.exp(e))-1/e)/2}function py(e){return((e=Math.exp(2*e))-1)/(e+1)}const Vr=(function e(t,n,r){function o(s,i){var a=s[0],u=s[1],c=s[2],d=i[0],f=i[1],p=i[2],h=d-a,m=f-u,x=h*h+m*m,y,w;if(x<dy)w=Math.log(p/c)/t,y=function(R){return[a+R*h,u+R*m,c*Math.exp(t*R*w)]};else{var E=Math.sqrt(x),v=(p*p-c*c+r*x)/(2*c*n*E),b=(p*p-c*c-r*x)/(2*p*n*E),N=Math.log(Math.sqrt(v*v+1)-v),S=Math.log(Math.sqrt(b*b+1)-b);w=(S-N)/t,y=function(R){var O=R*w,D=ja(N),V=c/(n*E)*(D*py(t*O+N)-fy(N));return[a+V*h,u+V*m,c*D/ja(t*O+N)]}}return y.duration=w*1e3*t/Math.SQRT2,y}return o.rho=function(s){var i=Math.max(.001,+s),a=i*i,u=a*a;return e(i,a,u)},o})(Math.SQRT2,2,4);var an=0,Fn=0,jn=0,ku=1e3,Jr,Hn,eo=0,kt=0,So=0,Zn=typeof performance=="object"&&performance.now?performance:Date,Ou=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Di(){return kt||(Ou(hy),kt=Zn.now()+So)}function hy(){kt=0}function to(){this._call=this._time=this._next=null}to.prototype=ju.prototype={constructor:to,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Di():+n)+(t==null?0:+t),!this._next&&Hn!==this&&(Hn?Hn._next=this:Jr=this,Hn=this),this._call=e,this._time=n,Xs()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xs())}};function ju(e,t,n){var r=new to;return r.restart(e,t,n),r}function gy(){Di(),++an;for(var e=Jr,t;e;)(t=kt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--an}function La(){kt=(eo=Zn.now())+So,an=Fn=0;try{gy()}finally{an=0,yy(),kt=0}}function my(){var e=Zn.now(),t=e-eo;t>ku&&(So-=t,eo=e)}function yy(){for(var e,t=Jr,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Jr=n);Hn=e,Xs(r)}function Xs(e){if(!an){Fn&&(Fn=clearTimeout(Fn));var t=e-kt;t>24?(e<1/0&&(Fn=setTimeout(La,e-Zn.now()-So)),jn&&(jn=clearInterval(jn))):(jn||(eo=Zn.now(),jn=setInterval(my,ku)),an=1,Ou(La))}}function $a(e,t,n){var r=new to;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var vy=bo("start","end","cancel","interrupt"),xy=[],Lu=0,Fa=1,Ys=2,Br=3,Ha=4,Zs=5,Wr=6;function Eo(e,t,n,r,o,s){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;wy(e,n,{name:t,index:r,group:o,on:vy,tween:xy,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Lu})}function Ai(e,t){var n=Ye(e,t);if(n.state>Lu)throw new Error("too late; already scheduled");return n}function tt(e,t){var n=Ye(e,t);if(n.state>Br)throw new Error("too late; already running");return n}function Ye(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function wy(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=ju(s,0,n.time);function s(c){n.state=Fa,n.timer.restart(i,n.delay,n.time),n.delay<=c&&i(c-n.delay)}function i(c){var d,f,p,h;if(n.state!==Fa)return u();for(d in r)if(h=r[d],h.name===n.name){if(h.state===Br)return $a(i);h.state===Ha?(h.state=Wr,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[d]):+d<t&&(h.state=Wr,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[d])}if($a(function(){n.state===Br&&(n.state=Ha,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Ys,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ys){for(n.state=Br,o=new Array(p=n.tween.length),d=0,f=-1;d<p;++d)(h=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(o[++f]=h);o.length=f+1}}function a(c){for(var d=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=Zs,1),f=-1,p=o.length;++f<p;)o[f].call(e,d);n.state===Zs&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Wr,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function Gr(e,t){var n=e.__transition,r,o,s=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){s=!1;continue}o=r.state>Ys&&r.state<Zs,r.state=Wr,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}s&&delete e.__transition}}function by(e){return this.each(function(){Gr(this,e)})}function Cy(e,t){var n,r;return function(){var o=tt(this,e),s=o.tween;if(s!==n){r=n=s;for(var i=0,a=r.length;i<a;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}o.tween=r}}function Sy(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var s=tt(this,e),i=s.tween;if(i!==r){o=(r=i).slice();for(var a={name:t,value:n},u=0,c=o.length;u<c;++u)if(o[u].name===t){o[u]=a;break}u===c&&o.push(a)}s.tween=o}}function Ey(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ye(this.node(),n).tween,o=0,s=r.length,i;o<s;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((t==null?Cy:Sy)(n,e,t))}function Mi(e,t,n){var r=e._id;return e.each(function(){var o=tt(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return Ye(o,r).value[t]}}function $u(e,t){var n;return(typeof t=="number"?Ke:t instanceof It?Qr:(n=It(t))?(t=n,Qr):Mu)(e,t)}function _y(e){return function(){this.removeAttribute(e)}}function Ny(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ry(e,t,n){var r,o=n+"",s;return function(){var i=this.getAttribute(e);return i===o?null:i===r?s:s=t(r=i,n)}}function Ty(e,t,n){var r,o=n+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===o?null:i===r?s:s=t(r=i,n)}}function Dy(e,t,n){var r,o,s;return function(){var i,a=n(this),u;return a==null?void this.removeAttribute(e):(i=this.getAttribute(e),u=a+"",i===u?null:i===r&&u===o?s:(o=u,s=t(r=i,a)))}}function Ay(e,t,n){var r,o,s;return function(){var i,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),u=a+"",i===u?null:i===r&&u===o?s:(o=u,s=t(r=i,a)))}}function My(e,t){var n=Co(e),r=n==="transform"?uy:$u;return this.attrTween(e,typeof t=="function"?(n.local?Ay:Dy)(n,r,Mi(this,"attr."+e,t)):t==null?(n.local?Ny:_y)(n):(n.local?Ty:Ry)(n,r,t))}function Py(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Iy(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ky(e,t){var n,r;function o(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Iy(e,s)),n}return o._value=t,o}function Oy(e,t){var n,r;function o(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Py(e,s)),n}return o._value=t,o}function jy(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Co(e);return this.tween(n,(r.local?ky:Oy)(r,t))}function Ly(e,t){return function(){Ai(this,e).delay=+t.apply(this,arguments)}}function $y(e,t){return t=+t,function(){Ai(this,e).delay=t}}function Fy(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ly:$y)(t,e)):Ye(this.node(),t).delay}function Hy(e,t){return function(){tt(this,e).duration=+t.apply(this,arguments)}}function zy(e,t){return t=+t,function(){tt(this,e).duration=t}}function Vy(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Hy:zy)(t,e)):Ye(this.node(),t).duration}function By(e,t){if(typeof t!="function")throw new Error;return function(){tt(this,e).ease=t}}function Wy(e){var t=this._id;return arguments.length?this.each(By(t,e)):Ye(this.node(),t).ease}function Gy(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;tt(this,e).ease=n}}function Uy(e){if(typeof e!="function")throw new Error;return this.each(Gy(this._id,e))}function Xy(e){typeof e!="function"&&(e=gu(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,a=r[o]=[],u,c=0;c<i;++c)(u=s[c])&&e.call(u,u.__data__,c,s)&&a.push(u);return new it(r,this._parents,this._name,this._id)}function Yy(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,s=Math.min(r,o),i=new Array(r),a=0;a<s;++a)for(var u=t[a],c=n[a],d=u.length,f=i[a]=new Array(d),p,h=0;h<d;++h)(p=u[h]||c[h])&&(f[h]=p);for(;a<r;++a)i[a]=t[a];return new it(i,this._parents,this._name,this._id)}function Zy(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ky(e,t,n){var r,o,s=Zy(t)?Ai:tt;return function(){var i=s(this,e),a=i.on;a!==r&&(o=(r=a).copy()).on(t,n),i.on=o}}function qy(e,t){var n=this._id;return arguments.length<2?Ye(this.node(),n).on.on(e):this.each(Ky(n,e,t))}function Qy(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Jy(){return this.on("end.remove",Qy(this._id))}function ev(e){var t=this._name,n=this._id;typeof e!="function"&&(e=_i(e));for(var r=this._groups,o=r.length,s=new Array(o),i=0;i<o;++i)for(var a=r[i],u=a.length,c=s[i]=new Array(u),d,f,p=0;p<u;++p)(d=a[p])&&(f=e.call(d,d.__data__,p,a))&&("__data__"in d&&(f.__data__=d.__data__),c[p]=f,Eo(c[p],t,n,p,c,Ye(d,n)));return new it(s,this._parents,t,n)}function tv(e){var t=this._name,n=this._id;typeof e!="function"&&(e=hu(e));for(var r=this._groups,o=r.length,s=[],i=[],a=0;a<o;++a)for(var u=r[a],c=u.length,d,f=0;f<c;++f)if(d=u[f]){for(var p=e.call(d,d.__data__,f,u),h,m=Ye(d,n),x=0,y=p.length;x<y;++x)(h=p[x])&&Eo(h,t,n,x,p,m);s.push(p),i.push(d)}return new it(s,i,t,n)}var nv=sr.prototype.constructor;function rv(){return new nv(this._groups,this._parents)}function ov(e,t){var n,r,o;return function(){var s=sn(this,e),i=(this.style.removeProperty(e),sn(this,e));return s===i?null:s===n&&i===r?o:o=t(n=s,r=i)}}function Fu(e){return function(){this.style.removeProperty(e)}}function sv(e,t,n){var r,o=n+"",s;return function(){var i=sn(this,e);return i===o?null:i===r?s:s=t(r=i,n)}}function iv(e,t,n){var r,o,s;return function(){var i=sn(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),sn(this,e))),i===u?null:i===r&&u===o?s:(o=u,s=t(r=i,a))}}function av(e,t){var n,r,o,s="style."+t,i="end."+s,a;return function(){var u=tt(this,e),c=u.on,d=u.value[s]==null?a||(a=Fu(t)):void 0;(c!==n||o!==d)&&(r=(n=c).copy()).on(i,o=d),u.on=r}}function cv(e,t,n){var r=(e+="")=="transform"?ly:$u;return t==null?this.styleTween(e,ov(e,r)).on("end.style."+e,Fu(e)):typeof t=="function"?this.styleTween(e,iv(e,r,Mi(this,"style."+e,t))).each(av(this._id,e)):this.styleTween(e,sv(e,r,t),n).on("end.style."+e,null)}function lv(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function uv(e,t,n){var r,o;function s(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&lv(e,i,n)),r}return s._value=t,s}function dv(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,uv(e,t,n??""))}function fv(e){return function(){this.textContent=e}}function pv(e){return function(){var t=e(this);this.textContent=t??""}}function hv(e){return this.tween("text",typeof e=="function"?pv(Mi(this,"text",e)):fv(e==null?"":e+""))}function gv(e){return function(t){this.textContent=e.call(this,t)}}function mv(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&gv(o)),t}return r._value=e,r}function yv(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,mv(e))}function vv(){for(var e=this._name,t=this._id,n=Hu(),r=this._groups,o=r.length,s=0;s<o;++s)for(var i=r[s],a=i.length,u,c=0;c<a;++c)if(u=i[c]){var d=Ye(u,t);Eo(u,e,n,c,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new it(r,this._parents,e,n)}function xv(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(s,i){var a={value:i},u={value:function(){--o===0&&s()}};n.each(function(){var c=tt(this,r),d=c.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),c.on=t}),o===0&&s()})}var wv=0;function it(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Hu(){return++wv}var ot=sr.prototype;it.prototype={constructor:it,select:ev,selectAll:tv,selectChild:ot.selectChild,selectChildren:ot.selectChildren,filter:Xy,merge:Yy,selection:rv,transition:vv,call:ot.call,nodes:ot.nodes,node:ot.node,size:ot.size,empty:ot.empty,each:ot.each,on:qy,attr:My,attrTween:jy,style:cv,styleTween:dv,text:hv,textTween:yv,remove:Jy,tween:Ey,delay:Fy,duration:Vy,ease:Wy,easeVarying:Uy,end:xv,[Symbol.iterator]:ot[Symbol.iterator]};function bv(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Cv={time:null,delay:0,duration:250,ease:bv};function Sv(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Ev(e){var t,n;e instanceof it?(t=e._id,e=e._name):(t=Hu(),(n=Cv).time=Di(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,s=0;s<o;++s)for(var i=r[s],a=i.length,u,c=0;c<a;++c)(u=i[c])&&Eo(u,e,t,c,i,n||Sv(u,t));return new it(r,this._parents,e,t)}sr.prototype.interrupt=by;sr.prototype.transition=Ev;const Mr=e=>()=>e;function _v(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function st(e,t,n){this.k=e,this.x=t,this.y=n}st.prototype={constructor:st,scale:function(e){return e===1?this:new st(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new st(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var _o=new st(1,0,0);zu.prototype=st.prototype;function zu(e){for(;!e.__zoom;)if(!(e=e.parentNode))return _o;return e.__zoom}function xs(e){e.stopImmediatePropagation()}function Ln(e){e.preventDefault(),e.stopImmediatePropagation()}function Nv(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Rv(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function za(){return this.__zoom||_o}function Tv(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Dv(){return navigator.maxTouchPoints||"ontouchstart"in this}function Av(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function Vu(){var e=Nv,t=Rv,n=Av,r=Tv,o=Dv,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],a=250,u=Vr,c=bo("start","zoom","end"),d,f,p,h=500,m=150,x=0,y=10;function w(_){_.property("__zoom",za).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",V).filter(o).on("touchstart.zoom",I).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",W).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}w.transform=function(_,j,M,F){var L=_.selection?_.selection():_;L.property("__zoom",za),_!==L?N(_,j,M,F):L.interrupt().each(function(){S(this,arguments).event(F).start().zoom(null,typeof j=="function"?j.apply(this,arguments):j).end()})},w.scaleBy=function(_,j,M,F){w.scaleTo(_,function(){var L=this.__zoom.k,k=typeof j=="function"?j.apply(this,arguments):j;return L*k},M,F)},w.scaleTo=function(_,j,M,F){w.transform(_,function(){var L=t.apply(this,arguments),k=this.__zoom,U=M==null?b(L):typeof M=="function"?M.apply(this,arguments):M,Z=k.invert(U),A=typeof j=="function"?j.apply(this,arguments):j;return n(v(E(k,A),U,Z),L,i)},M,F)},w.translateBy=function(_,j,M,F){w.transform(_,function(){return n(this.__zoom.translate(typeof j=="function"?j.apply(this,arguments):j,typeof M=="function"?M.apply(this,arguments):M),t.apply(this,arguments),i)},null,F)},w.translateTo=function(_,j,M,F,L){w.transform(_,function(){var k=t.apply(this,arguments),U=this.__zoom,Z=F==null?b(k):typeof F=="function"?F.apply(this,arguments):F;return n(_o.translate(Z[0],Z[1]).scale(U.k).translate(typeof j=="function"?-j.apply(this,arguments):-j,typeof M=="function"?-M.apply(this,arguments):-M),k,i)},F,L)};function E(_,j){return j=Math.max(s[0],Math.min(s[1],j)),j===_.k?_:new st(j,_.x,_.y)}function v(_,j,M){var F=j[0]-M[0]*_.k,L=j[1]-M[1]*_.k;return F===_.x&&L===_.y?_:new st(_.k,F,L)}function b(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function N(_,j,M,F){_.on("start.zoom",function(){S(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(F).end()}).tween("zoom",function(){var L=this,k=arguments,U=S(L,k).event(F),Z=t.apply(L,k),A=M==null?b(Z):typeof M=="function"?M.apply(L,k):M,G=Math.max(Z[1][0]-Z[0][0],Z[1][1]-Z[0][1]),T=L.__zoom,Y=typeof j=="function"?j.apply(L,k):j,H=u(T.invert(A).concat(G/T.k),Y.invert(A).concat(G/Y.k));return function(X){if(X===1)X=Y;else{var K=H(X),ee=G/K[2];X=new st(ee,A[0]-K[0]*ee,A[1]-K[1]*ee)}U.zoom(null,X)}})}function S(_,j,M){return!M&&_.__zooming||new R(_,j)}function R(_,j){this.that=_,this.args=j,this.active=0,this.sourceEvent=null,this.extent=t.apply(_,j),this.taps=0}R.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,j){return this.mouse&&_!=="mouse"&&(this.mouse[1]=j.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=j.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=j.invert(this.touch1[0])),this.that.__zoom=j,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var j=Ae(this.that).datum();c.call(_,this.that,new _v(_,{sourceEvent:this.sourceEvent,target:w,transform:this.that.__zoom,dispatch:c}),j)}};function O(_,...j){if(!e.apply(this,arguments))return;var M=S(this,j).event(_),F=this.__zoom,L=Math.max(s[0],Math.min(s[1],F.k*Math.pow(2,r.apply(this,arguments)))),k=Be(_);if(M.wheel)(M.mouse[0][0]!==k[0]||M.mouse[0][1]!==k[1])&&(M.mouse[1]=F.invert(M.mouse[0]=k)),clearTimeout(M.wheel);else{if(F.k===L)return;M.mouse=[k,F.invert(k)],Gr(this),M.start()}Ln(_),M.wheel=setTimeout(U,m),M.zoom("mouse",n(v(E(F,L),M.mouse[0],M.mouse[1]),M.extent,i));function U(){M.wheel=null,M.end()}}function D(_,...j){if(p||!e.apply(this,arguments))return;var M=_.currentTarget,F=S(this,j,!0).event(_),L=Ae(_.view).on("mousemove.zoom",A,!0).on("mouseup.zoom",G,!0),k=Be(_,M),U=_.clientX,Z=_.clientY;_u(_.view),xs(_),F.mouse=[k,this.__zoom.invert(k)],Gr(this),F.start();function A(T){if(Ln(T),!F.moved){var Y=T.clientX-U,H=T.clientY-Z;F.moved=Y*Y+H*H>x}F.event(T).zoom("mouse",n(v(F.that.__zoom,F.mouse[0]=Be(T,M),F.mouse[1]),F.extent,i))}function G(T){L.on("mousemove.zoom mouseup.zoom",null),Nu(T.view,F.moved),Ln(T),F.event(T).end()}}function V(_,...j){if(e.apply(this,arguments)){var M=this.__zoom,F=Be(_.changedTouches?_.changedTouches[0]:_,this),L=M.invert(F),k=M.k*(_.shiftKey?.5:2),U=n(v(E(M,k),F,L),t.apply(this,j),i);Ln(_),a>0?Ae(this).transition().duration(a).call(N,U,F,_):Ae(this).call(w.transform,U,F,_)}}function I(_,...j){if(e.apply(this,arguments)){var M=_.touches,F=M.length,L=S(this,j,_.changedTouches.length===F).event(_),k,U,Z,A;for(xs(_),U=0;U<F;++U)Z=M[U],A=Be(Z,this),A=[A,this.__zoom.invert(A),Z.identifier],L.touch0?!L.touch1&&L.touch0[2]!==A[2]&&(L.touch1=A,L.taps=0):(L.touch0=A,k=!0,L.taps=1+!!d);d&&(d=clearTimeout(d)),k&&(L.taps<2&&(f=A[0],d=setTimeout(function(){d=null},h)),Gr(this),L.start())}}function $(_,...j){if(this.__zooming){var M=S(this,j).event(_),F=_.changedTouches,L=F.length,k,U,Z,A;for(Ln(_),k=0;k<L;++k)U=F[k],Z=Be(U,this),M.touch0&&M.touch0[2]===U.identifier?M.touch0[0]=Z:M.touch1&&M.touch1[2]===U.identifier&&(M.touch1[0]=Z);if(U=M.that.__zoom,M.touch1){var G=M.touch0[0],T=M.touch0[1],Y=M.touch1[0],H=M.touch1[1],X=(X=Y[0]-G[0])*X+(X=Y[1]-G[1])*X,K=(K=H[0]-T[0])*K+(K=H[1]-T[1])*K;U=E(U,Math.sqrt(X/K)),Z=[(G[0]+Y[0])/2,(G[1]+Y[1])/2],A=[(T[0]+H[0])/2,(T[1]+H[1])/2]}else if(M.touch0)Z=M.touch0[0],A=M.touch0[1];else return;M.zoom("touch",n(v(U,Z,A),M.extent,i))}}function W(_,...j){if(this.__zooming){var M=S(this,j).event(_),F=_.changedTouches,L=F.length,k,U;for(xs(_),p&&clearTimeout(p),p=setTimeout(function(){p=null},h),k=0;k<L;++k)U=F[k],M.touch0&&M.touch0[2]===U.identifier?delete M.touch0:M.touch1&&M.touch1[2]===U.identifier&&delete M.touch1;if(M.touch1&&!M.touch0&&(M.touch0=M.touch1,delete M.touch1),M.touch0)M.touch0[1]=this.__zoom.invert(M.touch0[0]);else if(M.end(),M.taps===2&&(U=Be(U,this),Math.hypot(f[0]-U[0],f[1]-U[1])<y)){var Z=Ae(this).on("dblclick.zoom");Z&&Z.apply(this,arguments)}}}return w.wheelDelta=function(_){return arguments.length?(r=typeof _=="function"?_:Mr(+_),w):r},w.filter=function(_){return arguments.length?(e=typeof _=="function"?_:Mr(!!_),w):e},w.touchable=function(_){return arguments.length?(o=typeof _=="function"?_:Mr(!!_),w):o},w.extent=function(_){return arguments.length?(t=typeof _=="function"?_:Mr([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),w):t},w.scaleExtent=function(_){return arguments.length?(s[0]=+_[0],s[1]=+_[1],w):[s[0],s[1]]},w.translateExtent=function(_){return arguments.length?(i[0][0]=+_[0][0],i[1][0]=+_[1][0],i[0][1]=+_[0][1],i[1][1]=+_[1][1],w):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},w.constrain=function(_){return arguments.length?(n=_,w):n},w.duration=function(_){return arguments.length?(a=+_,w):a},w.interpolate=function(_){return arguments.length?(u=_,w):u},w.on=function(){var _=c.on.apply(c,arguments);return _===c?w:_},w.clickDistance=function(_){return arguments.length?(x=(_=+_)*_,w):Math.sqrt(x)},w.tapDistance=function(_){return arguments.length?(y=+_,w):y},w}const Je={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Kn=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Bu=["Enter"," ","Escape"],Wu={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var cn;(function(e){e.Strict="strict",e.Loose="loose"})(cn||(cn={}));var Mt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Mt||(Mt={}));var qn;(function(e){e.Partial="partial",e.Full="full"})(qn||(qn={}));const Gu={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var pt;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(pt||(pt={}));var no;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(no||(no={}));var ne;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ne||(ne={}));const Va={[ne.Left]:ne.Right,[ne.Right]:ne.Left,[ne.Top]:ne.Bottom,[ne.Bottom]:ne.Top};function Uu(e){return e===null?null:e?"valid":"invalid"}const Xu=e=>"id"in e&&"source"in e&&"target"in e,Mv=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Pi=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),ar=(e,t=[0,0])=>{const{width:n,height:r}=ct(e),o=e.origin??t,s=n*o[0],i=r*o[1];return{x:e.position.x-s,y:e.position.y-i}},Pv=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const s=typeof o=="string";let i=!t.nodeLookup&&!s?o:void 0;t.nodeLookup&&(i=s?t.nodeLookup.get(o):Pi(o)?o:t.nodeLookup.get(o.id));const a=i?ro(i,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return No(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ro(n)},cr=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(o=>{(t.filter===void 0||t.filter(o))&&(n=No(n,ro(o)),r=!0)}),r?Ro(n):{x:0,y:0,width:0,height:0}},Ii=(e,t,[n,r,o]=[0,0,1],s=!1,i=!1)=>{const a={...ur(t,[n,r,o]),width:t.width/o,height:t.height/o},u=[];for(const c of e.values()){const{measured:d,selectable:f=!0,hidden:p=!1}=c;if(i&&!f||p)continue;const h=d.width??c.width??c.initialWidth??null,m=d.height??c.height??c.initialHeight??null,x=Qn(a,un(c)),y=(h??0)*(m??0),w=s&&x>0;(!c.internals.handleBounds||w||x>=y||c.dragging)&&u.push(c)}return u},Iv=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function kv(e,t){const n=new Map,r=t?.nodes?new Set(t.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&(t?.includeHiddenNodes||!o.hidden)&&(!r||r.has(o.id))&&n.set(o.id,o)}),n}async function Ov({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:s},i){if(e.size===0)return Promise.resolve(!0);const a=kv(e,i),u=cr(a),c=ki(u,t,n,i?.minZoom??o,i?.maxZoom??s,i?.padding??.1);return await r.setViewport(c,{duration:i?.duration,ease:i?.ease,interpolate:i?.interpolate}),Promise.resolve(!0)}function Yu({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:s}){const i=n.get(e),a=i.parentId?n.get(i.parentId):void 0,{x:u,y:c}=a?a.internals.positionAbsolute:{x:0,y:0},d=i.origin??r;let f=i.extent||o;if(i.extent==="parent"&&!i.expandParent)if(!a)s?.("005",Je.error005());else{const h=a.measured.width,m=a.measured.height;h&&m&&(f=[[u,c],[u+h,c+m]])}else a&&dn(i.extent)&&(f=[[i.extent[0][0]+u,i.extent[0][1]+c],[i.extent[1][0]+u,i.extent[1][1]+c]]);const p=dn(f)?Ot(t,f,i.measured):t;return(i.measured.width===void 0||i.measured.height===void 0)&&s?.("015",Je.error015()),{position:{x:p.x-u+(i.measured.width??0)*d[0],y:p.y-c+(i.measured.height??0)*d[1]},positionAbsolute:p}}async function jv({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){const s=new Set(e.map(p=>p.id)),i=[];for(const p of n){if(p.deletable===!1)continue;const h=s.has(p.id),m=!h&&p.parentId&&i.find(x=>x.id===p.parentId);(h||m)&&i.push(p)}const a=new Set(t.map(p=>p.id)),u=r.filter(p=>p.deletable!==!1),d=Iv(i,u);for(const p of u)a.has(p.id)&&!d.find(m=>m.id===p.id)&&d.push(p);if(!o)return{edges:d,nodes:i};const f=await o({nodes:i,edges:d});return typeof f=="boolean"?f?{edges:d,nodes:i}:{edges:[],nodes:[]}:f}const ln=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Ot=(e={x:0,y:0},t,n)=>({x:ln(e.x,t[0][0],t[1][0]-(n?.width??0)),y:ln(e.y,t[0][1],t[1][1]-(n?.height??0))});function Zu(e,t,n){const{width:r,height:o}=ct(n),{x:s,y:i}=n.internals.positionAbsolute;return Ot(e,[[s,i],[s+r,i+o]],t)}const Ba=(e,t,n)=>e<t?ln(Math.abs(e-t),1,t)/t:e>n?-ln(Math.abs(e-n),1,t)/t:0,Ku=(e,t,n=15,r=40)=>{const o=Ba(e.x,r,t.width-r)*n,s=Ba(e.y,r,t.height-r)*n;return[o,s]},No=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Ks=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Ro=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),un=(e,t=[0,0])=>{const{x:n,y:r}=Pi(e)?e.internals.positionAbsolute:ar(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},ro=(e,t=[0,0])=>{const{x:n,y:r}=Pi(e)?e.internals.positionAbsolute:ar(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},qu=(e,t)=>Ro(No(Ks(e),Ks(t))),Qn=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Wa=e=>Ge(e.width)&&Ge(e.height)&&Ge(e.x)&&Ge(e.y),Ge=e=>!isNaN(e)&&isFinite(e),Lv=(e,t)=>{},lr=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),ur=({x:e,y:t},[n,r,o],s=!1,i=[1,1])=>{const a={x:(e-n)/o,y:(t-r)/o};return s?lr(a,i):a},oo=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r});function Xt(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function $v(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=Xt(e,n),o=Xt(e,t);return{top:r,right:o,bottom:r,left:o,x:o*2,y:r*2}}if(typeof e=="object"){const r=Xt(e.top??e.y??0,n),o=Xt(e.bottom??e.y??0,n),s=Xt(e.left??e.x??0,t),i=Xt(e.right??e.x??0,t);return{top:r,right:i,bottom:o,left:s,x:s+i,y:r+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Fv(e,t,n,r,o,s){const{x:i,y:a}=oo(e,[t,n,r]),{x:u,y:c}=oo({x:e.x+e.width,y:e.y+e.height},[t,n,r]),d=o-u,f=s-c;return{left:Math.floor(i),top:Math.floor(a),right:Math.floor(d),bottom:Math.floor(f)}}const ki=(e,t,n,r,o,s)=>{const i=$v(s,t,n),a=(t-i.x)/e.width,u=(n-i.y)/e.height,c=Math.min(a,u),d=ln(c,r,o),f=e.x+e.width/2,p=e.y+e.height/2,h=t/2-f*d,m=n/2-p*d,x=Fv(e,h,m,d,t,n),y={left:Math.min(x.left-i.left,0),top:Math.min(x.top-i.top,0),right:Math.min(x.right-i.right,0),bottom:Math.min(x.bottom-i.bottom,0)};return{x:h-y.left+y.right,y:m-y.top+y.bottom,zoom:d}},Jn=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function dn(e){return e!=null&&e!=="parent"}function ct(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function Qu(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function Ju(e,t={width:0,height:0},n,r,o){const s={...e},i=r.get(n);if(i){const a=i.origin||o;s.x+=i.internals.positionAbsolute.x-(t.width??0)*a[0],s.y+=i.internals.positionAbsolute.y-(t.height??0)*a[1]}return s}function Ga(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Hv(){let e,t;return{promise:new Promise((r,o)=>{e=r,t=o}),resolve:e,reject:t}}function zv(e){return{...Wu,...e||{}}}function Wn(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:o}){const{x:s,y:i}=Ue(e),a=ur({x:s-(o?.left??0),y:i-(o?.top??0)},r),{x:u,y:c}=n?lr(a,t):a;return{xSnapped:u,ySnapped:c,...a}}const Oi=e=>({width:e.offsetWidth,height:e.offsetHeight}),ed=e=>e?.getRootNode?.()||window?.document,Vv=["INPUT","SELECT","TEXTAREA"];function td(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:Vv.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const nd=e=>"clientX"in e,Ue=(e,t)=>{const n=nd(e),r=n?e.clientX:e.touches?.[0].clientX,o=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:o-(t?.top??0)}},Ua=(e,t,n,r,o)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(i=>{const a=i.getBoundingClientRect();return{id:i.getAttribute("data-handleid"),type:e,nodeId:o,position:i.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...Oi(i)}})};function rd({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:s,targetControlX:i,targetControlY:a}){const u=e*.125+o*.375+i*.375+n*.125,c=t*.125+s*.375+a*.375+r*.125,d=Math.abs(u-e),f=Math.abs(c-t);return[u,c,d,f]}function Pr(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Xa({pos:e,x1:t,y1:n,x2:r,y2:o,c:s}){switch(e){case ne.Left:return[t-Pr(t-r,s),n];case ne.Right:return[t+Pr(r-t,s),n];case ne.Top:return[t,n-Pr(n-o,s)];case ne.Bottom:return[t,n+Pr(o-n,s)]}}function od({sourceX:e,sourceY:t,sourcePosition:n=ne.Bottom,targetX:r,targetY:o,targetPosition:s=ne.Top,curvature:i=.25}){const[a,u]=Xa({pos:n,x1:e,y1:t,x2:r,y2:o,c:i}),[c,d]=Xa({pos:s,x1:r,y1:o,x2:e,y2:t,c:i}),[f,p,h,m]=rd({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:a,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${e},${t} C${a},${u} ${c},${d} ${r},${o}`,f,p,h,m]}function sd({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,s=n<e?n+o:n-o,i=Math.abs(r-t)/2,a=r<t?r+i:r-i;return[s,a,o,i]}function Bv({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:o=!1,zIndexMode:s="basic"}){if(s==="manual")return r;const i=o&&n?r+1e3:r,a=Math.max(e.parentId||o&&e.selected?e.internals.z:0,t.parentId||o&&t.selected?t.internals.z:0);return i+a}function Wv({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){const s=No(ro(e),ro(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const i={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]};return Qn(i,Ro(s))>0}const Gv=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,Uv=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Xv=(e,t,n={})=>{if(!e.source||!e.target)return t;const r=n.getEdgeId||Gv;let o;return Xu(e)?o={...e}:o={...e,id:r(e)},Uv(o,t)?t:(o.sourceHandle===null&&delete o.sourceHandle,o.targetHandle===null&&delete o.targetHandle,t.concat(o))};function id({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,s,i,a]=sd({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,s,i,a]}const Ya={[ne.Left]:{x:-1,y:0},[ne.Right]:{x:1,y:0},[ne.Top]:{x:0,y:-1},[ne.Bottom]:{x:0,y:1}},Yv=({source:e,sourcePosition:t=ne.Bottom,target:n})=>t===ne.Left||t===ne.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Za=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Zv({source:e,sourcePosition:t=ne.Bottom,target:n,targetPosition:r=ne.Top,center:o,offset:s,stepPosition:i}){const a=Ya[t],u=Ya[r],c={x:e.x+a.x*s,y:e.y+a.y*s},d={x:n.x+u.x*s,y:n.y+u.y*s},f=Yv({source:c,sourcePosition:t,target:d}),p=f.x!==0?"x":"y",h=f[p];let m=[],x,y;const w={x:0,y:0},E={x:0,y:0},[,,v,b]=sd({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[p]*u[p]===-1){p==="x"?(x=o.x??c.x+(d.x-c.x)*i,y=o.y??(c.y+d.y)/2):(x=o.x??(c.x+d.x)/2,y=o.y??c.y+(d.y-c.y)*i);const S=[{x,y:c.y},{x,y:d.y}],R=[{x:c.x,y},{x:d.x,y}];a[p]===h?m=p==="x"?S:R:m=p==="x"?R:S}else{const S=[{x:c.x,y:d.y}],R=[{x:d.x,y:c.y}];if(p==="x"?m=a.x===h?R:S:m=a.y===h?S:R,t===r){const $=Math.abs(e[p]-n[p]);if($<=s){const W=Math.min(s-1,s-$);a[p]===h?w[p]=(c[p]>e[p]?-1:1)*W:E[p]=(d[p]>n[p]?-1:1)*W}}if(t!==r){const $=p==="x"?"y":"x",W=a[p]===u[$],_=c[$]>d[$],j=c[$]<d[$];(a[p]===1&&(!W&&_||W&&j)||a[p]!==1&&(!W&&j||W&&_))&&(m=p==="x"?S:R)}const O={x:c.x+w.x,y:c.y+w.y},D={x:d.x+E.x,y:d.y+E.y},V=Math.max(Math.abs(O.x-m[0].x),Math.abs(D.x-m[0].x)),I=Math.max(Math.abs(O.y-m[0].y),Math.abs(D.y-m[0].y));V>=I?(x=(O.x+D.x)/2,y=m[0].y):(x=m[0].x,y=(O.y+D.y)/2)}return[[e,{x:c.x+w.x,y:c.y+w.y},...m,{x:d.x+E.x,y:d.y+E.y},n],x,y,v,b]}function Kv(e,t,n,r){const o=Math.min(Za(e,t)/2,Za(t,n)/2,r),{x:s,y:i}=t;if(e.x===s&&s===n.x||e.y===i&&i===n.y)return`L${s} ${i}`;if(e.y===i){const c=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${s+o*c},${i}Q ${s},${i} ${s},${i+o*d}`}const a=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${s},${i+o*u}Q ${s},${i} ${s+o*a},${i}`}function qs({sourceX:e,sourceY:t,sourcePosition:n=ne.Bottom,targetX:r,targetY:o,targetPosition:s=ne.Top,borderRadius:i=5,centerX:a,centerY:u,offset:c=20,stepPosition:d=.5}){const[f,p,h,m,x]=Zv({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:s,center:{x:a,y:u},offset:c,stepPosition:d});return[f.reduce((w,E,v)=>{let b="";return v>0&&v<f.length-1?b=Kv(f[v-1],E,f[v+1],i):b=`${v===0?"M":"L"}${E.x} ${E.y}`,w+=b,w},""),p,h,m,x]}function Ka(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function qv(e){const{sourceNode:t,targetNode:n}=e;if(!Ka(t)||!Ka(n))return null;const r=t.internals.handleBounds||qa(t.handles),o=n.internals.handleBounds||qa(n.handles),s=Qa(r?.source??[],e.sourceHandle),i=Qa(e.connectionMode===cn.Strict?o?.target??[]:(o?.target??[]).concat(o?.source??[]),e.targetHandle);if(!s||!i)return e.onError?.("008",Je.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=s?.position||ne.Bottom,u=i?.position||ne.Top,c=jt(t,s,a),d=jt(n,i,u);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y,sourcePosition:a,targetPosition:u}}function qa(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function jt(e,t,n=ne.Left,r=!1){const o=(t?.x??0)+e.internals.positionAbsolute.x,s=(t?.y??0)+e.internals.positionAbsolute.y,{width:i,height:a}=t??ct(e);if(r)return{x:o+i/2,y:s+a/2};switch(t?.position??n){case ne.Top:return{x:o+i/2,y:s};case ne.Right:return{x:o+i,y:s+a/2};case ne.Bottom:return{x:o+i/2,y:s+a};case ne.Left:return{x:o,y:s+a/2}}}function Qa(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Qs(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function Qv(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){const s=new Set;return e.reduce((i,a)=>([a.markerStart||r,a.markerEnd||o].forEach(u=>{if(u&&typeof u=="object"){const c=Qs(u,t);s.has(c)||(i.push({id:c,color:u.color||n,...u}),s.add(c))}}),i),[]).sort((i,a)=>i.id.localeCompare(a.id))}const ad=1e3,Jv=10,ji={nodeOrigin:[0,0],nodeExtent:Kn,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},ex={...ji,checkEquality:!0};function Li(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function tx(e,t,n){const r=Li(ji,n);for(const o of e.values())if(o.parentId)Fi(o,e,t,r);else{const s=ar(o,r.nodeOrigin),i=dn(o.extent)?o.extent:r.nodeExtent,a=Ot(s,i,ct(o));o.internals.positionAbsolute=a}}function nx(e,t){if(!e.handles)return e.measured?t?.internals.handleBounds:void 0;const n=[],r=[];for(const o of e.handles){const s={id:o.id,width:o.width??1,height:o.height??1,nodeId:e.id,x:o.x,y:o.y,position:o.position,type:o.type};o.type==="source"?n.push(s):o.type==="target"&&r.push(s)}return{source:n,target:r}}function $i(e){return e==="manual"}function Js(e,t,n,r={}){const o=Li(ex,r),s={i:0},i=new Map(t),a=o?.elevateNodesOnSelect&&!$i(o.zIndexMode)?ad:0;let u=e.length>0;t.clear(),n.clear();for(const c of e){let d=i.get(c.id);if(o.checkEquality&&c===d?.internals.userNode)t.set(c.id,d);else{const f=ar(c,o.nodeOrigin),p=dn(c.extent)?c.extent:o.nodeExtent,h=Ot(f,p,ct(c));d={...o.defaults,...c,measured:{width:c.measured?.width,height:c.measured?.height},internals:{positionAbsolute:h,handleBounds:nx(c,d),z:cd(c,a,o.zIndexMode),userNode:c}},t.set(c.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(u=!1),c.parentId&&Fi(d,t,n,r,s)}return u}function rx(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Fi(e,t,n,r,o){const{elevateNodesOnSelect:s,nodeOrigin:i,nodeExtent:a,zIndexMode:u}=Li(ji,r),c=e.parentId,d=t.get(c);if(!d){console.warn(`Parent node ${c} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}rx(e,n),o&&!d.parentId&&d.internals.rootParentIndex===void 0&&u==="auto"&&(d.internals.rootParentIndex=++o.i,d.internals.z=d.internals.z+o.i*Jv),o&&d.internals.rootParentIndex!==void 0&&(o.i=d.internals.rootParentIndex);const f=s&&!$i(u)?ad:0,{x:p,y:h,z:m}=ox(e,d,i,a,f,u),{positionAbsolute:x}=e.internals,y=p!==x.x||h!==x.y;(y||m!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:y?{x:p,y:h}:x,z:m}})}function cd(e,t,n){const r=Ge(e.zIndex)?e.zIndex:0;return $i(n)?r:r+(e.selected?t:0)}function ox(e,t,n,r,o,s){const{x:i,y:a}=t.internals.positionAbsolute,u=ct(e),c=ar(e,n),d=dn(e.extent)?Ot(c,e.extent,u):c;let f=Ot({x:i+d.x,y:a+d.y},r,u);e.extent==="parent"&&(f=Zu(f,u,t));const p=cd(e,o,s),h=t.internals.z??0;return{x:f.x,y:f.y,z:h>=p?h+1:p}}function Hi(e,t,n,r=[0,0]){const o=[],s=new Map;for(const i of e){const a=t.get(i.parentId);if(!a)continue;const u=s.get(i.parentId)?.expandedRect??un(a),c=qu(u,i.rect);s.set(i.parentId,{expandedRect:c,parent:a})}return s.size>0&&s.forEach(({expandedRect:i,parent:a},u)=>{const c=a.internals.positionAbsolute,d=ct(a),f=a.origin??r,p=i.x<c.x?Math.round(Math.abs(c.x-i.x)):0,h=i.y<c.y?Math.round(Math.abs(c.y-i.y)):0,m=Math.max(d.width,Math.round(i.width)),x=Math.max(d.height,Math.round(i.height)),y=(m-d.width)*f[0],w=(x-d.height)*f[1];(p>0||h>0||y||w)&&(o.push({id:u,type:"position",position:{x:a.position.x-p+y,y:a.position.y-h+w}}),n.get(u)?.forEach(E=>{e.some(v=>v.id===E.id)||o.push({id:E.id,type:"position",position:{x:E.position.x+p,y:E.position.y+h}})})),(d.width<i.width||d.height<i.height||p||h)&&o.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:m+(p?f[0]*p-y:0),height:x+(h?f[1]*h-w:0)}})}),o}function sx(e,t,n,r,o,s,i){const a=r?.querySelector(".xyflow__viewport");let u=!1;if(!a)return{changes:[],updatedInternals:u};const c=[],d=window.getComputedStyle(a),{m22:f}=new window.DOMMatrixReadOnly(d.transform),p=[];for(const h of e.values()){const m=t.get(h.id);if(!m)continue;if(m.hidden){t.set(m.id,{...m,internals:{...m.internals,handleBounds:void 0}}),u=!0;continue}const x=Oi(h.nodeElement),y=m.measured.width!==x.width||m.measured.height!==x.height;if(!!(x.width&&x.height&&(y||!m.internals.handleBounds||h.force))){const E=h.nodeElement.getBoundingClientRect(),v=dn(m.extent)?m.extent:s;let{positionAbsolute:b}=m.internals;m.parentId&&m.extent==="parent"?b=Zu(b,x,t.get(m.parentId)):v&&(b=Ot(b,v,x));const N={...m,measured:x,internals:{...m.internals,positionAbsolute:b,handleBounds:{source:Ua("source",h.nodeElement,E,f,m.id),target:Ua("target",h.nodeElement,E,f,m.id)}}};t.set(m.id,N),m.parentId&&Fi(N,t,n,{nodeOrigin:o,zIndexMode:i}),u=!0,y&&(c.push({id:m.id,type:"dimensions",dimensions:x}),m.expandParent&&m.parentId&&p.push({id:m.id,parentId:m.parentId,rect:un(N,o)}))}}if(p.length>0){const h=Hi(p,t,n,o);c.push(...h)}return{changes:c,updatedInternals:u}}async function ix({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const i=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,s]],r),a=!!i&&(i.x!==n[0]||i.y!==n[1]||i.k!==n[2]);return Promise.resolve(a)}function Ja(e,t,n,r,o,s){let i=o;const a=r.get(i)||new Map;r.set(i,a.set(n,t)),i=`${o}-${e}`;const u=r.get(i)||new Map;if(r.set(i,u.set(n,t)),s){i=`${o}-${e}-${s}`;const c=r.get(i)||new Map;r.set(i,c.set(n,t))}}function ld(e,t,n){e.clear(),t.clear();for(const r of n){const{source:o,target:s,sourceHandle:i=null,targetHandle:a=null}=r,u={edgeId:r.id,source:o,target:s,sourceHandle:i,targetHandle:a},c=`${o}-${i}--${s}-${a}`,d=`${s}-${a}--${o}-${i}`;Ja("source",u,d,e,o,i),Ja("target",u,c,e,s,a),t.set(r.id,r)}}function ud(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:ud(n,t):!1}function ec(e,t,n){let r=e;do{if(r?.matches?.(t))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function ax(e,t,n,r){const o=new Map;for(const[s,i]of e)if((i.selected||i.id===r)&&(!i.parentId||!ud(i,e))&&(i.draggable||t&&typeof i.draggable>"u")){const a=e.get(s);a&&o.set(s,{id:s,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return o}function ws({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){const o=[];for(const[i,a]of t){const u=n.get(i)?.internals.userNode;u&&o.push({...u,position:a.position,dragging:r})}if(!e)return[o[0],o];const s=n.get(e)?.internals.userNode;return[s?{...s,position:t.get(e)?.position||s.position,dragging:r}:o[0],o]}function cx({dragItems:e,snapGrid:t,x:n,y:r}){const o=e.values().next().value;if(!o)return null;const s={x:n-o.distance.x,y:r-o.distance.y},i=lr(s,t);return{x:i.x-s.x,y:i.y-s.y}}function lx({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:o}){let s={x:null,y:null},i=0,a=new Map,u=!1,c={x:0,y:0},d=null,f=!1,p=null,h=!1,m=!1,x=null;function y({noDragClassName:E,handleSelector:v,domNode:b,isSelectable:N,nodeId:S,nodeClickDistance:R=0}){p=Ae(b);function O({x:$,y:W}){const{nodeLookup:_,nodeExtent:j,snapGrid:M,snapToGrid:F,nodeOrigin:L,onNodeDrag:k,onSelectionDrag:U,onError:Z,updateNodePositions:A}=t();s={x:$,y:W};let G=!1;const T=a.size>1,Y=T&&j?Ks(cr(a)):null,H=T&&F?cx({dragItems:a,snapGrid:M,x:$,y:W}):null;for(const[X,K]of a){if(!_.has(X))continue;let ee={x:$-K.distance.x,y:W-K.distance.y};F&&(ee=H?{x:Math.round(ee.x+H.x),y:Math.round(ee.y+H.y)}:lr(ee,M));let ie=null;if(T&&j&&!K.extent&&Y){const{positionAbsolute:ae}=K.internals,ge=ae.x-Y.x+j[0][0],ve=ae.x+K.measured.width-Y.x2+j[1][0],re=ae.y-Y.y+j[0][1],Ce=ae.y+K.measured.height-Y.y2+j[1][1];ie=[[ge,re],[ve,Ce]]}const{position:ue,positionAbsolute:oe}=Yu({nodeId:X,nextPosition:ee,nodeLookup:_,nodeExtent:ie||j,nodeOrigin:L,onError:Z});G=G||K.position.x!==ue.x||K.position.y!==ue.y,K.position=ue,K.internals.positionAbsolute=oe}if(m=m||G,!!G&&(A(a,!0),x&&(r||k||!S&&U))){const[X,K]=ws({nodeId:S,dragItems:a,nodeLookup:_});r?.(x,a,X,K),k?.(x,X,K),S||U?.(x,K)}}async function D(){if(!d)return;const{transform:$,panBy:W,autoPanSpeed:_,autoPanOnNodeDrag:j}=t();if(!j){u=!1,cancelAnimationFrame(i);return}const[M,F]=Ku(c,d,_);(M!==0||F!==0)&&(s.x=(s.x??0)-M/$[2],s.y=(s.y??0)-F/$[2],await W({x:M,y:F})&&O(s)),i=requestAnimationFrame(D)}function V($){const{nodeLookup:W,multiSelectionActive:_,nodesDraggable:j,transform:M,snapGrid:F,snapToGrid:L,selectNodesOnDrag:k,onNodeDragStart:U,onSelectionDragStart:Z,unselectNodesAndEdges:A}=t();f=!0,(!k||!N)&&!_&&S&&(W.get(S)?.selected||A()),N&&k&&S&&e?.(S);const G=Wn($.sourceEvent,{transform:M,snapGrid:F,snapToGrid:L,containerBounds:d});if(s=G,a=ax(W,j,G,S),a.size>0&&(n||U||!S&&Z)){const[T,Y]=ws({nodeId:S,dragItems:a,nodeLookup:W});n?.($.sourceEvent,a,T,Y),U?.($.sourceEvent,T,Y),S||Z?.($.sourceEvent,Y)}}const I=Ru().clickDistance(R).on("start",$=>{const{domNode:W,nodeDragThreshold:_,transform:j,snapGrid:M,snapToGrid:F}=t();d=W?.getBoundingClientRect()||null,h=!1,m=!1,x=$.sourceEvent,_===0&&V($),s=Wn($.sourceEvent,{transform:j,snapGrid:M,snapToGrid:F,containerBounds:d}),c=Ue($.sourceEvent,d)}).on("drag",$=>{const{autoPanOnNodeDrag:W,transform:_,snapGrid:j,snapToGrid:M,nodeDragThreshold:F,nodeLookup:L}=t(),k=Wn($.sourceEvent,{transform:_,snapGrid:j,snapToGrid:M,containerBounds:d});if(x=$.sourceEvent,($.sourceEvent.type==="touchmove"&&$.sourceEvent.touches.length>1||S&&!L.has(S))&&(h=!0),!h){if(!u&&W&&f&&(u=!0,D()),!f){const U=Ue($.sourceEvent,d),Z=U.x-c.x,A=U.y-c.y;Math.sqrt(Z*Z+A*A)>F&&V($)}(s.x!==k.xSnapped||s.y!==k.ySnapped)&&a&&f&&(c=Ue($.sourceEvent,d),O(k))}}).on("end",$=>{if(!(!f||h)&&(u=!1,f=!1,cancelAnimationFrame(i),a.size>0)){const{nodeLookup:W,updateNodePositions:_,onNodeDragStop:j,onSelectionDragStop:M}=t();if(m&&(_(a,!1),m=!1),o||j||!S&&M){const[F,L]=ws({nodeId:S,dragItems:a,nodeLookup:W,dragging:!1});o?.($.sourceEvent,a,F,L),j?.($.sourceEvent,F,L),S||M?.($.sourceEvent,L)}}}).filter($=>{const W=$.target;return!$.button&&(!E||!ec(W,`.${E}`,b))&&(!v||ec(W,v,b))});p.call(I)}function w(){p?.on(".drag",null)}return{update:y,destroy:w}}function ux(e,t,n){const r=[],o={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())Qn(o,un(s))>0&&r.push(s);return r}const dx=250;function fx(e,t,n,r){let o=[],s=1/0;const i=ux(e,n,t+dx);for(const a of i){const u=[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]];for(const c of u){if(r.nodeId===c.nodeId&&r.type===c.type&&r.id===c.id)continue;const{x:d,y:f}=jt(a,c,c.position,!0),p=Math.sqrt(Math.pow(d-e.x,2)+Math.pow(f-e.y,2));p>t||(p<s?(o=[{...c,x:d,y:f}],s=p):p===s&&o.push({...c,x:d,y:f}))}}if(!o.length)return null;if(o.length>1){const a=r.type==="source"?"target":"source";return o.find(u=>u.type===a)??o[0]}return o[0]}function dd(e,t,n,r,o,s=!1){const i=r.get(e);if(!i)return null;const a=o==="strict"?i.internals.handleBounds?.[t]:[...i.internals.handleBounds?.source??[],...i.internals.handleBounds?.target??[]],u=(n?a?.find(c=>c.id===n):a?.[0])??null;return u&&s?{...u,...jt(i,u,u.position,!0)}:u}function fd(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function px(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const pd=()=>!0;function hx(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:s,isTarget:i,domNode:a,nodeLookup:u,lib:c,autoPanOnConnect:d,flowId:f,panBy:p,cancelConnection:h,onConnectStart:m,onConnect:x,onConnectEnd:y,isValidConnection:w=pd,onReconnectEnd:E,updateConnection:v,getTransform:b,getFromHandle:N,autoPanSpeed:S,dragThreshold:R=1,handleDomNode:O}){const D=ed(e.target);let V=0,I;const{x:$,y:W}=Ue(e),_=fd(s,O),j=a?.getBoundingClientRect();let M=!1;if(!j||!_)return;const F=dd(o,_,r,u,t);if(!F)return;let L=Ue(e,j),k=!1,U=null,Z=!1,A=null;function G(){if(!d||!j)return;const[ue,oe]=Ku(L,j,S);p({x:ue,y:oe}),V=requestAnimationFrame(G)}const T={...F,nodeId:o,type:_,position:F.position},Y=u.get(o);let X={inProgress:!0,isValid:null,from:jt(Y,T,ne.Left,!0),fromHandle:T,fromPosition:T.position,fromNode:Y,to:L,toHandle:null,toPosition:Va[T.position],toNode:null,pointer:L};function K(){M=!0,v(X),m?.(e,{nodeId:o,handleId:r,handleType:_})}R===0&&K();function ee(ue){if(!M){const{x:Ce,y:Ze}=Ue(ue),He=Ce-$,nt=Ze-W;if(!(He*He+nt*nt>R*R))return;K()}if(!N()||!T){ie(ue);return}const oe=b();L=Ue(ue,j),I=fx(ur(L,oe,!1,[1,1]),n,u,T),k||(G(),k=!0);const ae=hd(ue,{handle:I,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:i?"target":"source",isValidConnection:w,doc:D,lib:c,flowId:f,nodeLookup:u});A=ae.handleDomNode,U=ae.connection,Z=px(!!I,ae.isValid);const ge=u.get(o),ve=ge?jt(ge,T,ne.Left,!0):X.from,re={...X,from:ve,isValid:Z,to:ae.toHandle&&Z?oo({x:ae.toHandle.x,y:ae.toHandle.y},oe):L,toHandle:ae.toHandle,toPosition:Z&&ae.toHandle?ae.toHandle.position:Va[T.position],toNode:ae.toHandle?u.get(ae.toHandle.nodeId):null,pointer:L};v(re),X=re}function ie(ue){if(!("touches"in ue&&ue.touches.length>0)){if(M){(I||A)&&U&&Z&&x?.(U);const{inProgress:oe,...ae}=X,ge={...ae,toPosition:X.toHandle?X.toPosition:null};y?.(ue,ge),s&&E?.(ue,ge)}h(),cancelAnimationFrame(V),k=!1,Z=!1,U=null,A=null,D.removeEventListener("mousemove",ee),D.removeEventListener("mouseup",ie),D.removeEventListener("touchmove",ee),D.removeEventListener("touchend",ie)}}D.addEventListener("mousemove",ee),D.addEventListener("mouseup",ie),D.addEventListener("touchmove",ee),D.addEventListener("touchend",ie)}function hd(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:s,doc:i,lib:a,flowId:u,isValidConnection:c=pd,nodeLookup:d}){const f=s==="target",p=t?i.querySelector(`.${a}-flow__handle[data-id="${u}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:h,y:m}=Ue(e),x=i.elementFromPoint(h,m),y=x?.classList.contains(`${a}-flow__handle`)?x:p,w={handleDomNode:y,isValid:!1,connection:null,toHandle:null};if(y){const E=fd(void 0,y),v=y.getAttribute("data-nodeid"),b=y.getAttribute("data-handleid"),N=y.classList.contains("connectable"),S=y.classList.contains("connectableend");if(!v||!E)return w;const R={source:f?v:r,sourceHandle:f?b:o,target:f?r:v,targetHandle:f?o:b};w.connection=R;const D=N&&S&&(n===cn.Strict?f&&E==="source"||!f&&E==="target":v!==r||b!==o);w.isValid=D&&c(R),w.toHandle=dd(v,E,b,d,n,!0)}return w}const ei={onPointerDown:hx,isValid:hd};function gx({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const o=Ae(e);function s({translateExtent:a,width:u,height:c,zoomStep:d=1,pannable:f=!0,zoomable:p=!0,inversePan:h=!1}){const m=v=>{if(v.sourceEvent.type!=="wheel"||!t)return;const b=n(),N=v.sourceEvent.ctrlKey&&Jn()?10:1,S=-v.sourceEvent.deltaY*(v.sourceEvent.deltaMode===1?.05:v.sourceEvent.deltaMode?1:.002)*d,R=b[2]*Math.pow(2,S*N);t.scaleTo(R)};let x=[0,0];const y=v=>{(v.sourceEvent.type==="mousedown"||v.sourceEvent.type==="touchstart")&&(x=[v.sourceEvent.clientX??v.sourceEvent.touches[0].clientX,v.sourceEvent.clientY??v.sourceEvent.touches[0].clientY])},w=v=>{const b=n();if(v.sourceEvent.type!=="mousemove"&&v.sourceEvent.type!=="touchmove"||!t)return;const N=[v.sourceEvent.clientX??v.sourceEvent.touches[0].clientX,v.sourceEvent.clientY??v.sourceEvent.touches[0].clientY],S=[N[0]-x[0],N[1]-x[1]];x=N;const R=r()*Math.max(b[2],Math.log(b[2]))*(h?-1:1),O={x:b[0]-S[0]*R,y:b[1]-S[1]*R},D=[[0,0],[u,c]];t.setViewportConstrained({x:O.x,y:O.y,zoom:b[2]},D,a)},E=Vu().on("start",y).on("zoom",f?w:null).on("zoom.wheel",p?m:null);o.call(E,{})}function i(){o.on("zoom",null)}return{update:s,destroy:i,pointer:Be}}const To=e=>({x:e.x,y:e.y,zoom:e.k}),bs=({x:e,y:t,zoom:n})=>_o.translate(e,t).scale(n),qt=(e,t)=>e.target.closest(`.${t}`),gd=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),mx=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Cs=(e,t=0,n=mx,r=()=>{})=>{const o=typeof t=="number"&&t>0;return o||r(),o?e.transition().duration(t).ease(n).on("end",r):e},md=e=>{const t=e.ctrlKey&&Jn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function yx({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:o,panOnScrollSpeed:s,zoomOnPinch:i,onPanZoomStart:a,onPanZoom:u,onPanZoomEnd:c}){return d=>{if(qt(d,t))return d.ctrlKey&&d.preventDefault(),!1;d.preventDefault(),d.stopImmediatePropagation();const f=n.property("__zoom").k||1;if(d.ctrlKey&&i){const y=Be(d),w=md(d),E=f*Math.pow(2,w);r.scaleTo(n,E,y,d);return}const p=d.deltaMode===1?20:1;let h=o===Mt.Vertical?0:d.deltaX*p,m=o===Mt.Horizontal?0:d.deltaY*p;!Jn()&&d.shiftKey&&o!==Mt.Vertical&&(h=d.deltaY*p,m=0),r.translateBy(n,-(h/f)*s,-(m/f)*s,{internal:!0});const x=To(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(u?.(d,x),e.panScrollTimeout=setTimeout(()=>{c?.(d,x),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,a?.(d,x))}}function vx({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,o){const s=r.type==="wheel",i=!t&&s&&!r.ctrlKey,a=qt(r,e);if(r.ctrlKey&&s&&a&&r.preventDefault(),i||a)return null;r.preventDefault(),n.call(this,r,o)}}function xx({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const o=To(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=o,r.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(r.sourceEvent,o)}}function wx({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:o}){return s=>{e.usedRightMouseButton=!!(n&&gd(t,e.mouseButton??0)),s.sourceEvent?.sync||r([s.transform.x,s.transform.y,s.transform.k]),o&&!s.sourceEvent?.internal&&o?.(s.sourceEvent,To(s.transform))}}function bx({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:o,onPaneContextMenu:s}){return i=>{if(!i.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,s&&gd(t,e.mouseButton??0)&&!e.usedRightMouseButton&&i.sourceEvent&&s(i.sourceEvent),e.usedRightMouseButton=!1,r(!1),o)){const a=To(i.transform);e.prevViewport=a,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o?.(i.sourceEvent,a)},n?150:0)}}}function Cx({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:o,zoomOnDoubleClick:s,userSelectionActive:i,noWheelClassName:a,noPanClassName:u,lib:c,connectionInProgress:d}){return f=>{const p=e||t,h=n&&f.ctrlKey,m=f.type==="wheel";if(f.button===1&&f.type==="mousedown"&&(qt(f,`${c}-flow__node`)||qt(f,`${c}-flow__edge`)))return!0;if(!r&&!p&&!o&&!s&&!n||i||d&&!m||qt(f,a)&&m||qt(f,u)&&(!m||o&&m&&!e)||!n&&f.ctrlKey&&m)return!1;if(!n&&f.type==="touchstart"&&f.touches?.length>1)return f.preventDefault(),!1;if(!p&&!o&&!h&&m||!r&&(f.type==="mousedown"||f.type==="touchstart")||Array.isArray(r)&&!r.includes(f.button)&&f.type==="mousedown")return!1;const x=Array.isArray(r)&&r.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||m)&&x}}function Sx({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:o,onPanZoom:s,onPanZoomStart:i,onPanZoomEnd:a,onDraggingChange:u}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),f=Vu().scaleExtent([t,n]).translateExtent(r),p=Ae(e).call(f);E({x:o.x,y:o.y,zoom:ln(o.zoom,t,n)},[[0,0],[d.width,d.height]],r);const h=p.on("wheel.zoom"),m=p.on("dblclick.zoom");f.wheelDelta(md);function x(I,$){return p?new Promise(W=>{f?.interpolate($?.interpolate==="linear"?Bn:Vr).transform(Cs(p,$?.duration,$?.ease,()=>W(!0)),I)}):Promise.resolve(!1)}function y({noWheelClassName:I,noPanClassName:$,onPaneContextMenu:W,userSelectionActive:_,panOnScroll:j,panOnDrag:M,panOnScrollMode:F,panOnScrollSpeed:L,preventScrolling:k,zoomOnPinch:U,zoomOnScroll:Z,zoomOnDoubleClick:A,zoomActivationKeyPressed:G,lib:T,onTransformChange:Y,connectionInProgress:H,paneClickDistance:X,selectionOnDrag:K}){_&&!c.isZoomingOrPanning&&w();const ee=j&&!G&&!_;f.clickDistance(K?1/0:!Ge(X)||X<0?0:X);const ie=ee?yx({zoomPanValues:c,noWheelClassName:I,d3Selection:p,d3Zoom:f,panOnScrollMode:F,panOnScrollSpeed:L,zoomOnPinch:U,onPanZoomStart:i,onPanZoom:s,onPanZoomEnd:a}):vx({noWheelClassName:I,preventScrolling:k,d3ZoomHandler:h});if(p.on("wheel.zoom",ie,{passive:!1}),!_){const oe=xx({zoomPanValues:c,onDraggingChange:u,onPanZoomStart:i});f.on("start",oe);const ae=wx({zoomPanValues:c,panOnDrag:M,onPaneContextMenu:!!W,onPanZoom:s,onTransformChange:Y});f.on("zoom",ae);const ge=bx({zoomPanValues:c,panOnDrag:M,panOnScroll:j,onPaneContextMenu:W,onPanZoomEnd:a,onDraggingChange:u});f.on("end",ge)}const ue=Cx({zoomActivationKeyPressed:G,panOnDrag:M,zoomOnScroll:Z,panOnScroll:j,zoomOnDoubleClick:A,zoomOnPinch:U,userSelectionActive:_,noPanClassName:$,noWheelClassName:I,lib:T,connectionInProgress:H});f.filter(ue),A?p.on("dblclick.zoom",m):p.on("dblclick.zoom",null)}function w(){f.on("zoom",null)}async function E(I,$,W){const _=bs(I),j=f?.constrain()(_,$,W);return j&&await x(j),new Promise(M=>M(j))}async function v(I,$){const W=bs(I);return await x(W,$),new Promise(_=>_(W))}function b(I){if(p){const $=bs(I),W=p.property("__zoom");(W.k!==I.zoom||W.x!==I.x||W.y!==I.y)&&f?.transform(p,$,null,{sync:!0})}}function N(){const I=p?zu(p.node()):{x:0,y:0,k:1};return{x:I.x,y:I.y,zoom:I.k}}function S(I,$){return p?new Promise(W=>{f?.interpolate($?.interpolate==="linear"?Bn:Vr).scaleTo(Cs(p,$?.duration,$?.ease,()=>W(!0)),I)}):Promise.resolve(!1)}function R(I,$){return p?new Promise(W=>{f?.interpolate($?.interpolate==="linear"?Bn:Vr).scaleBy(Cs(p,$?.duration,$?.ease,()=>W(!0)),I)}):Promise.resolve(!1)}function O(I){f?.scaleExtent(I)}function D(I){f?.translateExtent(I)}function V(I){const $=!Ge(I)||I<0?0:I;f?.clickDistance($)}return{update:y,destroy:w,setViewport:v,setViewportConstrained:E,getViewport:N,scaleTo:S,scaleBy:R,setScaleExtent:O,setTranslateExtent:D,syncViewport:b,setClickDistance:V}}var Lt;(function(e){e.Line="line",e.Handle="handle"})(Lt||(Lt={}));const Ex=["top-left","top-right","bottom-left","bottom-right"],_x=["top","right","bottom","left"];function Nx({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:o,affectsY:s}){const i=e-t,a=n-r,u=[i>0?1:i<0?-1:0,a>0?1:a<0?-1:0];return i&&o&&(u[0]=u[0]*-1),a&&s&&(u[1]=u[1]*-1),u}function tc(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),o=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:o}}function lt(e,t){return Math.max(0,t-e)}function ut(e,t){return Math.max(0,e-t)}function Ir(e,t,n){return Math.max(0,t-e,e-n)}function nc(e,t){return e?!t:t}function Rx(e,t,n,r,o,s,i,a){let{affectsX:u,affectsY:c}=t;const{isHorizontal:d,isVertical:f}=t,p=d&&f,{xSnapped:h,ySnapped:m}=n,{minWidth:x,maxWidth:y,minHeight:w,maxHeight:E}=r,{x:v,y:b,width:N,height:S,aspectRatio:R}=e;let O=Math.floor(d?h-e.pointerX:0),D=Math.floor(f?m-e.pointerY:0);const V=N+(u?-O:O),I=S+(c?-D:D),$=-s[0]*N,W=-s[1]*S;let _=Ir(V,x,y),j=Ir(I,w,E);if(i){let L=0,k=0;u&&O<0?L=lt(v+O+$,i[0][0]):!u&&O>0&&(L=ut(v+V+$,i[1][0])),c&&D<0?k=lt(b+D+W,i[0][1]):!c&&D>0&&(k=ut(b+I+W,i[1][1])),_=Math.max(_,L),j=Math.max(j,k)}if(a){let L=0,k=0;u&&O>0?L=ut(v+O,a[0][0]):!u&&O<0&&(L=lt(v+V,a[1][0])),c&&D>0?k=ut(b+D,a[0][1]):!c&&D<0&&(k=lt(b+I,a[1][1])),_=Math.max(_,L),j=Math.max(j,k)}if(o){if(d){const L=Ir(V/R,w,E)*R;if(_=Math.max(_,L),i){let k=0;!u&&!c||u&&!c&&p?k=ut(b+W+V/R,i[1][1])*R:k=lt(b+W+(u?O:-O)/R,i[0][1])*R,_=Math.max(_,k)}if(a){let k=0;!u&&!c||u&&!c&&p?k=lt(b+V/R,a[1][1])*R:k=ut(b+(u?O:-O)/R,a[0][1])*R,_=Math.max(_,k)}}if(f){const L=Ir(I*R,x,y)/R;if(j=Math.max(j,L),i){let k=0;!u&&!c||c&&!u&&p?k=ut(v+I*R+$,i[1][0])/R:k=lt(v+(c?D:-D)*R+$,i[0][0])/R,j=Math.max(j,k)}if(a){let k=0;!u&&!c||c&&!u&&p?k=lt(v+I*R,a[1][0])/R:k=ut(v+(c?D:-D)*R,a[0][0])/R,j=Math.max(j,k)}}}D=D+(D<0?j:-j),O=O+(O<0?_:-_),o&&(p?V>I*R?D=(nc(u,c)?-O:O)/R:O=(nc(u,c)?-D:D)*R:d?(D=O/R,c=u):(O=D*R,u=c));const M=u?v+O:v,F=c?b+D:b;return{width:N+(u?-O:O),height:S+(c?-D:D),x:s[0]*O*(u?-1:1)+M,y:s[1]*D*(c?-1:1)+F}}const yd={width:0,height:0,x:0,y:0},Tx={...yd,pointerX:0,pointerY:0,aspectRatio:1};function Dx(e){return[[0,0],[e.measured.width,e.measured.height]]}function Ax(e,t,n){const r=t.position.x+e.position.x,o=t.position.y+e.position.y,s=e.measured.width??0,i=e.measured.height??0,a=n[0]*s,u=n[1]*i;return[[r-a,o-u],[r+s-a,o+i-u]]}function Mx({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:o}){const s=Ae(e);let i={controlDirection:tc("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function a({controlPosition:c,boundaries:d,keepAspectRatio:f,resizeDirection:p,onResizeStart:h,onResize:m,onResizeEnd:x,shouldResize:y}){let w={...yd},E={...Tx};i={boundaries:d,resizeDirection:p,keepAspectRatio:f,controlDirection:tc(c)};let v,b=null,N=[],S,R,O,D=!1;const V=Ru().on("start",I=>{const{nodeLookup:$,transform:W,snapGrid:_,snapToGrid:j,nodeOrigin:M,paneDomNode:F}=n();if(v=$.get(t),!v)return;b=F?.getBoundingClientRect()??null;const{xSnapped:L,ySnapped:k}=Wn(I.sourceEvent,{transform:W,snapGrid:_,snapToGrid:j,containerBounds:b});w={width:v.measured.width??0,height:v.measured.height??0,x:v.position.x??0,y:v.position.y??0},E={...w,pointerX:L,pointerY:k,aspectRatio:w.width/w.height},S=void 0,v.parentId&&(v.extent==="parent"||v.expandParent)&&(S=$.get(v.parentId),R=S&&v.extent==="parent"?Dx(S):void 0),N=[],O=void 0;for(const[U,Z]of $)if(Z.parentId===t&&(N.push({id:U,position:{...Z.position},extent:Z.extent}),Z.extent==="parent"||Z.expandParent)){const A=Ax(Z,v,Z.origin??M);O?O=[[Math.min(A[0][0],O[0][0]),Math.min(A[0][1],O[0][1])],[Math.max(A[1][0],O[1][0]),Math.max(A[1][1],O[1][1])]]:O=A}h?.(I,{...w})}).on("drag",I=>{const{transform:$,snapGrid:W,snapToGrid:_,nodeOrigin:j}=n(),M=Wn(I.sourceEvent,{transform:$,snapGrid:W,snapToGrid:_,containerBounds:b}),F=[];if(!v)return;const{x:L,y:k,width:U,height:Z}=w,A={},G=v.origin??j,{width:T,height:Y,x:H,y:X}=Rx(E,i.controlDirection,M,i.boundaries,i.keepAspectRatio,G,R,O),K=T!==U,ee=Y!==Z,ie=H!==L&&K,ue=X!==k&&ee;if(!ie&&!ue&&!K&&!ee)return;if((ie||ue||G[0]===1||G[1]===1)&&(A.x=ie?H:w.x,A.y=ue?X:w.y,w.x=A.x,w.y=A.y,N.length>0)){const ve=H-L,re=X-k;for(const Ce of N)Ce.position={x:Ce.position.x-ve+G[0]*(T-U),y:Ce.position.y-re+G[1]*(Y-Z)},F.push(Ce)}if((K||ee)&&(A.width=K&&(!i.resizeDirection||i.resizeDirection==="horizontal")?T:w.width,A.height=ee&&(!i.resizeDirection||i.resizeDirection==="vertical")?Y:w.height,w.width=A.width,w.height=A.height),S&&v.expandParent){const ve=G[0]*(A.width??0);A.x&&A.x<ve&&(w.x=ve,E.x=E.x-(A.x-ve));const re=G[1]*(A.height??0);A.y&&A.y<re&&(w.y=re,E.y=E.y-(A.y-re))}const oe=Nx({width:w.width,prevWidth:U,height:w.height,prevHeight:Z,affectsX:i.controlDirection.affectsX,affectsY:i.controlDirection.affectsY}),ae={...w,direction:oe};y?.(I,ae)!==!1&&(D=!0,m?.(I,ae),r(A,F))}).on("end",I=>{D&&(x?.(I,{...w}),o?.({...w}),D=!1)});s.call(V)}function u(){s.on(".drag",null)}return{update:a,destroy:u}}var Ss={exports:{}},Es={},_s={exports:{}},Ns={};var rc;function Px(){if(rc)return Ns;rc=1;var e=ii();function t(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,o=e.useEffect,s=e.useLayoutEffect,i=e.useDebugValue;function a(f,p){var h=p(),m=r({inst:{value:h,getSnapshot:p}}),x=m[0].inst,y=m[1];return s(function(){x.value=h,x.getSnapshot=p,u(x)&&y({inst:x})},[f,h,p]),o(function(){return u(x)&&y({inst:x}),f(function(){u(x)&&y({inst:x})})},[f]),i(h),h}function u(f){var p=f.getSnapshot;f=f.value;try{var h=p();return!n(f,h)}catch{return!0}}function c(f,p){return p()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return Ns.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,Ns}var oc;function Ix(){return oc||(oc=1,_s.exports=Px()),_s.exports}var sc;function kx(){if(sc)return Es;sc=1;var e=ii(),t=Ix();function n(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var r=typeof Object.is=="function"?Object.is:n,o=t.useSyncExternalStore,s=e.useRef,i=e.useEffect,a=e.useMemo,u=e.useDebugValue;return Es.useSyncExternalStoreWithSelector=function(c,d,f,p,h){var m=s(null);if(m.current===null){var x={hasValue:!1,value:null};m.current=x}else x=m.current;m=a(function(){function w(S){if(!E){if(E=!0,v=S,S=p(S),h!==void 0&&x.hasValue){var R=x.value;if(h(R,S))return b=R}return b=S}if(R=b,r(v,S))return R;var O=p(S);return h!==void 0&&h(R,O)?(v=S,R):(v=S,b=O)}var E=!1,v,b,N=f===void 0?null:f;return[function(){return w(d())},N===null?void 0:function(){return w(N())}]},[d,f,p,h]);var y=o(c,m[0],m[1]);return i(function(){x.hasValue=!0,x.value=y},[y]),u(y),y},Es}var ic;function Ox(){return ic||(ic=1,Ss.exports=kx()),Ss.exports}var jx=Ox();const Lx=Dp(jx),$x={},ac=e=>{let t;const n=new Set,r=(d,f)=>{const p=typeof d=="function"?d(t):d;if(!Object.is(p,t)){const h=t;t=f??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(m=>m(t,h))}},o=()=>t,u={setState:r,getState:o,getInitialState:()=>c,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{($x?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(r,o,u);return u},Fx=e=>e?ac(e):ac,{useDebugValue:Hx}=le,{useSyncExternalStoreWithSelector:zx}=Lx,Vx=e=>e;function vd(e,t=Vx,n){const r=zx(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Hx(r),r}const cc=(e,t)=>{const n=Fx(e),r=(o,s=t)=>vd(n,o,s);return Object.assign(r,n),r},Bx=(e,t)=>e?cc(e,t):cc;function we(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const Do=l.createContext(null),Wx=Do.Provider,xd=Je.error001();function pe(e,t){const n=l.useContext(Do);if(n===null)throw new Error(xd);return vd(n,e,t)}function xe(){const e=l.useContext(Do);if(e===null)throw new Error(xd);return l.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const lc={display:"none"},Gx={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},wd="react-flow__node-desc",bd="react-flow__edge-desc",Ux="react-flow__aria-live",Xx=e=>e.ariaLiveMessage,Yx=e=>e.ariaLabelConfig;function Zx({rfId:e}){const t=pe(Xx);return g.jsx("div",{id:`${Ux}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Gx,children:t})}function Kx({rfId:e,disableKeyboardA11y:t}){const n=pe(Yx);return g.jsxs(g.Fragment,{children:[g.jsx("div",{id:`${wd}-${e}`,style:lc,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),g.jsx("div",{id:`${bd}-${e}`,style:lc,children:n["edge.a11yDescription.default"]}),!t&&g.jsx(Zx,{rfId:e})]})}const Ao=l.forwardRef(({position:e="top-left",children:t,className:n,style:r,...o},s)=>{const i=`${e}`.split("-");return g.jsx("div",{className:Se(["react-flow__panel",n,...i]),style:r,ref:s,...o,children:t})});Ao.displayName="Panel";function qx({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:g.jsx(Ao,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:g.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Qx=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},kr=e=>e.id;function Jx(e,t){return we(e.selectedNodes.map(kr),t.selectedNodes.map(kr))&&we(e.selectedEdges.map(kr),t.selectedEdges.map(kr))}function ew({onSelectionChange:e}){const t=xe(),{selectedNodes:n,selectedEdges:r}=pe(Qx,Jx);return l.useEffect(()=>{const o={nodes:n,edges:r};e?.(o),t.getState().onSelectionChangeHandlers.forEach(s=>s(o))},[n,r,e]),null}const tw=e=>!!e.onSelectionChangeHandlers;function nw({onSelectionChange:e}){const t=pe(tw);return e||t?g.jsx(ew,{onSelectionChange:e}):null}const Cd=[0,0],rw={x:0,y:0,zoom:1},ow=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],uc=[...ow,"rfId"],sw=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),dc={translateExtent:Kn,nodeOrigin:Cd,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function iw(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:o,setTranslateExtent:s,setNodeExtent:i,reset:a,setDefaultNodesAndEdges:u}=pe(sw,we),c=xe();l.useEffect(()=>(u(e.defaultNodes,e.defaultEdges),()=>{d.current=dc,a()}),[]);const d=l.useRef(dc);return l.useEffect(()=>{for(const f of uc){const p=e[f],h=d.current[f];p!==h&&(typeof e[f]>"u"||(f==="nodes"?t(p):f==="edges"?n(p):f==="minZoom"?r(p):f==="maxZoom"?o(p):f==="translateExtent"?s(p):f==="nodeExtent"?i(p):f==="ariaLabelConfig"?c.setState({ariaLabelConfig:zv(p)}):f==="fitView"?c.setState({fitViewQueued:p}):f==="fitViewOptions"?c.setState({fitViewOptions:p}):c.setState({[f]:p})))}d.current=e},uc.map(f=>e[f])),null}function fc(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function aw(e){const[t,n]=l.useState(e==="system"?null:e);return l.useEffect(()=>{if(e!=="system"){n(e);return}const r=fc(),o=()=>n(r?.matches?"dark":"light");return o(),r?.addEventListener("change",o),()=>{r?.removeEventListener("change",o)}},[e]),t!==null?t:fc()?.matches?"dark":"light"}const pc=typeof document<"u"?document:null;function er(e=null,t={target:pc,actInsideInputWithModifier:!0}){const[n,r]=l.useState(!1),o=l.useRef(!1),s=l.useRef(new Set([])),[i,a]=l.useMemo(()=>{if(e!==null){const c=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.replace("+",`
`).replace(`

`,`
+`).split(`
`)),d=c.reduce((f,p)=>f.concat(...p),[]);return[c,d]}return[[],[]]},[e]);return l.useEffect(()=>{const u=t?.target??pc,c=t?.actInsideInputWithModifier??!0;if(e!==null){const d=h=>{if(o.current=h.ctrlKey||h.metaKey||h.shiftKey||h.altKey,(!o.current||o.current&&!c)&&td(h))return!1;const x=gc(h.code,a);if(s.current.add(h[x]),hc(i,s.current,!1)){const y=h.composedPath?.()?.[0]||h.target,w=y?.nodeName==="BUTTON"||y?.nodeName==="A";t.preventDefault!==!1&&(o.current||!w)&&h.preventDefault(),r(!0)}},f=h=>{const m=gc(h.code,a);hc(i,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(h[m]),h.key==="Meta"&&s.current.clear(),o.current=!1},p=()=>{s.current.clear(),r(!1)};return u?.addEventListener("keydown",d),u?.addEventListener("keyup",f),window.addEventListener("blur",p),window.addEventListener("contextmenu",p),()=>{u?.removeEventListener("keydown",d),u?.removeEventListener("keyup",f),window.removeEventListener("blur",p),window.removeEventListener("contextmenu",p)}}},[e,r]),n}function hc(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function gc(e,t){return t.includes(e)?"code":"key"}const cw=()=>{const e=xe();return l.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,o,s],panZoom:i}=e.getState();return i?(await i.setViewport({x:t.x??r,y:t.y??o,zoom:t.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:o,minZoom:s,maxZoom:i,panZoom:a}=e.getState(),u=ki(t,r,o,s,i,n?.padding??.1);return a?(await a.setViewport(u,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:o,snapToGrid:s,domNode:i}=e.getState();if(!i)return t;const{x:a,y:u}=i.getBoundingClientRect(),c={x:t.x-a,y:t.y-u},d=n.snapGrid??o,f=n.snapToGrid??s;return ur(c,r,f,d)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:o,y:s}=r.getBoundingClientRect(),i=oo(t,n);return{x:i.x+o,y:i.y+s}}}),[])};function Sd(e,t){const n=[],r=new Map,o=[];for(const s of e)if(s.type==="add"){o.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const i=r.get(s.id);i?i.push(s):r.set(s.id,[s])}for(const s of t){const i=r.get(s.id);if(!i){n.push(s);continue}if(i[0].type==="remove")continue;if(i[0].type==="replace"){n.push({...i[0].item});continue}const a={...s};for(const u of i)lw(u,a);n.push(a)}return o.length&&o.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function lw(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function Ed(e,t){return Sd(e,t)}function _d(e,t){return Sd(e,t)}function Et(e,t){return{id:e,type:"select",selected:t}}function Qt(e,t=new Set,n=!1){const r=[];for(const[o,s]of e){const i=t.has(o);!(s.selected===void 0&&!i)&&s.selected!==i&&(n&&(s.selected=i),r.push(Et(s.id,i)))}return r}function mc({items:e=[],lookup:t}){const n=[],r=new Map(e.map(o=>[o.id,o]));for(const[o,s]of e.entries()){const i=t.get(s.id),a=i?.internals?.userNode??i;a!==void 0&&a!==s&&n.push({id:s.id,item:s,type:"replace"}),a===void 0&&n.push({item:s,type:"add",index:o})}for(const[o]of t)r.get(o)===void 0&&n.push({id:o,type:"remove"});return n}function yc(e){return{id:e.id,type:"remove"}}const vc=e=>Mv(e),uw=e=>Xu(e);function Nd(e){return l.forwardRef(e)}const dw=typeof window<"u"?l.useLayoutEffect:l.useEffect;function xc(e){const[t,n]=l.useState(BigInt(0)),[r]=l.useState(()=>fw(()=>n(o=>o+BigInt(1))));return dw(()=>{const o=r.get();o.length&&(e(o),r.reset())},[t]),r}function fw(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const Rd=l.createContext(null);function pw({children:e}){const t=xe(),n=l.useCallback(a=>{const{nodes:u=[],setNodes:c,hasDefaultNodes:d,onNodesChange:f,nodeLookup:p,fitViewQueued:h,onNodesChangeMiddlewareMap:m}=t.getState();let x=u;for(const w of a)x=typeof w=="function"?w(x):w;let y=mc({items:x,lookup:p});for(const w of m.values())y=w(y);d&&c(x),y.length>0?f?.(y):h&&window.requestAnimationFrame(()=>{const{fitViewQueued:w,nodes:E,setNodes:v}=t.getState();w&&v(E)})},[]),r=xc(n),o=l.useCallback(a=>{const{edges:u=[],setEdges:c,hasDefaultEdges:d,onEdgesChange:f,edgeLookup:p}=t.getState();let h=u;for(const m of a)h=typeof m=="function"?m(h):m;d?c(h):f&&f(mc({items:h,lookup:p}))},[]),s=xc(o),i=l.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return g.jsx(Rd.Provider,{value:i,children:e})}function hw(){const e=l.useContext(Rd);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const gw=e=>!!e.panZoom;function Mo(){const e=cw(),t=xe(),n=hw(),r=pe(gw),o=l.useMemo(()=>{const s=f=>t.getState().nodeLookup.get(f),i=f=>{n.nodeQueue.push(f)},a=f=>{n.edgeQueue.push(f)},u=f=>{const{nodeLookup:p,nodeOrigin:h}=t.getState(),m=vc(f)?f:p.get(f.id),x=m.parentId?Ju(m.position,m.measured,m.parentId,p,h):m.position,y={...m,position:x,width:m.measured?.width??m.width,height:m.measured?.height??m.height};return un(y)},c=(f,p,h={replace:!1})=>{i(m=>m.map(x=>{if(x.id===f){const y=typeof p=="function"?p(x):p;return h.replace&&vc(y)?y:{...x,...y}}return x}))},d=(f,p,h={replace:!1})=>{a(m=>m.map(x=>{if(x.id===f){const y=typeof p=="function"?p(x):p;return h.replace&&uw(y)?y:{...x,...y}}return x}))};return{getNodes:()=>t.getState().nodes.map(f=>({...f})),getNode:f=>s(f)?.internals.userNode,getInternalNode:s,getEdges:()=>{const{edges:f=[]}=t.getState();return f.map(p=>({...p}))},getEdge:f=>t.getState().edgeLookup.get(f),setNodes:i,setEdges:a,addNodes:f=>{const p=Array.isArray(f)?f:[f];n.nodeQueue.push(h=>[...h,...p])},addEdges:f=>{const p=Array.isArray(f)?f:[f];n.edgeQueue.push(h=>[...h,...p])},toObject:()=>{const{nodes:f=[],edges:p=[],transform:h}=t.getState(),[m,x,y]=h;return{nodes:f.map(w=>({...w})),edges:p.map(w=>({...w})),viewport:{x:m,y:x,zoom:y}}},deleteElements:async({nodes:f=[],edges:p=[]})=>{const{nodes:h,edges:m,onNodesDelete:x,onEdgesDelete:y,triggerNodeChanges:w,triggerEdgeChanges:E,onDelete:v,onBeforeDelete:b}=t.getState(),{nodes:N,edges:S}=await jv({nodesToRemove:f,edgesToRemove:p,nodes:h,edges:m,onBeforeDelete:b}),R=S.length>0,O=N.length>0;if(R){const D=S.map(yc);y?.(S),E(D)}if(O){const D=N.map(yc);x?.(N),w(D)}return(O||R)&&v?.({nodes:N,edges:S}),{deletedNodes:N,deletedEdges:S}},getIntersectingNodes:(f,p=!0,h)=>{const m=Wa(f),x=m?f:u(f),y=h!==void 0;return x?(h||t.getState().nodes).filter(w=>{const E=t.getState().nodeLookup.get(w.id);if(E&&!m&&(w.id===f.id||!E.internals.positionAbsolute))return!1;const v=un(y?w:E),b=Qn(v,x);return p&&b>0||b>=v.width*v.height||b>=x.width*x.height}):[]},isNodeIntersecting:(f,p,h=!0)=>{const x=Wa(f)?f:u(f);if(!x)return!1;const y=Qn(x,p);return h&&y>0||y>=p.width*p.height||y>=x.width*x.height},updateNode:c,updateNodeData:(f,p,h={replace:!1})=>{c(f,m=>{const x=typeof p=="function"?p(m):p;return h.replace?{...m,data:x}:{...m,data:{...m.data,...x}}},h)},updateEdge:d,updateEdgeData:(f,p,h={replace:!1})=>{d(f,m=>{const x=typeof p=="function"?p(m):p;return h.replace?{...m,data:x}:{...m,data:{...m.data,...x}}},h)},getNodesBounds:f=>{const{nodeLookup:p,nodeOrigin:h}=t.getState();return Pv(f,{nodeLookup:p,nodeOrigin:h})},getHandleConnections:({type:f,id:p,nodeId:h})=>Array.from(t.getState().connectionLookup.get(`${h}-${f}${p?`-${p}`:""}`)?.values()??[]),getNodeConnections:({type:f,handleId:p,nodeId:h})=>Array.from(t.getState().connectionLookup.get(`${h}${f?p?`-${f}-${p}`:`-${f}`:""}`)?.values()??[]),fitView:async f=>{const p=t.getState().fitViewResolver??Hv();return t.setState({fitViewQueued:!0,fitViewOptions:f,fitViewResolver:p}),n.nodeQueue.push(h=>[...h]),p.promise}}},[]);return l.useMemo(()=>({...o,...e,viewportInitialized:r}),[r])}const wc=e=>e.selected,mw=typeof window<"u"?window:void 0;function yw({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=xe(),{deleteElements:r}=Mo(),o=er(e,{actInsideInputWithModifier:!1}),s=er(t,{target:mw});l.useEffect(()=>{if(o){const{edges:i,nodes:a}=n.getState();r({nodes:a.filter(wc),edges:i.filter(wc)}),n.setState({nodesSelectionActive:!1})}},[o]),l.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function vw(e){const t=xe();l.useEffect(()=>{const n=()=>{if(!e.current||!(e.current.checkVisibility?.()??!0))return!1;const r=Oi(e.current);(r.height===0||r.width===0)&&t.getState().onError?.("004",Je.error004()),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const Po={position:"absolute",width:"100%",height:"100%",top:0,left:0},xw=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function ww({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:o=.5,panOnScrollMode:s=Mt.Free,zoomOnDoubleClick:i=!0,panOnDrag:a=!0,defaultViewport:u,translateExtent:c,minZoom:d,maxZoom:f,zoomActivationKeyCode:p,preventScrolling:h=!0,children:m,noWheelClassName:x,noPanClassName:y,onViewportChange:w,isControlledViewport:E,paneClickDistance:v,selectionOnDrag:b}){const N=xe(),S=l.useRef(null),{userSelectionActive:R,lib:O,connectionInProgress:D}=pe(xw,we),V=er(p),I=l.useRef();vw(S);const $=l.useCallback(W=>{w?.({x:W[0],y:W[1],zoom:W[2]}),E||N.setState({transform:W})},[w,E]);return l.useEffect(()=>{if(S.current){I.current=Sx({domNode:S.current,minZoom:d,maxZoom:f,translateExtent:c,viewport:u,onDraggingChange:M=>N.setState({paneDragging:M}),onPanZoomStart:(M,F)=>{const{onViewportChangeStart:L,onMoveStart:k}=N.getState();k?.(M,F),L?.(F)},onPanZoom:(M,F)=>{const{onViewportChange:L,onMove:k}=N.getState();k?.(M,F),L?.(F)},onPanZoomEnd:(M,F)=>{const{onViewportChangeEnd:L,onMoveEnd:k}=N.getState();k?.(M,F),L?.(F)}});const{x:W,y:_,zoom:j}=I.current.getViewport();return N.setState({panZoom:I.current,transform:[W,_,j],domNode:S.current.closest(".react-flow")}),()=>{I.current?.destroy()}}},[]),l.useEffect(()=>{I.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:o,panOnScrollMode:s,zoomOnDoubleClick:i,panOnDrag:a,zoomActivationKeyPressed:V,preventScrolling:h,noPanClassName:y,userSelectionActive:R,noWheelClassName:x,lib:O,onTransformChange:$,connectionInProgress:D,selectionOnDrag:b,paneClickDistance:v})},[e,t,n,r,o,s,i,a,V,h,y,R,x,O,$,D,b,v]),g.jsx("div",{className:"react-flow__renderer",ref:S,style:Po,children:m})}const bw=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Cw(){const{userSelectionActive:e,userSelectionRect:t}=pe(bw,we);return e&&t?g.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Rs=(e,t)=>n=>{n.target===t.current&&e?.(n)},Sw=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function Ew({isSelecting:e,selectionKeyPressed:t,selectionMode:n=qn.Full,panOnDrag:r,paneClickDistance:o,selectionOnDrag:s,onSelectionStart:i,onSelectionEnd:a,onPaneClick:u,onPaneContextMenu:c,onPaneScroll:d,onPaneMouseEnter:f,onPaneMouseMove:p,onPaneMouseLeave:h,children:m}){const x=xe(),{userSelectionActive:y,elementsSelectable:w,dragging:E,connectionInProgress:v}=pe(Sw,we),b=w&&(e||y),N=l.useRef(null),S=l.useRef(),R=l.useRef(new Set),O=l.useRef(new Set),D=l.useRef(!1),V=L=>{if(D.current||v){D.current=!1;return}u?.(L),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},I=L=>{if(Array.isArray(r)&&r?.includes(2)){L.preventDefault();return}c?.(L)},$=d?L=>d(L):void 0,W=L=>{D.current&&(L.stopPropagation(),D.current=!1)},_=L=>{const{domNode:k}=x.getState();if(S.current=k?.getBoundingClientRect(),!S.current)return;const U=L.target===N.current;if(!U&&!!L.target.closest(".nokey")||!e||!(s&&U||t)||L.button!==0||!L.isPrimary)return;L.target?.setPointerCapture?.(L.pointerId),D.current=!1;const{x:G,y:T}=Ue(L.nativeEvent,S.current);x.setState({userSelectionRect:{width:0,height:0,startX:G,startY:T,x:G,y:T}}),U||(L.stopPropagation(),L.preventDefault())},j=L=>{const{userSelectionRect:k,transform:U,nodeLookup:Z,edgeLookup:A,connectionLookup:G,triggerNodeChanges:T,triggerEdgeChanges:Y,defaultEdgeOptions:H,resetSelectedElements:X}=x.getState();if(!S.current||!k)return;const{x:K,y:ee}=Ue(L.nativeEvent,S.current),{startX:ie,startY:ue}=k;if(!D.current){const re=t?0:o;if(Math.hypot(K-ie,ee-ue)<=re)return;X(),i?.(L)}D.current=!0;const oe={startX:ie,startY:ue,x:K<ie?K:ie,y:ee<ue?ee:ue,width:Math.abs(K-ie),height:Math.abs(ee-ue)},ae=R.current,ge=O.current;R.current=new Set(Ii(Z,oe,U,n===qn.Partial,!0).map(re=>re.id)),O.current=new Set;const ve=H?.selectable??!0;for(const re of R.current){const Ce=G.get(re);if(Ce)for(const{edgeId:Ze}of Ce.values()){const He=A.get(Ze);He&&(He.selectable??ve)&&O.current.add(Ze)}}if(!Ga(ae,R.current)){const re=Qt(Z,R.current,!0);T(re)}if(!Ga(ge,O.current)){const re=Qt(A,O.current);Y(re)}x.setState({userSelectionRect:oe,userSelectionActive:!0,nodesSelectionActive:!1})},M=L=>{L.button===0&&(L.target?.releasePointerCapture?.(L.pointerId),!y&&L.target===N.current&&x.getState().userSelectionRect&&V?.(L),x.setState({userSelectionActive:!1,userSelectionRect:null}),D.current&&(a?.(L),x.setState({nodesSelectionActive:R.current.size>0})))},F=r===!0||Array.isArray(r)&&r.includes(0);return g.jsxs("div",{className:Se(["react-flow__pane",{draggable:F,dragging:E,selection:e}]),onClick:b?void 0:Rs(V,N),onContextMenu:Rs(I,N),onWheel:Rs($,N),onPointerEnter:b?void 0:f,onPointerMove:b?j:p,onPointerUp:b?M:void 0,onPointerDownCapture:b?_:void 0,onClickCapture:b?W:void 0,onPointerLeave:h,ref:N,style:Po,children:[m,g.jsx(Cw,{})]})}function ti({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:s,multiSelectionActive:i,nodeLookup:a,onError:u}=t.getState(),c=a.get(e);if(!c){u?.("012",Je.error012(e));return}t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&i)&&(s({nodes:[c],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):o([e])}function Td({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:s,nodeClickDistance:i}){const a=xe(),[u,c]=l.useState(!1),d=l.useRef();return l.useEffect(()=>{d.current=lx({getStoreItems:()=>a.getState(),onNodeMouseDown:f=>{ti({id:f,store:a,nodeRef:e})},onDragStart:()=>{c(!0)},onDragStop:()=>{c(!1)}})},[]),l.useEffect(()=>{if(t)d.current?.destroy();else if(e.current)return d.current?.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:s,nodeId:o,nodeClickDistance:i}),()=>{d.current?.destroy()}},[n,r,t,s,e,o]),u}const _w=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function Dd(){const e=xe();return l.useCallback(n=>{const{nodeExtent:r,snapToGrid:o,snapGrid:s,nodesDraggable:i,onError:a,updateNodePositions:u,nodeLookup:c,nodeOrigin:d}=e.getState(),f=new Map,p=_w(i),h=o?s[0]:5,m=o?s[1]:5,x=n.direction.x*h*n.factor,y=n.direction.y*m*n.factor;for(const[,w]of c){if(!p(w))continue;let E={x:w.internals.positionAbsolute.x+x,y:w.internals.positionAbsolute.y+y};o&&(E=lr(E,s));const{position:v,positionAbsolute:b}=Yu({nodeId:w.id,nextPosition:E,nodeLookup:c,nodeExtent:r,nodeOrigin:d,onError:a});w.position=v,w.internals.positionAbsolute=b,f.set(w.id,w)}u(f)},[])}const zi=l.createContext(null),Nw=zi.Provider;zi.Consumer;const Ad=()=>l.useContext(zi),Rw=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Tw=(e,t,n)=>r=>{const{connectionClickStartHandle:o,connectionMode:s,connection:i}=r,{fromHandle:a,toHandle:u,isValid:c}=i,d=u?.nodeId===e&&u?.id===t&&u?.type===n;return{connectingFrom:a?.nodeId===e&&a?.id===t&&a?.type===n,connectingTo:d,clickConnecting:o?.nodeId===e&&o?.id===t&&o?.type===n,isPossibleEndHandle:s===cn.Strict?a?.type!==n:e!==a?.nodeId||t!==a?.id,connectionInProcess:!!a,clickConnectionInProcess:!!o,valid:d&&c}};function Dw({type:e="source",position:t=ne.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:s=!0,id:i,onConnect:a,children:u,className:c,onMouseDown:d,onTouchStart:f,...p},h){const m=i||null,x=e==="target",y=xe(),w=Ad(),{connectOnClick:E,noPanClassName:v,rfId:b}=pe(Rw,we),{connectingFrom:N,connectingTo:S,clickConnecting:R,isPossibleEndHandle:O,connectionInProcess:D,clickConnectionInProcess:V,valid:I}=pe(Tw(w,m,e),we);w||y.getState().onError?.("010",Je.error010());const $=j=>{const{defaultEdgeOptions:M,onConnect:F,hasDefaultEdges:L}=y.getState(),k={...M,...j};if(L){const{edges:U,setEdges:Z}=y.getState();Z(Xv(k,U))}F?.(k),a?.(k)},W=j=>{if(!w)return;const M=nd(j.nativeEvent);if(o&&(M&&j.button===0||!M)){const F=y.getState();ei.onPointerDown(j.nativeEvent,{handleDomNode:j.currentTarget,autoPanOnConnect:F.autoPanOnConnect,connectionMode:F.connectionMode,connectionRadius:F.connectionRadius,domNode:F.domNode,nodeLookup:F.nodeLookup,lib:F.lib,isTarget:x,handleId:m,nodeId:w,flowId:F.rfId,panBy:F.panBy,cancelConnection:F.cancelConnection,onConnectStart:F.onConnectStart,onConnectEnd:F.onConnectEnd,updateConnection:F.updateConnection,onConnect:$,isValidConnection:n||F.isValidConnection,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle,autoPanSpeed:F.autoPanSpeed,dragThreshold:F.connectionDragThreshold})}M?d?.(j):f?.(j)},_=j=>{const{onClickConnectStart:M,onClickConnectEnd:F,connectionClickStartHandle:L,connectionMode:k,isValidConnection:U,lib:Z,rfId:A,nodeLookup:G,connection:T}=y.getState();if(!w||!L&&!o)return;if(!L){M?.(j.nativeEvent,{nodeId:w,handleId:m,handleType:e}),y.setState({connectionClickStartHandle:{nodeId:w,type:e,id:m}});return}const Y=ed(j.target),H=n||U,{connection:X,isValid:K}=ei.isValid(j.nativeEvent,{handle:{nodeId:w,id:m,type:e},connectionMode:k,fromNodeId:L.nodeId,fromHandleId:L.id||null,fromType:L.type,isValidConnection:H,flowId:A,doc:Y,lib:Z,nodeLookup:G});K&&X&&$(X);const ee=structuredClone(T);delete ee.inProgress,ee.toPosition=ee.toHandle?ee.toHandle.position:null,F?.(j,ee),y.setState({connectionClickStartHandle:null})};return g.jsx("div",{"data-handleid":m,"data-nodeid":w,"data-handlepos":t,"data-id":`${b}-${w}-${m}-${e}`,className:Se(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",v,c,{source:!x,target:x,connectable:r,connectablestart:o,connectableend:s,clickconnecting:R,connectingfrom:N,connectingto:S,valid:I,connectionindicator:r&&(!D||O)&&(D||V?s:o)}]),onMouseDown:W,onTouchStart:W,onClick:E?_:void 0,ref:h,...p,children:u})}const so=l.memo(Nd(Dw));function Aw({data:e,isConnectable:t,sourcePosition:n=ne.Bottom}){return g.jsxs(g.Fragment,{children:[e?.label,g.jsx(so,{type:"source",position:n,isConnectable:t})]})}function Mw({data:e,isConnectable:t,targetPosition:n=ne.Top,sourcePosition:r=ne.Bottom}){return g.jsxs(g.Fragment,{children:[g.jsx(so,{type:"target",position:n,isConnectable:t}),e?.label,g.jsx(so,{type:"source",position:r,isConnectable:t})]})}function Pw(){return null}function Iw({data:e,isConnectable:t,targetPosition:n=ne.Top}){return g.jsxs(g.Fragment,{children:[g.jsx(so,{type:"target",position:n,isConnectable:t}),e?.label]})}const io={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},bc={input:Aw,default:Mw,output:Iw,group:Pw};function kw(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const Ow=e=>{const{width:t,height:n,x:r,y:o}=cr(e.nodeLookup,{filter:s=>!!s.selected});return{width:Ge(t)?t:null,height:Ge(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${o}px)`}};function jw({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=xe(),{width:o,height:s,transformString:i,userSelectionActive:a}=pe(Ow,we),u=Dd(),c=l.useRef(null);if(l.useEffect(()=>{n||c.current?.focus({preventScroll:!0})},[n]),Td({nodeRef:c}),a||!o||!s)return null;const d=e?p=>{const h=r.getState().nodes.filter(m=>m.selected);e(p,h)}:void 0,f=p=>{Object.prototype.hasOwnProperty.call(io,p.key)&&(p.preventDefault(),u({direction:io[p.key],factor:p.shiftKey?4:1}))};return g.jsx("div",{className:Se(["react-flow__nodesselection","react-flow__container",t]),style:{transform:i},children:g.jsx("div",{ref:c,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:o,height:s}})})}const Cc=typeof window<"u"?window:void 0,Lw=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Md({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:s,onPaneScroll:i,paneClickDistance:a,deleteKeyCode:u,selectionKeyCode:c,selectionOnDrag:d,selectionMode:f,onSelectionStart:p,onSelectionEnd:h,multiSelectionKeyCode:m,panActivationKeyCode:x,zoomActivationKeyCode:y,elementsSelectable:w,zoomOnScroll:E,zoomOnPinch:v,panOnScroll:b,panOnScrollSpeed:N,panOnScrollMode:S,zoomOnDoubleClick:R,panOnDrag:O,defaultViewport:D,translateExtent:V,minZoom:I,maxZoom:$,preventScrolling:W,onSelectionContextMenu:_,noWheelClassName:j,noPanClassName:M,disableKeyboardA11y:F,onViewportChange:L,isControlledViewport:k}){const{nodesSelectionActive:U,userSelectionActive:Z}=pe(Lw,we),A=er(c,{target:Cc}),G=er(x,{target:Cc}),T=G||O,Y=G||b,H=d&&T!==!0,X=A||Z||H;return yw({deleteKeyCode:u,multiSelectionKeyCode:m}),g.jsx(ww,{onPaneContextMenu:s,elementsSelectable:w,zoomOnScroll:E,zoomOnPinch:v,panOnScroll:Y,panOnScrollSpeed:N,panOnScrollMode:S,zoomOnDoubleClick:R,panOnDrag:!A&&T,defaultViewport:D,translateExtent:V,minZoom:I,maxZoom:$,zoomActivationKeyCode:y,preventScrolling:W,noWheelClassName:j,noPanClassName:M,onViewportChange:L,isControlledViewport:k,paneClickDistance:a,selectionOnDrag:H,children:g.jsxs(Ew,{onSelectionStart:p,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:T,isSelecting:!!X,selectionMode:f,selectionKeyPressed:A,paneClickDistance:a,selectionOnDrag:H,children:[e,U&&g.jsx(jw,{onSelectionContextMenu:_,noPanClassName:M,disableKeyboardA11y:F})]})})}Md.displayName="FlowRenderer";const $w=l.memo(Md),Fw=e=>t=>e?Ii(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function Hw(e){return pe(l.useCallback(Fw(e),[e]),we)}const zw=e=>e.updateNodeInternals;function Vw(){const e=pe(zw),[t]=l.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(o=>{const s=o.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:o.target,force:!0})}),e(r)}));return l.useEffect(()=>()=>{t?.disconnect()},[t]),t}function Bw({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const o=xe(),s=l.useRef(null),i=l.useRef(null),a=l.useRef(e.sourcePosition),u=l.useRef(e.targetPosition),c=l.useRef(t),d=n&&!!e.internals.handleBounds;return l.useEffect(()=>{s.current&&!e.hidden&&(!d||i.current!==s.current)&&(i.current&&r?.unobserve(i.current),r?.observe(s.current),i.current=s.current)},[d,e.hidden]),l.useEffect(()=>()=>{i.current&&(r?.unobserve(i.current),i.current=null)},[]),l.useEffect(()=>{if(s.current){const f=c.current!==t,p=a.current!==e.sourcePosition,h=u.current!==e.targetPosition;(f||p||h)&&(c.current=t,a.current=e.sourcePosition,u.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),s}function Ww({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:o,onContextMenu:s,onDoubleClick:i,nodesDraggable:a,elementsSelectable:u,nodesConnectable:c,nodesFocusable:d,resizeObserver:f,noDragClassName:p,noPanClassName:h,disableKeyboardA11y:m,rfId:x,nodeTypes:y,nodeClickDistance:w,onError:E}){const{node:v,internals:b,isParent:N}=pe(K=>{const ee=K.nodeLookup.get(e),ie=K.parentLookup.has(e);return{node:ee,internals:ee.internals,isParent:ie}},we);let S=v.type||"default",R=y?.[S]||bc[S];R===void 0&&(E?.("003",Je.error003(S)),S="default",R=y?.default||bc.default);const O=!!(v.draggable||a&&typeof v.draggable>"u"),D=!!(v.selectable||u&&typeof v.selectable>"u"),V=!!(v.connectable||c&&typeof v.connectable>"u"),I=!!(v.focusable||d&&typeof v.focusable>"u"),$=xe(),W=Qu(v),_=Bw({node:v,nodeType:S,hasDimensions:W,resizeObserver:f}),j=Td({nodeRef:_,disabled:v.hidden||!O,noDragClassName:p,handleSelector:v.dragHandle,nodeId:e,isSelectable:D,nodeClickDistance:w}),M=Dd();if(v.hidden)return null;const F=ct(v),L=kw(v),k=D||O||t||n||r||o,U=n?K=>n(K,{...b.userNode}):void 0,Z=r?K=>r(K,{...b.userNode}):void 0,A=o?K=>o(K,{...b.userNode}):void 0,G=s?K=>s(K,{...b.userNode}):void 0,T=i?K=>i(K,{...b.userNode}):void 0,Y=K=>{const{selectNodesOnDrag:ee,nodeDragThreshold:ie}=$.getState();D&&(!ee||!O||ie>0)&&ti({id:e,store:$,nodeRef:_}),t&&t(K,{...b.userNode})},H=K=>{if(!(td(K.nativeEvent)||m)){if(Bu.includes(K.key)&&D){const ee=K.key==="Escape";ti({id:e,store:$,unselect:ee,nodeRef:_})}else if(O&&v.selected&&Object.prototype.hasOwnProperty.call(io,K.key)){K.preventDefault();const{ariaLabelConfig:ee}=$.getState();$.setState({ariaLiveMessage:ee["node.a11yDescription.ariaLiveMessage"]({direction:K.key.replace("Arrow","").toLowerCase(),x:~~b.positionAbsolute.x,y:~~b.positionAbsolute.y})}),M({direction:io[K.key],factor:K.shiftKey?4:1})}}},X=()=>{if(m||!_.current?.matches(":focus-visible"))return;const{transform:K,width:ee,height:ie,autoPanOnNodeFocus:ue,setCenter:oe}=$.getState();if(!ue)return;Ii(new Map([[e,v]]),{x:0,y:0,width:ee,height:ie},K,!0).length>0||oe(v.position.x+F.width/2,v.position.y+F.height/2,{zoom:K[2]})};return g.jsx("div",{className:Se(["react-flow__node",`react-flow__node-${S}`,{[h]:O},v.className,{selected:v.selected,selectable:D,parent:N,draggable:O,dragging:j}]),ref:_,style:{zIndex:b.z,transform:`translate(${b.positionAbsolute.x}px,${b.positionAbsolute.y}px)`,pointerEvents:k?"all":"none",visibility:W?"visible":"hidden",...v.style,...L},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:U,onMouseMove:Z,onMouseLeave:A,onContextMenu:G,onClick:Y,onDoubleClick:T,onKeyDown:I?H:void 0,tabIndex:I?0:void 0,onFocus:I?X:void 0,role:v.ariaRole??(I?"group":void 0),"aria-roledescription":"node","aria-describedby":m?void 0:`${wd}-${x}`,"aria-label":v.ariaLabel,...v.domAttributes,children:g.jsx(Nw,{value:e,children:g.jsx(R,{id:e,data:v.data,type:S,positionAbsoluteX:b.positionAbsolute.x,positionAbsoluteY:b.positionAbsolute.y,selected:v.selected??!1,selectable:D,draggable:O,deletable:v.deletable??!0,isConnectable:V,sourcePosition:v.sourcePosition,targetPosition:v.targetPosition,dragging:j,dragHandle:v.dragHandle,zIndex:b.z,parentId:v.parentId,...F})})})}var Gw=l.memo(Ww);const Uw=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function Pd(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,onError:s}=pe(Uw,we),i=Hw(e.onlyRenderVisibleElements),a=Vw();return g.jsx("div",{className:"react-flow__nodes",style:Po,children:i.map(u=>g.jsx(Gw,{id:u,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:a,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:s},u))})}Pd.displayName="NodeRenderer";const Xw=l.memo(Pd);function Yw(e){return pe(l.useCallback(n=>{if(!e)return n.edges.map(o=>o.id);const r=[];if(n.width&&n.height)for(const o of n.edges){const s=n.nodeLookup.get(o.source),i=n.nodeLookup.get(o.target);s&&i&&Wv({sourceNode:s,targetNode:i,width:n.width,height:n.height,transform:n.transform})&&r.push(o.id)}return r},[e]),we)}const Zw=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return g.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},Kw=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return g.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},Sc={[no.Arrow]:Zw,[no.ArrowClosed]:Kw};function qw(e){const t=xe();return l.useMemo(()=>Object.prototype.hasOwnProperty.call(Sc,e)?Sc[e]:(t.getState().onError?.("009",Je.error009(e)),null),[e])}const Qw=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:a="auto-start-reverse"})=>{const u=qw(t);return u?g.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0",children:g.jsx(u,{color:n,strokeWidth:i})}):null},Id=({defaultColor:e,rfId:t})=>{const n=pe(s=>s.edges),r=pe(s=>s.defaultEdgeOptions),o=l.useMemo(()=>Qv(n,{id:t,defaultColor:e,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,t,e]);return o.length?g.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:g.jsx("defs",{children:o.map(s=>g.jsx(Qw,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};Id.displayName="MarkerDefinitions";var Jw=l.memo(Id);function kd({x:e,y:t,label:n,labelStyle:r,labelShowBg:o=!0,labelBgStyle:s,labelBgPadding:i=[2,4],labelBgBorderRadius:a=2,children:u,className:c,...d}){const[f,p]=l.useState({x:1,y:0,width:0,height:0}),h=Se(["react-flow__edge-textwrapper",c]),m=l.useRef(null);return l.useEffect(()=>{if(m.current){const x=m.current.getBBox();p({x:x.x,y:x.y,width:x.width,height:x.height})}},[n]),n?g.jsxs("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:h,visibility:f.width?"visible":"hidden",...d,children:[o&&g.jsx("rect",{width:f.width+2*i[0],x:-i[0],y:-i[1],height:f.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),g.jsx("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:m,style:r,children:n}),u]}):null}kd.displayName="EdgeText";const eb=l.memo(kd);function Io({path:e,labelX:t,labelY:n,label:r,labelStyle:o,labelShowBg:s,labelBgStyle:i,labelBgPadding:a,labelBgBorderRadius:u,interactionWidth:c=20,...d}){return g.jsxs(g.Fragment,{children:[g.jsx("path",{...d,d:e,fill:"none",className:Se(["react-flow__edge-path",d.className])}),c?g.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:c,className:"react-flow__edge-interaction"}):null,r&&Ge(t)&&Ge(n)?g.jsx(eb,{x:t,y:n,label:r,labelStyle:o,labelShowBg:s,labelBgStyle:i,labelBgPadding:a,labelBgBorderRadius:u}):null]})}function Ec({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===ne.Left||e===ne.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function Od({sourceX:e,sourceY:t,sourcePosition:n=ne.Bottom,targetX:r,targetY:o,targetPosition:s=ne.Top}){const[i,a]=Ec({pos:n,x1:e,y1:t,x2:r,y2:o}),[u,c]=Ec({pos:s,x1:r,y1:o,x2:e,y2:t}),[d,f,p,h]=rd({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:i,sourceControlY:a,targetControlX:u,targetControlY:c});return[`M${e},${t} C${i},${a} ${u},${c} ${r},${o}`,d,f,p,h]}function jd(e){return l.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:s,sourcePosition:i,targetPosition:a,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:m,markerEnd:x,markerStart:y,interactionWidth:w})=>{const[E,v,b]=Od({sourceX:n,sourceY:r,sourcePosition:i,targetX:o,targetY:s,targetPosition:a}),N=e.isInternal?void 0:t;return g.jsx(Io,{id:N,path:E,labelX:v,labelY:b,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:m,markerEnd:x,markerStart:y,interactionWidth:w})})}const tb=jd({isInternal:!1}),Ld=jd({isInternal:!0});tb.displayName="SimpleBezierEdge";Ld.displayName="SimpleBezierEdgeInternal";function $d(e){return l.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:s,label:i,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:p,sourcePosition:h=ne.Bottom,targetPosition:m=ne.Top,markerEnd:x,markerStart:y,pathOptions:w,interactionWidth:E})=>{const[v,b,N]=qs({sourceX:n,sourceY:r,sourcePosition:h,targetX:o,targetY:s,targetPosition:m,borderRadius:w?.borderRadius,offset:w?.offset,stepPosition:w?.stepPosition}),S=e.isInternal?void 0:t;return g.jsx(Io,{id:S,path:v,labelX:b,labelY:N,label:i,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:x,markerStart:y,interactionWidth:E})})}const Fd=$d({isInternal:!1}),Hd=$d({isInternal:!0});Fd.displayName="SmoothStepEdge";Hd.displayName="SmoothStepEdgeInternal";function zd(e){return l.memo(({id:t,...n})=>{const r=e.isInternal?void 0:t;return g.jsx(Fd,{...n,id:r,pathOptions:l.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const nb=zd({isInternal:!1}),Vd=zd({isInternal:!0});nb.displayName="StepEdge";Vd.displayName="StepEdgeInternal";function Bd(e){return l.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:s,label:i,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:h,markerStart:m,interactionWidth:x})=>{const[y,w,E]=id({sourceX:n,sourceY:r,targetX:o,targetY:s}),v=e.isInternal?void 0:t;return g.jsx(Io,{id:v,path:y,labelX:w,labelY:E,label:i,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:h,markerStart:m,interactionWidth:x})})}const rb=Bd({isInternal:!1}),Wd=Bd({isInternal:!0});rb.displayName="StraightEdge";Wd.displayName="StraightEdgeInternal";function Gd(e){return l.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:s,sourcePosition:i=ne.Bottom,targetPosition:a=ne.Top,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:m,markerEnd:x,markerStart:y,pathOptions:w,interactionWidth:E})=>{const[v,b,N]=od({sourceX:n,sourceY:r,sourcePosition:i,targetX:o,targetY:s,targetPosition:a,curvature:w?.curvature}),S=e.isInternal?void 0:t;return g.jsx(Io,{id:S,path:v,labelX:b,labelY:N,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:m,markerEnd:x,markerStart:y,interactionWidth:E})})}const ob=Gd({isInternal:!1}),Ud=Gd({isInternal:!0});ob.displayName="BezierEdge";Ud.displayName="BezierEdgeInternal";const _c={default:Ud,straight:Wd,step:Vd,smoothstep:Hd,simplebezier:Ld},Nc={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},sb=(e,t,n)=>n===ne.Left?e-t:n===ne.Right?e+t:e,ib=(e,t,n)=>n===ne.Top?e-t:n===ne.Bottom?e+t:e,Rc="react-flow__edgeupdater";function Tc({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:s,onMouseOut:i,type:a}){return g.jsx("circle",{onMouseDown:o,onMouseEnter:s,onMouseOut:i,className:Se([Rc,`${Rc}-${a}`]),cx:sb(t,r,e),cy:ib(n,r,e),r,stroke:"transparent",fill:"transparent"})}function ab({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:o,targetX:s,targetY:i,sourcePosition:a,targetPosition:u,onReconnect:c,onReconnectStart:d,onReconnectEnd:f,setReconnecting:p,setUpdateHover:h}){const m=xe(),x=(b,N)=>{if(b.button!==0)return;const{autoPanOnConnect:S,domNode:R,isValidConnection:O,connectionMode:D,connectionRadius:V,lib:I,onConnectStart:$,onConnectEnd:W,cancelConnection:_,nodeLookup:j,rfId:M,panBy:F,updateConnection:L}=m.getState(),k=N.type==="target",U=(G,T)=>{p(!1),f?.(G,n,N.type,T)},Z=G=>c?.(n,G),A=(G,T)=>{p(!0),d?.(b,n,N.type),$?.(G,T)};ei.onPointerDown(b.nativeEvent,{autoPanOnConnect:S,connectionMode:D,connectionRadius:V,domNode:R,handleId:N.id,nodeId:N.nodeId,nodeLookup:j,isTarget:k,edgeUpdaterType:N.type,lib:I,flowId:M,cancelConnection:_,panBy:F,isValidConnection:O,onConnect:Z,onConnectStart:A,onConnectEnd:W,onReconnectEnd:U,updateConnection:L,getTransform:()=>m.getState().transform,getFromHandle:()=>m.getState().connection.fromHandle,dragThreshold:m.getState().connectionDragThreshold,handleDomNode:b.currentTarget})},y=b=>x(b,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),w=b=>x(b,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),E=()=>h(!0),v=()=>h(!1);return g.jsxs(g.Fragment,{children:[(e===!0||e==="source")&&g.jsx(Tc,{position:a,centerX:r,centerY:o,radius:t,onMouseDown:y,onMouseEnter:E,onMouseOut:v,type:"source"}),(e===!0||e==="target")&&g.jsx(Tc,{position:u,centerX:s,centerY:i,radius:t,onMouseDown:w,onMouseEnter:E,onMouseOut:v,type:"target"})]})}function cb({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:o,onDoubleClick:s,onContextMenu:i,onMouseEnter:a,onMouseMove:u,onMouseLeave:c,reconnectRadius:d,onReconnect:f,onReconnectStart:p,onReconnectEnd:h,rfId:m,edgeTypes:x,noPanClassName:y,onError:w,disableKeyboardA11y:E}){let v=pe(oe=>oe.edgeLookup.get(e));const b=pe(oe=>oe.defaultEdgeOptions);v=b?{...b,...v}:v;let N=v.type||"default",S=x?.[N]||_c[N];S===void 0&&(w?.("011",Je.error011(N)),N="default",S=x?.default||_c.default);const R=!!(v.focusable||t&&typeof v.focusable>"u"),O=typeof f<"u"&&(v.reconnectable||n&&typeof v.reconnectable>"u"),D=!!(v.selectable||r&&typeof v.selectable>"u"),V=l.useRef(null),[I,$]=l.useState(!1),[W,_]=l.useState(!1),j=xe(),{zIndex:M,sourceX:F,sourceY:L,targetX:k,targetY:U,sourcePosition:Z,targetPosition:A}=pe(l.useCallback(oe=>{const ae=oe.nodeLookup.get(v.source),ge=oe.nodeLookup.get(v.target);if(!ae||!ge)return{zIndex:v.zIndex,...Nc};const ve=qv({id:e,sourceNode:ae,targetNode:ge,sourceHandle:v.sourceHandle||null,targetHandle:v.targetHandle||null,connectionMode:oe.connectionMode,onError:w});return{zIndex:Bv({selected:v.selected,zIndex:v.zIndex,sourceNode:ae,targetNode:ge,elevateOnSelect:oe.elevateEdgesOnSelect,zIndexMode:oe.zIndexMode}),...ve||Nc}},[v.source,v.target,v.sourceHandle,v.targetHandle,v.selected,v.zIndex]),we),G=l.useMemo(()=>v.markerStart?`url('#${Qs(v.markerStart,m)}')`:void 0,[v.markerStart,m]),T=l.useMemo(()=>v.markerEnd?`url('#${Qs(v.markerEnd,m)}')`:void 0,[v.markerEnd,m]);if(v.hidden||F===null||L===null||k===null||U===null)return null;const Y=oe=>{const{addSelectedEdges:ae,unselectNodesAndEdges:ge,multiSelectionActive:ve}=j.getState();D&&(j.setState({nodesSelectionActive:!1}),v.selected&&ve?(ge({nodes:[],edges:[v]}),V.current?.blur()):ae([e])),o&&o(oe,v)},H=s?oe=>{s(oe,{...v})}:void 0,X=i?oe=>{i(oe,{...v})}:void 0,K=a?oe=>{a(oe,{...v})}:void 0,ee=u?oe=>{u(oe,{...v})}:void 0,ie=c?oe=>{c(oe,{...v})}:void 0,ue=oe=>{if(!E&&Bu.includes(oe.key)&&D){const{unselectNodesAndEdges:ae,addSelectedEdges:ge}=j.getState();oe.key==="Escape"?(V.current?.blur(),ae({edges:[v]})):ge([e])}};return g.jsx("svg",{style:{zIndex:M},children:g.jsxs("g",{className:Se(["react-flow__edge",`react-flow__edge-${N}`,v.className,y,{selected:v.selected,animated:v.animated,inactive:!D&&!o,updating:I,selectable:D}]),onClick:Y,onDoubleClick:H,onContextMenu:X,onMouseEnter:K,onMouseMove:ee,onMouseLeave:ie,onKeyDown:R?ue:void 0,tabIndex:R?0:void 0,role:v.ariaRole??(R?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":v.ariaLabel===null?void 0:v.ariaLabel||`Edge from ${v.source} to ${v.target}`,"aria-describedby":R?`${bd}-${m}`:void 0,ref:V,...v.domAttributes,children:[!W&&g.jsx(S,{id:e,source:v.source,target:v.target,type:v.type,selected:v.selected,animated:v.animated,selectable:D,deletable:v.deletable??!0,label:v.label,labelStyle:v.labelStyle,labelShowBg:v.labelShowBg,labelBgStyle:v.labelBgStyle,labelBgPadding:v.labelBgPadding,labelBgBorderRadius:v.labelBgBorderRadius,sourceX:F,sourceY:L,targetX:k,targetY:U,sourcePosition:Z,targetPosition:A,data:v.data,style:v.style,sourceHandleId:v.sourceHandle,targetHandleId:v.targetHandle,markerStart:G,markerEnd:T,pathOptions:"pathOptions"in v?v.pathOptions:void 0,interactionWidth:v.interactionWidth}),O&&g.jsx(ab,{edge:v,isReconnectable:O,reconnectRadius:d,onReconnect:f,onReconnectStart:p,onReconnectEnd:h,sourceX:F,sourceY:L,targetX:k,targetY:U,sourcePosition:Z,targetPosition:A,setUpdateHover:$,setReconnecting:_})]})})}var lb=l.memo(cb);const ub=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Xd({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:o,onReconnect:s,onEdgeContextMenu:i,onEdgeMouseEnter:a,onEdgeMouseMove:u,onEdgeMouseLeave:c,onEdgeClick:d,reconnectRadius:f,onEdgeDoubleClick:p,onReconnectStart:h,onReconnectEnd:m,disableKeyboardA11y:x}){const{edgesFocusable:y,edgesReconnectable:w,elementsSelectable:E,onError:v}=pe(ub,we),b=Yw(t);return g.jsxs("div",{className:"react-flow__edges",children:[g.jsx(Jw,{defaultColor:e,rfId:n}),b.map(N=>g.jsx(lb,{id:N,edgesFocusable:y,edgesReconnectable:w,elementsSelectable:E,noPanClassName:o,onReconnect:s,onContextMenu:i,onMouseEnter:a,onMouseMove:u,onMouseLeave:c,onClick:d,reconnectRadius:f,onDoubleClick:p,onReconnectStart:h,onReconnectEnd:m,rfId:n,onError:v,edgeTypes:r,disableKeyboardA11y:x},N))]})}Xd.displayName="EdgeRenderer";const db=l.memo(Xd),fb=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function pb({children:e}){const t=pe(fb);return g.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function hb(e){const t=Mo(),n=l.useRef(!1);l.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const gb=e=>e.panZoom?.syncViewport;function mb(e){const t=pe(gb),n=xe();return l.useEffect(()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function yb(e){return e.connection.inProgress?{...e.connection,to:ur(e.connection.to,e.transform)}:{...e.connection}}function vb(e){return yb}function xb(e){const t=vb();return pe(t,we)}const wb=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function bb({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:o,width:s,height:i,isValid:a,inProgress:u}=pe(wb,we);return!(s&&o&&u)?null:g.jsx("svg",{style:e,width:s,height:i,className:"react-flow__connectionline react-flow__container",children:g.jsx("g",{className:Se(["react-flow__connection",Uu(a)]),children:g.jsx(Yd,{style:t,type:n,CustomComponent:r,isValid:a})})})}const Yd=({style:e,type:t=pt.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:o,from:s,fromNode:i,fromHandle:a,fromPosition:u,to:c,toNode:d,toHandle:f,toPosition:p,pointer:h}=xb();if(!o)return;if(n)return g.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:i,fromHandle:a,fromX:s.x,fromY:s.y,toX:c.x,toY:c.y,fromPosition:u,toPosition:p,connectionStatus:Uu(r),toNode:d,toHandle:f,pointer:h});let m="";const x={sourceX:s.x,sourceY:s.y,sourcePosition:u,targetX:c.x,targetY:c.y,targetPosition:p};switch(t){case pt.Bezier:[m]=od(x);break;case pt.SimpleBezier:[m]=Od(x);break;case pt.Step:[m]=qs({...x,borderRadius:0});break;case pt.SmoothStep:[m]=qs(x);break;default:[m]=id(x)}return g.jsx("path",{d:m,fill:"none",className:"react-flow__connection-path",style:e})};Yd.displayName="ConnectionLine";const Cb={};function Dc(e=Cb){l.useRef(e),xe(),l.useEffect(()=>{},[e])}function Sb(){xe(),l.useRef(!1),l.useEffect(()=>{},[])}function Zd({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:o,onNodeDoubleClick:s,onEdgeDoubleClick:i,onNodeMouseEnter:a,onNodeMouseMove:u,onNodeMouseLeave:c,onNodeContextMenu:d,onSelectionContextMenu:f,onSelectionStart:p,onSelectionEnd:h,connectionLineType:m,connectionLineStyle:x,connectionLineComponent:y,connectionLineContainerStyle:w,selectionKeyCode:E,selectionOnDrag:v,selectionMode:b,multiSelectionKeyCode:N,panActivationKeyCode:S,zoomActivationKeyCode:R,deleteKeyCode:O,onlyRenderVisibleElements:D,elementsSelectable:V,defaultViewport:I,translateExtent:$,minZoom:W,maxZoom:_,preventScrolling:j,defaultMarkerColor:M,zoomOnScroll:F,zoomOnPinch:L,panOnScroll:k,panOnScrollSpeed:U,panOnScrollMode:Z,zoomOnDoubleClick:A,panOnDrag:G,onPaneClick:T,onPaneMouseEnter:Y,onPaneMouseMove:H,onPaneMouseLeave:X,onPaneScroll:K,onPaneContextMenu:ee,paneClickDistance:ie,nodeClickDistance:ue,onEdgeContextMenu:oe,onEdgeMouseEnter:ae,onEdgeMouseMove:ge,onEdgeMouseLeave:ve,reconnectRadius:re,onReconnect:Ce,onReconnectStart:Ze,onReconnectEnd:He,noDragClassName:nt,noWheelClassName:ze,noPanClassName:xt,disableKeyboardA11y:wt,nodeExtent:bt,rfId:zt,viewport:ke,onViewportChange:rt}){return Dc(e),Dc(t),Sb(),hb(n),mb(ke),g.jsx($w,{onPaneClick:T,onPaneMouseEnter:Y,onPaneMouseMove:H,onPaneMouseLeave:X,onPaneContextMenu:ee,onPaneScroll:K,paneClickDistance:ie,deleteKeyCode:O,selectionKeyCode:E,selectionOnDrag:v,selectionMode:b,onSelectionStart:p,onSelectionEnd:h,multiSelectionKeyCode:N,panActivationKeyCode:S,zoomActivationKeyCode:R,elementsSelectable:V,zoomOnScroll:F,zoomOnPinch:L,zoomOnDoubleClick:A,panOnScroll:k,panOnScrollSpeed:U,panOnScrollMode:Z,panOnDrag:G,defaultViewport:I,translateExtent:$,minZoom:W,maxZoom:_,onSelectionContextMenu:f,preventScrolling:j,noDragClassName:nt,noWheelClassName:ze,noPanClassName:xt,disableKeyboardA11y:wt,onViewportChange:rt,isControlledViewport:!!ke,children:g.jsxs(pb,{children:[g.jsx(db,{edgeTypes:t,onEdgeClick:o,onEdgeDoubleClick:i,onReconnect:Ce,onReconnectStart:Ze,onReconnectEnd:He,onlyRenderVisibleElements:D,onEdgeContextMenu:oe,onEdgeMouseEnter:ae,onEdgeMouseMove:ge,onEdgeMouseLeave:ve,reconnectRadius:re,defaultMarkerColor:M,noPanClassName:xt,disableKeyboardA11y:wt,rfId:zt}),g.jsx(bb,{style:x,type:m,component:y,containerStyle:w}),g.jsx("div",{className:"react-flow__edgelabel-renderer"}),g.jsx(Xw,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:a,onNodeMouseMove:u,onNodeMouseLeave:c,onNodeContextMenu:d,nodeClickDistance:ue,onlyRenderVisibleElements:D,noPanClassName:xt,noDragClassName:nt,disableKeyboardA11y:wt,nodeExtent:bt,rfId:zt}),g.jsx("div",{className:"react-flow__viewport-portal"})]})})}Zd.displayName="GraphView";const Eb=l.memo(Zd),Ac=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:s,fitView:i,fitViewOptions:a,minZoom:u=.5,maxZoom:c=2,nodeOrigin:d,nodeExtent:f,zIndexMode:p="basic"}={})=>{const h=new Map,m=new Map,x=new Map,y=new Map,w=r??t??[],E=n??e??[],v=d??[0,0],b=f??Kn;ld(x,y,w);const N=Js(E,h,m,{nodeOrigin:v,nodeExtent:b,zIndexMode:p});let S=[0,0,1];if(i&&o&&s){const R=cr(h,{filter:I=>!!((I.width||I.initialWidth)&&(I.height||I.initialHeight))}),{x:O,y:D,zoom:V}=ki(R,o,s,u,c,a?.padding??.1);S=[O,D,V]}return{rfId:"1",width:o??0,height:s??0,transform:S,nodes:E,nodesInitialized:N,nodeLookup:h,parentLookup:m,edges:w,edgeLookup:y,connectionLookup:x,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:u,maxZoom:c,translateExtent:Kn,nodeExtent:b,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:cn.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:v,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:i??!1,fitViewOptions:a,fitViewResolver:null,connection:{...Gu},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:Lv,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:Wu,zIndexMode:p,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},_b=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:s,fitView:i,fitViewOptions:a,minZoom:u,maxZoom:c,nodeOrigin:d,nodeExtent:f,zIndexMode:p})=>Bx((h,m)=>{async function x(){const{nodeLookup:y,panZoom:w,fitViewOptions:E,fitViewResolver:v,width:b,height:N,minZoom:S,maxZoom:R}=m();w&&(await Ov({nodes:y,width:b,height:N,panZoom:w,minZoom:S,maxZoom:R},E),v?.resolve(!0),h({fitViewResolver:null}))}return{...Ac({nodes:e,edges:t,width:o,height:s,fitView:i,fitViewOptions:a,minZoom:u,maxZoom:c,nodeOrigin:d,nodeExtent:f,defaultNodes:n,defaultEdges:r,zIndexMode:p}),setNodes:y=>{const{nodeLookup:w,parentLookup:E,nodeOrigin:v,elevateNodesOnSelect:b,fitViewQueued:N,zIndexMode:S}=m(),R=Js(y,w,E,{nodeOrigin:v,nodeExtent:f,elevateNodesOnSelect:b,checkEquality:!0,zIndexMode:S});N&&R?(x(),h({nodes:y,nodesInitialized:R,fitViewQueued:!1,fitViewOptions:void 0})):h({nodes:y,nodesInitialized:R})},setEdges:y=>{const{connectionLookup:w,edgeLookup:E}=m();ld(w,E,y),h({edges:y})},setDefaultNodesAndEdges:(y,w)=>{if(y){const{setNodes:E}=m();E(y),h({hasDefaultNodes:!0})}if(w){const{setEdges:E}=m();E(w),h({hasDefaultEdges:!0})}},updateNodeInternals:y=>{const{triggerNodeChanges:w,nodeLookup:E,parentLookup:v,domNode:b,nodeOrigin:N,nodeExtent:S,debug:R,fitViewQueued:O,zIndexMode:D}=m(),{changes:V,updatedInternals:I}=sx(y,E,v,b,N,S,D);I&&(tx(E,v,{nodeOrigin:N,nodeExtent:S,zIndexMode:D}),O?(x(),h({fitViewQueued:!1,fitViewOptions:void 0})):h({}),V?.length>0&&(R&&console.log("React Flow: trigger node changes",V),w?.(V)))},updateNodePositions:(y,w=!1)=>{const E=[];let v=[];const{nodeLookup:b,triggerNodeChanges:N,connection:S,updateConnection:R,onNodesChangeMiddlewareMap:O}=m();for(const[D,V]of y){const I=b.get(D),$=!!(I?.expandParent&&I?.parentId&&V?.position),W={id:D,type:"position",position:$?{x:Math.max(0,V.position.x),y:Math.max(0,V.position.y)}:V.position,dragging:w};if(I&&S.inProgress&&S.fromNode.id===I.id){const _=jt(I,S.fromHandle,ne.Left,!0);R({...S,from:_})}$&&I.parentId&&E.push({id:D,parentId:I.parentId,rect:{...V.internals.positionAbsolute,width:V.measured.width??0,height:V.measured.height??0}}),v.push(W)}if(E.length>0){const{parentLookup:D,nodeOrigin:V}=m(),I=Hi(E,b,D,V);v.push(...I)}for(const D of O.values())v=D(v);N(v)},triggerNodeChanges:y=>{const{onNodesChange:w,setNodes:E,nodes:v,hasDefaultNodes:b,debug:N}=m();if(y?.length){if(b){const S=Ed(y,v);E(S)}N&&console.log("React Flow: trigger node changes",y),w?.(y)}},triggerEdgeChanges:y=>{const{onEdgesChange:w,setEdges:E,edges:v,hasDefaultEdges:b,debug:N}=m();if(y?.length){if(b){const S=_d(y,v);E(S)}N&&console.log("React Flow: trigger edge changes",y),w?.(y)}},addSelectedNodes:y=>{const{multiSelectionActive:w,edgeLookup:E,nodeLookup:v,triggerNodeChanges:b,triggerEdgeChanges:N}=m();if(w){const S=y.map(R=>Et(R,!0));b(S);return}b(Qt(v,new Set([...y]),!0)),N(Qt(E))},addSelectedEdges:y=>{const{multiSelectionActive:w,edgeLookup:E,nodeLookup:v,triggerNodeChanges:b,triggerEdgeChanges:N}=m();if(w){const S=y.map(R=>Et(R,!0));N(S);return}N(Qt(E,new Set([...y]))),b(Qt(v,new Set,!0))},unselectNodesAndEdges:({nodes:y,edges:w}={})=>{const{edges:E,nodes:v,nodeLookup:b,triggerNodeChanges:N,triggerEdgeChanges:S}=m(),R=y||v,O=w||E,D=R.map(I=>{const $=b.get(I.id);return $&&($.selected=!1),Et(I.id,!1)}),V=O.map(I=>Et(I.id,!1));N(D),S(V)},setMinZoom:y=>{const{panZoom:w,maxZoom:E}=m();w?.setScaleExtent([y,E]),h({minZoom:y})},setMaxZoom:y=>{const{panZoom:w,minZoom:E}=m();w?.setScaleExtent([E,y]),h({maxZoom:y})},setTranslateExtent:y=>{m().panZoom?.setTranslateExtent(y),h({translateExtent:y})},resetSelectedElements:()=>{const{edges:y,nodes:w,triggerNodeChanges:E,triggerEdgeChanges:v,elementsSelectable:b}=m();if(!b)return;const N=w.reduce((R,O)=>O.selected?[...R,Et(O.id,!1)]:R,[]),S=y.reduce((R,O)=>O.selected?[...R,Et(O.id,!1)]:R,[]);E(N),v(S)},setNodeExtent:y=>{const{nodes:w,nodeLookup:E,parentLookup:v,nodeOrigin:b,elevateNodesOnSelect:N,nodeExtent:S,zIndexMode:R}=m();y[0][0]===S[0][0]&&y[0][1]===S[0][1]&&y[1][0]===S[1][0]&&y[1][1]===S[1][1]||(Js(w,E,v,{nodeOrigin:b,nodeExtent:y,elevateNodesOnSelect:N,checkEquality:!1,zIndexMode:R}),h({nodeExtent:y}))},panBy:y=>{const{transform:w,width:E,height:v,panZoom:b,translateExtent:N}=m();return ix({delta:y,panZoom:b,transform:w,translateExtent:N,width:E,height:v})},setCenter:async(y,w,E)=>{const{width:v,height:b,maxZoom:N,panZoom:S}=m();if(!S)return Promise.resolve(!1);const R=typeof E?.zoom<"u"?E.zoom:N;return await S.setViewport({x:v/2-y*R,y:b/2-w*R,zoom:R},{duration:E?.duration,ease:E?.ease,interpolate:E?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{h({connection:{...Gu}})},updateConnection:y=>{h({connection:y})},reset:()=>h({...Ac()})}},Object.is);function Nb({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:o,initialHeight:s,initialMinZoom:i,initialMaxZoom:a,initialFitViewOptions:u,fitView:c,nodeOrigin:d,nodeExtent:f,zIndexMode:p,children:h}){const[m]=l.useState(()=>_b({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:s,fitView:c,minZoom:i,maxZoom:a,fitViewOptions:u,nodeOrigin:d,nodeExtent:f,zIndexMode:p}));return g.jsx(Wx,{value:m,children:g.jsx(pw,{children:h})})}function Rb({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:o,width:s,height:i,fitView:a,fitViewOptions:u,minZoom:c,maxZoom:d,nodeOrigin:f,nodeExtent:p,zIndexMode:h}){return l.useContext(Do)?g.jsx(g.Fragment,{children:e}):g.jsx(Nb,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:o,initialWidth:s,initialHeight:i,fitView:a,initialFitViewOptions:u,initialMinZoom:c,initialMaxZoom:d,nodeOrigin:f,nodeExtent:p,zIndexMode:h,children:e})}const Tb={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Db({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:s,edgeTypes:i,onNodeClick:a,onEdgeClick:u,onInit:c,onMove:d,onMoveStart:f,onMoveEnd:p,onConnect:h,onConnectStart:m,onConnectEnd:x,onClickConnectStart:y,onClickConnectEnd:w,onNodeMouseEnter:E,onNodeMouseMove:v,onNodeMouseLeave:b,onNodeContextMenu:N,onNodeDoubleClick:S,onNodeDragStart:R,onNodeDrag:O,onNodeDragStop:D,onNodesDelete:V,onEdgesDelete:I,onDelete:$,onSelectionChange:W,onSelectionDragStart:_,onSelectionDrag:j,onSelectionDragStop:M,onSelectionContextMenu:F,onSelectionStart:L,onSelectionEnd:k,onBeforeDelete:U,connectionMode:Z,connectionLineType:A=pt.Bezier,connectionLineStyle:G,connectionLineComponent:T,connectionLineContainerStyle:Y,deleteKeyCode:H="Backspace",selectionKeyCode:X="Shift",selectionOnDrag:K=!1,selectionMode:ee=qn.Full,panActivationKeyCode:ie="Space",multiSelectionKeyCode:ue=Jn()?"Meta":"Control",zoomActivationKeyCode:oe=Jn()?"Meta":"Control",snapToGrid:ae,snapGrid:ge,onlyRenderVisibleElements:ve=!1,selectNodesOnDrag:re,nodesDraggable:Ce,autoPanOnNodeFocus:Ze,nodesConnectable:He,nodesFocusable:nt,nodeOrigin:ze=Cd,edgesFocusable:xt,edgesReconnectable:wt,elementsSelectable:bt=!0,defaultViewport:zt=rw,minZoom:ke=.5,maxZoom:rt=2,translateExtent:yr=Kn,preventScrolling:$o=!0,nodeExtent:mn,defaultMarkerColor:yn="#b1b1b7",zoomOnScroll:Fo=!0,zoomOnPinch:Ho=!0,panOnScroll:zo=!1,panOnScrollSpeed:vn=.5,panOnScrollMode:xn=Mt.Free,zoomOnDoubleClick:Vo=!0,panOnDrag:wn=!0,onPaneClick:bn,onPaneMouseEnter:Bo,onPaneMouseMove:Wo,onPaneMouseLeave:Cn,onPaneScroll:Sn,onPaneContextMenu:Go,paneClickDistance:En=1,nodeClickDistance:_n=0,children:Uo,onReconnect:Xo,onReconnectStart:Nn,onReconnectEnd:Rn,onEdgeContextMenu:Yo,onEdgeDoubleClick:Tn,onEdgeMouseEnter:Dn,onEdgeMouseMove:Zo,onEdgeMouseLeave:Ko,reconnectRadius:An=10,onNodesChange:Mn,onEdgesChange:qo,noDragClassName:Pn="nodrag",noWheelClassName:In="nowheel",noPanClassName:vr="nopan",fitView:xr,fitViewOptions:wr,connectOnClick:Qo,attributionPosition:Ct,proOptions:Jo,defaultEdgeOptions:es,elevateNodesOnSelect:St=!0,elevateEdgesOnSelect:kn=!1,disableKeyboardA11y:Vt=!1,autoPanOnConnect:ts,autoPanOnNodeDrag:On,autoPanSpeed:ns,connectionRadius:rs,isValidConnection:C,onError:P,style:q,id:B,nodeDragThreshold:Q,connectionDragThreshold:te,viewport:J,onViewportChange:se,width:ce,height:he,colorMode:de="light",debug:Ee,onScroll:Oe,ariaLabelConfig:Bt,zIndexMode:br="basic",...yp},vp){const os=B||"1",xp=aw(de),wp=l.useCallback(ta=>{ta.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Oe?.(ta)},[Oe]);return g.jsx("div",{"data-testid":"rf__wrapper",...yp,onScroll:wp,style:{...q,...Tb},ref:vp,className:Se(["react-flow",o,xp]),id:B,role:"application",children:g.jsxs(Rb,{nodes:e,edges:t,width:ce,height:he,fitView:xr,fitViewOptions:wr,minZoom:ke,maxZoom:rt,nodeOrigin:ze,nodeExtent:mn,zIndexMode:br,children:[g.jsx(Eb,{onInit:c,onNodeClick:a,onEdgeClick:u,onNodeMouseEnter:E,onNodeMouseMove:v,onNodeMouseLeave:b,onNodeContextMenu:N,onNodeDoubleClick:S,nodeTypes:s,edgeTypes:i,connectionLineType:A,connectionLineStyle:G,connectionLineComponent:T,connectionLineContainerStyle:Y,selectionKeyCode:X,selectionOnDrag:K,selectionMode:ee,deleteKeyCode:H,multiSelectionKeyCode:ue,panActivationKeyCode:ie,zoomActivationKeyCode:oe,onlyRenderVisibleElements:ve,defaultViewport:zt,translateExtent:yr,minZoom:ke,maxZoom:rt,preventScrolling:$o,zoomOnScroll:Fo,zoomOnPinch:Ho,zoomOnDoubleClick:Vo,panOnScroll:zo,panOnScrollSpeed:vn,panOnScrollMode:xn,panOnDrag:wn,onPaneClick:bn,onPaneMouseEnter:Bo,onPaneMouseMove:Wo,onPaneMouseLeave:Cn,onPaneScroll:Sn,onPaneContextMenu:Go,paneClickDistance:En,nodeClickDistance:_n,onSelectionContextMenu:F,onSelectionStart:L,onSelectionEnd:k,onReconnect:Xo,onReconnectStart:Nn,onReconnectEnd:Rn,onEdgeContextMenu:Yo,onEdgeDoubleClick:Tn,onEdgeMouseEnter:Dn,onEdgeMouseMove:Zo,onEdgeMouseLeave:Ko,reconnectRadius:An,defaultMarkerColor:yn,noDragClassName:Pn,noWheelClassName:In,noPanClassName:vr,rfId:os,disableKeyboardA11y:Vt,nodeExtent:mn,viewport:J,onViewportChange:se}),g.jsx(iw,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:m,onConnectEnd:x,onClickConnectStart:y,onClickConnectEnd:w,nodesDraggable:Ce,autoPanOnNodeFocus:Ze,nodesConnectable:He,nodesFocusable:nt,edgesFocusable:xt,edgesReconnectable:wt,elementsSelectable:bt,elevateNodesOnSelect:St,elevateEdgesOnSelect:kn,minZoom:ke,maxZoom:rt,nodeExtent:mn,onNodesChange:Mn,onEdgesChange:qo,snapToGrid:ae,snapGrid:ge,connectionMode:Z,translateExtent:yr,connectOnClick:Qo,defaultEdgeOptions:es,fitView:xr,fitViewOptions:wr,onNodesDelete:V,onEdgesDelete:I,onDelete:$,onNodeDragStart:R,onNodeDrag:O,onNodeDragStop:D,onSelectionDrag:j,onSelectionDragStart:_,onSelectionDragStop:M,onMove:d,onMoveStart:f,onMoveEnd:p,noPanClassName:vr,nodeOrigin:ze,rfId:os,autoPanOnConnect:ts,autoPanOnNodeDrag:On,autoPanSpeed:ns,onError:P,connectionRadius:rs,isValidConnection:C,selectNodesOnDrag:re,nodeDragThreshold:Q,connectionDragThreshold:te,onBeforeDelete:U,debug:Ee,ariaLabelConfig:Bt,zIndexMode:br}),g.jsx(nw,{onSelectionChange:W}),Uo,g.jsx(qx,{proOptions:Jo,position:Ct}),g.jsx(Kx,{rfId:os,disableKeyboardA11y:Vt})]})})}var tE=Nd(Db);function nE(){const e=xe();return l.useCallback(t=>{const{domNode:n,updateNodeInternals:r}=e.getState(),o=Array.isArray(t)?t:[t],s=new Map;o.forEach(i=>{const a=n?.querySelector(`.react-flow__node[data-id="${i}"]`);a&&s.set(i,{id:i,nodeElement:a,force:!0})}),requestAnimationFrame(()=>r(s,{triggerFitView:!1}))},[])}const Ab=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2]});function rE(){return pe(Ab,we)}function oE(e){const[t,n]=l.useState(e),r=l.useCallback(o=>n(s=>Ed(o,s)),[]);return[t,n,r]}function sE(e){const[t,n]=l.useState(e),r=l.useCallback(o=>n(s=>_d(o,s)),[]);return[t,n,r]}function iE({onStart:e,onChange:t,onEnd:n}){const r=xe();l.useEffect(()=>{r.setState({onViewportChangeStart:e})},[e]),l.useEffect(()=>{r.setState({onViewportChange:t})},[t]),l.useEffect(()=>{r.setState({onViewportChangeEnd:n})},[n])}function Mb({dimensions:e,lineWidth:t,variant:n,className:r}){return g.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Se(["react-flow__background-pattern",n,r])})}function Pb({radius:e,className:t}){return g.jsx("circle",{cx:e,cy:e,r:e,className:Se(["react-flow__background-pattern","dots",t])})}var ht;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(ht||(ht={}));const Ib={[ht.Dots]:1,[ht.Lines]:1,[ht.Cross]:6},kb=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Kd({id:e,variant:t=ht.Dots,gap:n=20,size:r,lineWidth:o=1,offset:s=0,color:i,bgColor:a,style:u,className:c,patternClassName:d}){const f=l.useRef(null),{transform:p,patternId:h}=pe(kb,we),m=r||Ib[t],x=t===ht.Dots,y=t===ht.Cross,w=Array.isArray(n)?n:[n,n],E=[w[0]*p[2]||1,w[1]*p[2]||1],v=m*p[2],b=Array.isArray(s)?s:[s,s],N=y?[v,v]:E,S=[b[0]*p[2]||1+N[0]/2,b[1]*p[2]||1+N[1]/2],R=`${h}${e||""}`;return g.jsxs("svg",{className:Se(["react-flow__background",c]),style:{...u,...Po,"--xy-background-color-props":a,"--xy-background-pattern-color-props":i},ref:f,"data-testid":"rf__background",children:[g.jsx("pattern",{id:R,x:p[0]%E[0],y:p[1]%E[1],width:E[0],height:E[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${S[0]},-${S[1]})`,children:x?g.jsx(Pb,{radius:v/2,className:d}):g.jsx(Mb,{dimensions:N,lineWidth:o,variant:t,className:d})}),g.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${R})`})]})}Kd.displayName="Background";const aE=l.memo(Kd);function Ob(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:g.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function jb(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:g.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Lb(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:g.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function $b(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:g.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Fb(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:g.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Or({children:e,className:t,...n}){return g.jsx("button",{type:"button",className:Se(["react-flow__controls-button",t]),...n,children:e})}const Hb=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function qd({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:s,onZoomOut:i,onFitView:a,onInteractiveChange:u,className:c,children:d,position:f="bottom-left",orientation:p="vertical","aria-label":h}){const m=xe(),{isInteractive:x,minZoomReached:y,maxZoomReached:w,ariaLabelConfig:E}=pe(Hb,we),{zoomIn:v,zoomOut:b,fitView:N}=Mo(),S=()=>{v(),s?.()},R=()=>{b(),i?.()},O=()=>{N(o),a?.()},D=()=>{m.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),u?.(!x)},V=p==="horizontal"?"horizontal":"vertical";return g.jsxs(Ao,{className:Se(["react-flow__controls",V,c]),position:f,style:e,"data-testid":"rf__controls","aria-label":h??E["controls.ariaLabel"],children:[t&&g.jsxs(g.Fragment,{children:[g.jsx(Or,{onClick:S,className:"react-flow__controls-zoomin",title:E["controls.zoomIn.ariaLabel"],"aria-label":E["controls.zoomIn.ariaLabel"],disabled:w,children:g.jsx(Ob,{})}),g.jsx(Or,{onClick:R,className:"react-flow__controls-zoomout",title:E["controls.zoomOut.ariaLabel"],"aria-label":E["controls.zoomOut.ariaLabel"],disabled:y,children:g.jsx(jb,{})})]}),n&&g.jsx(Or,{className:"react-flow__controls-fitview",onClick:O,title:E["controls.fitView.ariaLabel"],"aria-label":E["controls.fitView.ariaLabel"],children:g.jsx(Lb,{})}),r&&g.jsx(Or,{className:"react-flow__controls-interactive",onClick:D,title:E["controls.interactive.ariaLabel"],"aria-label":E["controls.interactive.ariaLabel"],children:x?g.jsx(Fb,{}):g.jsx($b,{})}),d]})}qd.displayName="Controls";const cE=l.memo(qd);function zb({id:e,x:t,y:n,width:r,height:o,style:s,color:i,strokeColor:a,strokeWidth:u,className:c,borderRadius:d,shapeRendering:f,selected:p,onClick:h}){const{background:m,backgroundColor:x}=s||{},y=i||m||x;return g.jsx("rect",{className:Se(["react-flow__minimap-node",{selected:p},c]),x:t,y:n,rx:d,ry:d,width:r,height:o,style:{fill:y,stroke:a,strokeWidth:u},shapeRendering:f,onClick:h?w=>h(w,e):void 0})}const Vb=l.memo(zb),Bb=e=>e.nodes.map(t=>t.id),Ts=e=>e instanceof Function?e:()=>e;function Wb({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o,nodeComponent:s=Vb,onClick:i}){const a=pe(Bb,we),u=Ts(t),c=Ts(e),d=Ts(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return g.jsx(g.Fragment,{children:a.map(p=>g.jsx(Ub,{id:p,nodeColorFunc:u,nodeStrokeColorFunc:c,nodeClassNameFunc:d,nodeBorderRadius:r,nodeStrokeWidth:o,NodeComponent:s,onClick:i,shapeRendering:f},p))})}function Gb({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:o,nodeStrokeWidth:s,shapeRendering:i,NodeComponent:a,onClick:u}){const{node:c,x:d,y:f,width:p,height:h}=pe(m=>{const{internals:x}=m.nodeLookup.get(e),y=x.userNode,{x:w,y:E}=x.positionAbsolute,{width:v,height:b}=ct(y);return{node:y,x:w,y:E,width:v,height:b}},we);return!c||c.hidden||!Qu(c)?null:g.jsx(a,{x:d,y:f,width:p,height:h,style:c.style,selected:!!c.selected,className:r(c),color:t(c),borderRadius:o,strokeColor:n(c),strokeWidth:s,shapeRendering:i,onClick:u,id:c.id})}const Ub=l.memo(Gb);var Xb=l.memo(Wb);const Yb=200,Zb=150,Kb=e=>!e.hidden,qb=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?qu(cr(e.nodeLookup,{filter:Kb}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},Qb="react-flow__minimap-desc";function Qd({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:o="",nodeBorderRadius:s=5,nodeStrokeWidth:i,nodeComponent:a,bgColor:u,maskColor:c,maskStrokeColor:d,maskStrokeWidth:f,position:p="bottom-right",onClick:h,onNodeClick:m,pannable:x=!1,zoomable:y=!1,ariaLabel:w,inversePan:E,zoomStep:v=1,offsetScale:b=5}){const N=xe(),S=l.useRef(null),{boundingRect:R,viewBB:O,rfId:D,panZoom:V,translateExtent:I,flowWidth:$,flowHeight:W,ariaLabelConfig:_}=pe(qb,we),j=e?.width??Yb,M=e?.height??Zb,F=R.width/j,L=R.height/M,k=Math.max(F,L),U=k*j,Z=k*M,A=b*k,G=R.x-(U-R.width)/2-A,T=R.y-(Z-R.height)/2-A,Y=U+A*2,H=Z+A*2,X=`${Qb}-${D}`,K=l.useRef(0),ee=l.useRef();K.current=k,l.useEffect(()=>{if(S.current&&V)return ee.current=gx({domNode:S.current,panZoom:V,getTransform:()=>N.getState().transform,getViewScale:()=>K.current}),()=>{ee.current?.destroy()}},[V]),l.useEffect(()=>{ee.current?.update({translateExtent:I,width:$,height:W,inversePan:E,pannable:x,zoomStep:v,zoomable:y})},[x,y,E,v,I,$,W]);const ie=h?ae=>{const[ge,ve]=ee.current?.pointer(ae)||[0,0];h(ae,{x:ge,y:ve})}:void 0,ue=m?l.useCallback((ae,ge)=>{const ve=N.getState().nodeLookup.get(ge).internals.userNode;m(ae,ve)},[]):void 0,oe=w??_["minimap.ariaLabel"];return g.jsx(Ao,{position:p,style:{...e,"--xy-minimap-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-width-props":typeof f=="number"?f*k:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof i=="number"?i:void 0},className:Se(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:g.jsxs("svg",{width:j,height:M,viewBox:`${G} ${T} ${Y} ${H}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":X,ref:S,onClick:ie,children:[oe&&g.jsx("title",{id:X,children:oe}),g.jsx(Xb,{onClick:ue,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:o,nodeStrokeWidth:i,nodeComponent:a}),g.jsx("path",{className:"react-flow__minimap-mask",d:`M${G-A},${T-A}h${Y+A*2}v${H+A*2}h${-Y-A*2}z
        M${O.x},${O.y}h${O.width}v${O.height}h${-O.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Qd.displayName="MiniMap";const lE=l.memo(Qd),Jb=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,eC={[Lt.Line]:"right",[Lt.Handle]:"bottom-right"};function tC({nodeId:e,position:t,variant:n=Lt.Handle,className:r,style:o=void 0,children:s,color:i,minWidth:a=10,minHeight:u=10,maxWidth:c=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:f=!1,resizeDirection:p,autoScale:h=!0,shouldResize:m,onResizeStart:x,onResize:y,onResizeEnd:w}){const E=Ad(),v=typeof e=="string"?e:E,b=xe(),N=l.useRef(null),S=n===Lt.Handle,R=pe(l.useCallback(Jb(S&&h),[S,h]),we),O=l.useRef(null),D=t??eC[n];l.useEffect(()=>{if(!(!N.current||!v))return O.current||(O.current=Mx({domNode:N.current,nodeId:v,getStoreItems:()=>{const{nodeLookup:I,transform:$,snapGrid:W,snapToGrid:_,nodeOrigin:j,domNode:M}=b.getState();return{nodeLookup:I,transform:$,snapGrid:W,snapToGrid:_,nodeOrigin:j,paneDomNode:M}},onChange:(I,$)=>{const{triggerNodeChanges:W,nodeLookup:_,parentLookup:j,nodeOrigin:M}=b.getState(),F=[],L={x:I.x,y:I.y},k=_.get(v);if(k&&k.expandParent&&k.parentId){const U=k.origin??M,Z=I.width??k.measured.width??0,A=I.height??k.measured.height??0,G={id:k.id,parentId:k.parentId,rect:{width:Z,height:A,...Ju({x:I.x??k.position.x,y:I.y??k.position.y},{width:Z,height:A},k.parentId,_,U)}},T=Hi([G],_,j,M);F.push(...T),L.x=I.x?Math.max(U[0]*Z,I.x):void 0,L.y=I.y?Math.max(U[1]*A,I.y):void 0}if(L.x!==void 0&&L.y!==void 0){const U={id:v,type:"position",position:{...L}};F.push(U)}if(I.width!==void 0&&I.height!==void 0){const Z={id:v,type:"dimensions",resizing:!0,setAttributes:p?p==="horizontal"?"width":"height":!0,dimensions:{width:I.width,height:I.height}};F.push(Z)}for(const U of $){const Z={...U,type:"position"};F.push(Z)}W(F)},onEnd:({width:I,height:$})=>{const W={id:v,type:"dimensions",resizing:!1,dimensions:{width:I,height:$}};b.getState().triggerNodeChanges([W])}})),O.current.update({controlPosition:D,boundaries:{minWidth:a,minHeight:u,maxWidth:c,maxHeight:d},keepAspectRatio:f,resizeDirection:p,onResizeStart:x,onResize:y,onResizeEnd:w,shouldResize:m}),()=>{O.current?.destroy()}},[D,a,u,c,d,f,x,y,w,m]);const V=D.split("-");return g.jsx("div",{className:Se(["react-flow__resize-control","nodrag",...V,n,r]),ref:N,style:{...o,scale:R,...i&&{[S?"backgroundColor":"borderColor"]:i}},children:s})}const Mc=l.memo(tC);function uE({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:r,lineClassName:o,lineStyle:s,color:i,minWidth:a=10,minHeight:u=10,maxWidth:c=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:f=!1,autoScale:p=!0,shouldResize:h,onResizeStart:m,onResize:x,onResizeEnd:y}){return t?g.jsxs(g.Fragment,{children:[_x.map(w=>g.jsx(Mc,{className:o,style:s,nodeId:e,position:w,variant:Lt.Line,color:i,minWidth:a,minHeight:u,maxWidth:c,maxHeight:d,onResizeStart:m,keepAspectRatio:f,autoScale:p,shouldResize:h,onResize:x,onResizeEnd:y},w)),Ex.map(w=>g.jsx(Mc,{className:n,style:r,nodeId:e,position:w,color:i,minWidth:a,minHeight:u,maxWidth:c,maxHeight:d,onResizeStart:m,keepAspectRatio:f,autoScale:p,shouldResize:h,onResize:x,onResizeEnd:y},w))]}):null}const nC=gn({id:_e(),name:_e(),x:je(),y:je(),width:je(),height:je(),color:_e(),order:je().optional()}),rC=""+new URL("supabase-iL5W9P0f.png",import.meta.url).href,oC=""+new URL("timescale-B780uPT1.png",import.meta.url).href,sC=""+new URL("mysql_5_7-B1Fg8tcc.png",import.meta.url).href,iC="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsSAAALEgHS3X78AAADW0lEQVRYw+2WS0hUURjHZ+aGkQTRJuih18kCIXBZLdRx1JYtQpNIggijFlFgSFmZd0ynTO2xDYraRKTmo7KoqE27aFOLSKJ3tMmNd0bn3nl8/b9zz505jo8yhTZz4Md359zH//993zn3jseTG7mxwBFt93sioSJxzFGFx3jzWk+kvWjphVUReewzDV0DXrNN9yD6MKcB70Q3TBqZ65dE3MyIs7B33usNYSR9L3X6Fylu6O6xpswHQBcYBKPgBjgIVvN5NqmaWJQBVRxRZ0HrXBFR10ai834HPr7gJ5z7CfbztRNnCz0LMuH0Vlf7zKVcxsi5EhZgMWSYjBi6jd9xkOCIubjV4RjD7za1EhFZxfnFjUyfZzm/HLzlbBEtkBIYesp0j0NFfC7B5mQ16sW94WLN7qtIP8seCMw0oPTZK+NKsA8cB5s50kWRuS2EIKyIUiTLRLxTGBiLhjfl8fNit7ZpENZccas/MNOImzmiH7zjLGQmnLEZbXeETM7amCZO2UZwTSIBE9iiO7OThbDQifWVT1tkYi/L44fULbK1uK9RPNgVV0RoTgNudQydor0lx+yh4G2rv+IOhBtBvlOBCl/2PncX2gowEXUellRKuxDiKawVs7XglXW3/Cg9qyEarSJ6VEUw8AGUiUqwCRYPa2kjq8BuMBWdXs7kXyKunUS1qKeYzJZ19fZw8Co9qSZkHAExGgmyiTjYnt3/ZvBrUukzRzbCvXThxRXHVmNsCW89fi/EJLgvhu/BSZnlARquJBoBD4KUuBcQEQbexLEoXfEO7jnfLIWFCWnGBNfAZdADwiAEzoAToAkcAYfkm7ABvV+TtejKQBNoAS+EifvCxC4WL1UyTmT1kuSL5gf4Lvmm8FXyBXwGn8B70CgW2s2teRAJgddgDHwE49wCelzNBnrZQAtvNRiI4S2YlAtP9FTGVEwprzUXHc55sW0NnauWD4EBelrjlH/YgbPHvMWLEvE6G7hCl4ppCuWOd86C0us/IQzw9m0teGn1lR+m5zucng9lDDDJQczhHFfHfb/vRaa1iHX/Cu7nyM9oME+tL8Xe34JV3wBqQR3E6iwgovN7Dyj8/3+x+N3PXz3+dyO/fovGPL3BZw9WepGpxshvQBplzpv7k5sbuZEbvwGDMvjj7QjeVAAAAABJRU5ErkJggg==";var Nt=(e=>(e.POSTGRESQL_SUPABASE="supabase",e.POSTGRESQL_TIMESCALE="timescale",e.MYSQL_5_7="mysql_5_7",e.SQL_SERVER_2016_AND_BELOW="sql_server_2016_and_below",e.SQLITE_CLOUDFLARE_D1="cloudflare_d1",e))(Nt||{});const dE={supabase:"Supabase",timescale:"Timescale",mysql_5_7:"V5.7",sql_server_2016_and_below:"2016 and below",cloudflare_d1:"Cloudflare D1"},fE={supabase:rC,timescale:oC,mysql_5_7:sC,sql_server_2016_and_below:Hp,cloudflare_d1:iC},pE={[be.POSTGRESQL]:["supabase","timescale"],[be.MYSQL]:["mysql_5_7"],[be.SQL_SERVER]:["sql_server_2016_and_below"],[be.SQLITE]:["cloudflare_d1"],[be.GENERIC]:[],[be.MARIADB]:[],[be.CLICKHOUSE]:[],[be.COCKROACHDB]:[],[be.ORACLE]:[]};var aC=(e=>(e.POSTGRESQL_PSQL="psql",e.SQLITE_WRANGLER="wrangler",e))(aC||{});const hE={psql:"PSQL",wrangler:"Wrangler"},gE={[be.POSTGRESQL]:["psql"],[be.MYSQL]:[],[be.SQLITE]:[],[be.GENERIC]:[],[be.SQL_SERVER]:[],[be.MARIADB]:[],[be.CLICKHOUSE]:[],[be.COCKROACHDB]:[],[be.ORACLE]:[]},mE={[Nt.POSTGRESQL_SUPABASE]:[],[Nt.POSTGRESQL_TIMESCALE]:[],[Nt.MYSQL_5_7]:[],[Nt.SQL_SERVER_2016_AND_BELOW]:[],[Nt.SQLITE_CLOUDFLARE_D1]:["wrangler"]},cC=gn({id:_e(),schema:_e().or(Kt()).optional(),tableId:_e(),dependentSchema:_e().or(Kt()).optional(),dependentTableId:_e(),createdAt:je()}),lC=gn({id:_e(),content:_e(),x:je(),y:je(),width:je(),height:je(),color:_e(),order:je().optional()}),yE=gn({id:_e(),name:_e(),databaseType:ks(be),databaseEdition:ks(Nt).optional(),tables:ft(Ap).optional(),relationships:ft(Bp).optional(),dependencies:ft(cC).optional(),areas:ft(nC).optional(),customTypes:ft(Km).optional(),notes:ft(lC).optional(),createdAt:oa(),updatedAt:oa()});var uC=l.createContext(void 0);function Vi(e){const t=l.useContext(uC);return e||t||"ltr"}var Ds="rovingFocusGroup.onEntryFocus",dC={bubbles:!1,cancelable:!0},dr="RovingFocusGroup",[ni,Jd,fC]=wl(dr),[pC,ko]=pn(dr,[fC]),[hC,gC]=pC(dr),ef=l.forwardRef((e,t)=>g.jsx(ni.Provider,{scope:e.__scopeRovingFocusGroup,children:g.jsx(ni.Slot,{scope:e.__scopeRovingFocusGroup,children:g.jsx(mC,{...e,ref:t})})}));ef.displayName=dr;var mC=l.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:s,currentTabStopId:i,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:u,onEntryFocus:c,preventScrollOnEntryFocus:d=!1,...f}=e,p=l.useRef(null),h=Te(t,p),m=Vi(s),[x,y]=hn({prop:i,defaultProp:a??null,onChange:u,caller:dr}),[w,E]=l.useState(!1),v=nn(c),b=Jd(n),N=l.useRef(!1),[S,R]=l.useState(0);return l.useEffect(()=>{const O=p.current;if(O)return O.addEventListener(Ds,v),()=>O.removeEventListener(Ds,v)},[v]),g.jsx(hC,{scope:n,orientation:r,dir:m,loop:o,currentTabStopId:x,onItemFocus:l.useCallback(O=>y(O),[y]),onItemShiftTab:l.useCallback(()=>E(!0),[]),onFocusableItemAdd:l.useCallback(()=>R(O=>O+1),[]),onFocusableItemRemove:l.useCallback(()=>R(O=>O-1),[]),children:g.jsx(ye.div,{tabIndex:w||S===0?-1:0,"data-orientation":r,...f,ref:h,style:{outline:"none",...e.style},onMouseDown:fe(e.onMouseDown,()=>{N.current=!0}),onFocus:fe(e.onFocus,O=>{const D=!N.current;if(O.target===O.currentTarget&&D&&!w){const V=new CustomEvent(Ds,dC);if(O.currentTarget.dispatchEvent(V),!V.defaultPrevented){const I=b().filter(M=>M.focusable),$=I.find(M=>M.active),W=I.find(M=>M.id===x),j=[$,W,...I].filter(Boolean).map(M=>M.ref.current);rf(j,d)}}N.current=!1}),onBlur:fe(e.onBlur,()=>E(!1))})})}),tf="RovingFocusGroupItem",nf=l.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:s,children:i,...a}=e,u=Me(),c=s||u,d=gC(tf,n),f=d.currentTabStopId===c,p=Jd(n),{onFocusableItemAdd:h,onFocusableItemRemove:m,currentTabStopId:x}=d;return l.useEffect(()=>{if(r)return h(),()=>m()},[r,h,m]),g.jsx(ni.ItemSlot,{scope:n,id:c,focusable:r,active:o,children:g.jsx(ye.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...a,ref:t,onMouseDown:fe(e.onMouseDown,y=>{r?d.onItemFocus(c):y.preventDefault()}),onFocus:fe(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:fe(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){d.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const w=xC(y,d.orientation,d.dir);if(w!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let v=p().filter(b=>b.focusable).map(b=>b.ref.current);if(w==="last")v.reverse();else if(w==="prev"||w==="next"){w==="prev"&&v.reverse();const b=v.indexOf(y.currentTarget);v=d.loop?wC(v,b+1):v.slice(b+1)}setTimeout(()=>rf(v))}}),children:typeof i=="function"?i({isCurrentTabStop:f,hasTabStop:x!=null}):i})})});nf.displayName=tf;var yC={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function vC(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function xC(e,t,n){const r=vC(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return yC[r]}function rf(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function wC(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var of=ef,sf=nf,af="Toggle",Bi=l.forwardRef((e,t)=>{const{pressed:n,defaultPressed:r,onPressedChange:o,...s}=e,[i,a]=hn({prop:n,onChange:o,defaultProp:r??!1,caller:af});return g.jsx(ye.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":e.disabled?"":void 0,...s,ref:t,onClick:fe(e.onClick,()=>{e.disabled||a(!i)})})});Bi.displayName=af;var vE=Bi,mt="ToggleGroup",[cf]=pn(mt,[ko]),lf=ko(),Wi=le.forwardRef((e,t)=>{const{type:n,...r}=e;if(n==="single"){const o=r;return g.jsx(bC,{...o,ref:t})}if(n==="multiple"){const o=r;return g.jsx(CC,{...o,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${mt}\``)});Wi.displayName=mt;var[uf,df]=cf(mt),bC=le.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...s}=e,[i,a]=hn({prop:n,defaultProp:r??"",onChange:o,caller:mt});return g.jsx(uf,{scope:e.__scopeToggleGroup,type:"single",value:le.useMemo(()=>i?[i]:[],[i]),onItemActivate:a,onItemDeactivate:le.useCallback(()=>a(""),[a]),children:g.jsx(ff,{...s,ref:t})})}),CC=le.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...s}=e,[i,a]=hn({prop:n,defaultProp:r??[],onChange:o,caller:mt}),u=le.useCallback(d=>a((f=[])=>[...f,d]),[a]),c=le.useCallback(d=>a((f=[])=>f.filter(p=>p!==d)),[a]);return g.jsx(uf,{scope:e.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:u,onItemDeactivate:c,children:g.jsx(ff,{...s,ref:t})})});Wi.displayName=mt;var[SC,EC]=cf(mt),ff=le.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:o=!0,orientation:s,dir:i,loop:a=!0,...u}=e,c=lf(n),d=Vi(i),f={role:"group",dir:d,...u};return g.jsx(SC,{scope:n,rovingFocus:o,disabled:r,children:o?g.jsx(of,{asChild:!0,...c,orientation:s,dir:d,loop:a,children:g.jsx(ye.div,{...f,ref:t})}):g.jsx(ye.div,{...f,ref:t})})}),ao="ToggleGroupItem",pf=le.forwardRef((e,t)=>{const n=df(ao,e.__scopeToggleGroup),r=EC(ao,e.__scopeToggleGroup),o=lf(e.__scopeToggleGroup),s=n.value.includes(e.value),i=r.disabled||e.disabled,a={...e,pressed:s,disabled:i},u=le.useRef(null);return r.rovingFocus?g.jsx(sf,{asChild:!0,...o,focusable:!i,active:s,ref:u,children:g.jsx(Pc,{...a,ref:t})}):g.jsx(Pc,{...a,ref:t})});pf.displayName=ao;var Pc=le.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:r,...o}=e,s=df(ao,n),i={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},a=s.type==="single"?i:void 0;return g.jsx(Bi,{...a,...o,ref:t,onPressedChange:u=>{u?s.onItemActivate(r):s.onItemDeactivate(r)}})}),hf=Wi,gf=pf;const _C=jp("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-3",sm:"h-8 px-2",lg:"h-10 px-3"}},defaultVariants:{variant:"default",size:"default"}}),mf=le.createContext({size:"default",variant:"default"}),NC=le.forwardRef(({className:e,variant:t,size:n,children:r,...o},s)=>g.jsx(hf,{ref:s,className:me("flex items-center justify-center gap-1",e),...o,children:g.jsx(mf.Provider,{value:{variant:t,size:n},children:r})}));NC.displayName=hf.displayName;const RC=le.forwardRef(({className:e,children:t,variant:n,size:r,...o},s)=>{const i=le.useContext(mf);return g.jsx(gf,{ref:s,className:me(_C({variant:i.variant||n,size:i.size||r}),e),...o,children:t})});RC.displayName=gf.displayName;function xE(e,t){const n=l.useRef();return l.useEffect(()=>(n.current=Mp(e,t),()=>{n.current?.cancel&&n.current.cancel()}),[e,t]),l.useCallback((...o)=>{n.current?.(...o)},[])}var TC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],DC=TC.reduce((e,t)=>{const n=Wp(`Primitive.${t}`),r=l.forwardRef((o,s)=>{const{asChild:i,...a}=o,u=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g.jsx(u,{...a,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),AC="Separator",Ic="horizontal",MC=["horizontal","vertical"],yf=l.forwardRef((e,t)=>{const{decorative:n,orientation:r=Ic,...o}=e,s=PC(r)?r:Ic,a=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return g.jsx(DC.div,{"data-orientation":s,...a,...o,ref:t})});yf.displayName=AC;function PC(e){return MC.includes(e)}var vf=yf;const IC=le.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},o)=>g.jsx(vf,{ref:o,decorative:n,orientation:t,className:me("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));IC.displayName=vf.displayName;const kC=le.forwardRef(({className:e,type:t,...n},r)=>g.jsx("input",{type:t,className:me("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));kC.displayName="Input";function OC(e){const t=jC(e),n=l.forwardRef((r,o)=>{const{children:s,...i}=r,a=l.Children.toArray(s),u=a.find($C);if(u){const c=u.props.children,d=a.map(f=>f===u?l.Children.count(c)>1?l.Children.only(null):l.isValidElement(c)?c.props.children:null:f);return g.jsx(t,{...i,ref:o,children:l.isValidElement(c)?l.cloneElement(c,void 0,d):null})}return g.jsx(t,{...i,ref:o,children:s})});return n.displayName=`${e}.Slot`,n}function jC(e){const t=l.forwardRef((n,r)=>{const{children:o,...s}=n;if(l.isValidElement(o)){const i=HC(o),a=FC(s,o.props);return o.type!==l.Fragment&&(a.ref=r?Qe(r,i):i),l.cloneElement(o,a)}return l.Children.count(o)>1?l.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var LC=Symbol("radix.slottable");function $C(e){return l.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===LC}function FC(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{const u=s(...a);return o(...a),u}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}function HC(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var ri=["Enter"," "],zC=["ArrowDown","PageUp","Home"],xf=["ArrowUp","PageDown","End"],VC=[...zC,...xf],BC={ltr:[...ri,"ArrowRight"],rtl:[...ri,"ArrowLeft"]},WC={ltr:["ArrowLeft"],rtl:["ArrowRight"]},fr="Menu",[tr,GC,UC]=wl(fr),[Ht,wE]=pn(fr,[UC,uo,ko]),pr=uo(),wf=ko(),[bf,yt]=Ht(fr),[XC,hr]=Ht(fr),Cf=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:o,onOpenChange:s,modal:i=!0}=e,a=pr(t),[u,c]=l.useState(null),d=l.useRef(!1),f=nn(s),p=Vi(o);return l.useEffect(()=>{const h=()=>{d.current=!0,document.addEventListener("pointerdown",m,{capture:!0,once:!0}),document.addEventListener("pointermove",m,{capture:!0,once:!0})},m=()=>d.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",m,{capture:!0}),document.removeEventListener("pointermove",m,{capture:!0})}},[]),g.jsx(ci,{...a,children:g.jsx(bf,{scope:t,open:n,onOpenChange:f,content:u,onContentChange:c,children:g.jsx(XC,{scope:t,onClose:l.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:p,modal:i,children:r})})})};Cf.displayName=fr;var YC="MenuAnchor",Gi=l.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=pr(n);return g.jsx(li,{...o,...r,ref:t})});Gi.displayName=YC;var Ui="MenuPortal",[ZC,Sf]=Ht(Ui,{forceMount:void 0}),Ef=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:o}=e,s=yt(Ui,t);return g.jsx(ZC,{scope:t,forceMount:n,children:g.jsx(at,{present:n||s.open,children:g.jsx(fo,{asChild:!0,container:o,children:r})})})};Ef.displayName=Ui;var $e="MenuContent",[KC,Xi]=Ht($e),_f=l.forwardRef((e,t)=>{const n=Sf($e,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,s=yt($e,e.__scopeMenu),i=hr($e,e.__scopeMenu);return g.jsx(tr.Provider,{scope:e.__scopeMenu,children:g.jsx(at,{present:r||s.open,children:g.jsx(tr.Slot,{scope:e.__scopeMenu,children:i.modal?g.jsx(qC,{...o,ref:t}):g.jsx(QC,{...o,ref:t})})})})}),qC=l.forwardRef((e,t)=>{const n=yt($e,e.__scopeMenu),r=l.useRef(null),o=Te(t,r);return l.useEffect(()=>{const s=r.current;if(s)return pi(s)},[]),g.jsx(Yi,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:fe(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),QC=l.forwardRef((e,t)=>{const n=yt($e,e.__scopeMenu);return g.jsx(Yi,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),JC=OC("MenuContent.ScrollLock"),Yi=l.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEntryFocus:u,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:p,onDismiss:h,disableOutsideScroll:m,...x}=e,y=yt($e,n),w=hr($e,n),E=pr(n),v=wf(n),b=GC(n),[N,S]=l.useState(null),R=l.useRef(null),O=Te(t,R,y.onContentChange),D=l.useRef(0),V=l.useRef(""),I=l.useRef(0),$=l.useRef(null),W=l.useRef("right"),_=l.useRef(0),j=m?yo:l.Fragment,M=m?{as:JC,allowPinchZoom:!0}:void 0,F=k=>{const U=V.current+k,Z=b().filter(X=>!X.disabled),A=document.activeElement,G=Z.find(X=>X.ref.current===A)?.textValue,T=Z.map(X=>X.textValue),Y=d2(T,U,G),H=Z.find(X=>X.textValue===Y)?.ref.current;(function X(K){V.current=K,window.clearTimeout(D.current),K!==""&&(D.current=window.setTimeout(()=>X(""),1e3))})(U),H&&setTimeout(()=>H.focus())};l.useEffect(()=>()=>window.clearTimeout(D.current),[]),fi();const L=l.useCallback(k=>W.current===$.current?.side&&p2(k,$.current?.area),[]);return g.jsx(KC,{scope:n,searchRef:V,onItemEnter:l.useCallback(k=>{L(k)&&k.preventDefault()},[L]),onItemLeave:l.useCallback(k=>{L(k)||(R.current?.focus(),S(null))},[L]),onTriggerLeave:l.useCallback(k=>{L(k)&&k.preventDefault()},[L]),pointerGraceTimerRef:I,onPointerGraceIntentChange:l.useCallback(k=>{$.current=k},[]),children:g.jsx(j,{...M,children:g.jsx(go,{asChild:!0,trapped:o,onMountAutoFocus:fe(s,k=>{k.preventDefault(),R.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:g.jsx(ai,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:p,onDismiss:h,children:g.jsx(of,{asChild:!0,...v,dir:w.dir,orientation:"vertical",loop:r,currentTabStopId:N,onCurrentTabStopIdChange:S,onEntryFocus:fe(u,k=>{w.isUsingKeyboardRef.current||k.preventDefault()}),preventScrollOnEntryFocus:!0,children:g.jsx(Bc,{role:"menu","aria-orientation":"vertical","data-state":Vf(y.open),"data-radix-menu-content":"",dir:w.dir,...E,...x,ref:O,style:{outline:"none",...x.style},onKeyDown:fe(x.onKeyDown,k=>{const Z=k.target.closest("[data-radix-menu-content]")===k.currentTarget,A=k.ctrlKey||k.altKey||k.metaKey,G=k.key.length===1;Z&&(k.key==="Tab"&&k.preventDefault(),!A&&G&&F(k.key));const T=R.current;if(k.target!==T||!VC.includes(k.key))return;k.preventDefault();const H=b().filter(X=>!X.disabled).map(X=>X.ref.current);xf.includes(k.key)&&H.reverse(),l2(H)}),onBlur:fe(e.onBlur,k=>{k.currentTarget.contains(k.target)||(window.clearTimeout(D.current),V.current="")}),onPointerMove:fe(e.onPointerMove,nr(k=>{const U=k.target,Z=_.current!==k.clientX;if(k.currentTarget.contains(U)&&Z){const A=k.clientX>_.current?"right":"left";W.current=A,_.current=k.clientX}}))})})})})})})});_f.displayName=$e;var e2="MenuGroup",Zi=l.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return g.jsx(ye.div,{role:"group",...r,ref:t})});Zi.displayName=e2;var t2="MenuLabel",Nf=l.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return g.jsx(ye.div,{...r,ref:t})});Nf.displayName=t2;var co="MenuItem",kc="menu.itemSelect",Oo=l.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...o}=e,s=l.useRef(null),i=hr(co,e.__scopeMenu),a=Xi(co,e.__scopeMenu),u=Te(t,s),c=l.useRef(!1),d=()=>{const f=s.current;if(!n&&f){const p=new CustomEvent(kc,{bubbles:!0,cancelable:!0});f.addEventListener(kc,h=>r?.(h),{once:!0}),Pp(f,p),p.defaultPrevented?c.current=!1:i.onClose()}};return g.jsx(Rf,{...o,ref:u,disabled:n,onClick:fe(e.onClick,d),onPointerDown:f=>{e.onPointerDown?.(f),c.current=!0},onPointerUp:fe(e.onPointerUp,f=>{c.current||f.currentTarget?.click()}),onKeyDown:fe(e.onKeyDown,f=>{const p=a.searchRef.current!=="";n||p&&f.key===" "||ri.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Oo.displayName=co;var Rf=l.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...s}=e,i=Xi(co,n),a=wf(n),u=l.useRef(null),c=Te(t,u),[d,f]=l.useState(!1),[p,h]=l.useState("");return l.useEffect(()=>{const m=u.current;m&&h((m.textContent??"").trim())},[s.children]),g.jsx(tr.ItemSlot,{scope:n,disabled:r,textValue:o??p,children:g.jsx(sf,{asChild:!0,...a,focusable:!r,children:g.jsx(ye.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:c,onPointerMove:fe(e.onPointerMove,nr(m=>{r?i.onItemLeave(m):(i.onItemEnter(m),m.defaultPrevented||m.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:fe(e.onPointerLeave,nr(m=>i.onItemLeave(m))),onFocus:fe(e.onFocus,()=>f(!0)),onBlur:fe(e.onBlur,()=>f(!1))})})})}),n2="MenuCheckboxItem",Tf=l.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...o}=e;return g.jsx(If,{scope:e.__scopeMenu,checked:n,children:g.jsx(Oo,{role:"menuitemcheckbox","aria-checked":lo(n)?"mixed":n,...o,ref:t,"data-state":Qi(n),onSelect:fe(o.onSelect,()=>r?.(lo(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Tf.displayName=n2;var Df="MenuRadioGroup",[r2,o2]=Ht(Df,{value:void 0,onValueChange:()=>{}}),Af=l.forwardRef((e,t)=>{const{value:n,onValueChange:r,...o}=e,s=nn(r);return g.jsx(r2,{scope:e.__scopeMenu,value:n,onValueChange:s,children:g.jsx(Zi,{...o,ref:t})})});Af.displayName=Df;var Mf="MenuRadioItem",Pf=l.forwardRef((e,t)=>{const{value:n,...r}=e,o=o2(Mf,e.__scopeMenu),s=n===o.value;return g.jsx(If,{scope:e.__scopeMenu,checked:s,children:g.jsx(Oo,{role:"menuitemradio","aria-checked":s,...r,ref:t,"data-state":Qi(s),onSelect:fe(r.onSelect,()=>o.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});Pf.displayName=Mf;var Ki="MenuItemIndicator",[If,s2]=Ht(Ki,{checked:!1}),kf=l.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...o}=e,s=s2(Ki,n);return g.jsx(at,{present:r||lo(s.checked)||s.checked===!0,children:g.jsx(ye.span,{...o,ref:t,"data-state":Qi(s.checked)})})});kf.displayName=Ki;var i2="MenuSeparator",Of=l.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return g.jsx(ye.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});Of.displayName=i2;var a2="MenuArrow",jf=l.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=pr(n);return g.jsx(Wc,{...o,...r,ref:t})});jf.displayName=a2;var qi="MenuSub",[c2,Lf]=Ht(qi),$f=e=>{const{__scopeMenu:t,children:n,open:r=!1,onOpenChange:o}=e,s=yt(qi,t),i=pr(t),[a,u]=l.useState(null),[c,d]=l.useState(null),f=nn(o);return l.useEffect(()=>(s.open===!1&&f(!1),()=>f(!1)),[s.open,f]),g.jsx(ci,{...i,children:g.jsx(bf,{scope:t,open:r,onOpenChange:f,content:c,onContentChange:d,children:g.jsx(c2,{scope:t,contentId:Me(),triggerId:Me(),trigger:a,onTriggerChange:u,children:n})})})};$f.displayName=qi;var zn="MenuSubTrigger",Ff=l.forwardRef((e,t)=>{const n=yt(zn,e.__scopeMenu),r=hr(zn,e.__scopeMenu),o=Lf(zn,e.__scopeMenu),s=Xi(zn,e.__scopeMenu),i=l.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:u}=s,c={__scopeMenu:e.__scopeMenu},d=l.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return l.useEffect(()=>d,[d]),l.useEffect(()=>{const f=a.current;return()=>{window.clearTimeout(f),u(null)}},[a,u]),g.jsx(Gi,{asChild:!0,...c,children:g.jsx(Rf,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":Vf(n.open),...e,ref:Qe(t,o.onTriggerChange),onClick:f=>{e.onClick?.(f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:fe(e.onPointerMove,nr(f=>{s.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(s.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:fe(e.onPointerLeave,nr(f=>{d();const p=n.content?.getBoundingClientRect();if(p){const h=n.content?.dataset.side,m=h==="right",x=m?-5:5,y=p[m?"left":"right"],w=p[m?"right":"left"];s.onPointerGraceIntentChange({area:[{x:f.clientX+x,y:f.clientY},{x:y,y:p.top},{x:w,y:p.top},{x:w,y:p.bottom},{x:y,y:p.bottom}],side:h}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(f),f.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:fe(e.onKeyDown,f=>{const p=s.searchRef.current!=="";e.disabled||p&&f.key===" "||BC[r.dir].includes(f.key)&&(n.onOpenChange(!0),n.content?.focus(),f.preventDefault())})})})});Ff.displayName=zn;var Hf="MenuSubContent",zf=l.forwardRef((e,t)=>{const n=Sf($e,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,s=yt($e,e.__scopeMenu),i=hr($e,e.__scopeMenu),a=Lf(Hf,e.__scopeMenu),u=l.useRef(null),c=Te(t,u);return g.jsx(tr.Provider,{scope:e.__scopeMenu,children:g.jsx(at,{present:r||s.open,children:g.jsx(tr.Slot,{scope:e.__scopeMenu,children:g.jsx(Yi,{id:a.contentId,"aria-labelledby":a.triggerId,...o,ref:c,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{i.isUsingKeyboardRef.current&&u.current?.focus(),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:fe(e.onFocusOutside,d=>{d.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:fe(e.onEscapeKeyDown,d=>{i.onClose(),d.preventDefault()}),onKeyDown:fe(e.onKeyDown,d=>{const f=d.currentTarget.contains(d.target),p=WC[i.dir].includes(d.key);f&&p&&(s.onOpenChange(!1),a.trigger?.focus(),d.preventDefault())})})})})})});zf.displayName=Hf;function Vf(e){return e?"open":"closed"}function lo(e){return e==="indeterminate"}function Qi(e){return lo(e)?"indeterminate":e?"checked":"unchecked"}function l2(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function u2(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function d2(e,t,n){const o=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let i=u2(e,Math.max(s,0));o.length===1&&(i=i.filter(c=>c!==n));const u=i.find(c=>c.toLowerCase().startsWith(o.toLowerCase()));return u!==n?u:void 0}function f2(e,t){const{x:n,y:r}=e;let o=!1;for(let s=0,i=t.length-1;s<t.length;i=s++){const a=t[s],u=t[i],c=a.x,d=a.y,f=u.x,p=u.y;d>r!=p>r&&n<(f-c)*(r-d)/(p-d)+c&&(o=!o)}return o}function p2(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return f2(n,t)}function nr(e){return t=>t.pointerType==="mouse"?e(t):void 0}var bE=Cf,CE=Gi,SE=Ef,EE=_f,_E=Zi,NE=Nf,RE=Oo,TE=Tf,DE=Af,AE=Pf,ME=kf,PE=Of,IE=jf,kE=$f,OE=Ff,jE=zf;const h2=l.createContext({hasActiveFilter:!1,clearSchemaIdsFilter:z,clearTableIdsFilter:z,setTableIdsFilterEmpty:z,resetFilter:z,toggleSchemaFilter:z,toggleTableFilter:z,addSchemaToFilter:z,schemasDisplayed:[],addTablesToFilter:z,removeTablesFromFilter:z,loading:!1}),LE=()=>l.useContext(h2),Oc=({table:e,filter:t,options:n={defaultSchema:void 0}})=>{if(!t||!t.tableIds&&!t.schemaIds||t.tableIds&&t.tableIds.includes(e.id))return!0;const r=e.schema??n.defaultSchema;return!!(r&&t.schemaIds&&t.schemaIds.includes(Vc(r)))},g2=({tableA:{id:e,schema:t},tableB:{id:n,schema:r},filter:o,options:s={defaultSchema:void 0}})=>{if(!o)return!0;const i=Oc({table:{id:e,schema:t},filter:o,options:s}),a=Oc({table:{id:n,schema:r},filter:o,options:s});return i&&a},$E=g2;var jc=1,m2=.9,y2=.8,v2=.17,As=.1,Ms=.999,x2=.9999,w2=.99,b2=/[\\\/_+.#"@\[\(\{&]/,C2=/[\\\/_+.#"@\[\(\{&]/g,S2=/[\s-]/,Bf=/[\s-]/g;function oi(e,t,n,r,o,s,i){if(s===t.length)return o===e.length?jc:w2;var a=`${o},${s}`;if(i[a]!==void 0)return i[a];for(var u=r.charAt(s),c=n.indexOf(u,o),d=0,f,p,h,m;c>=0;)f=oi(e,t,n,r,c+1,s+1,i),f>d&&(c===o?f*=jc:b2.test(e.charAt(c-1))?(f*=y2,h=e.slice(o,c-1).match(C2),h&&o>0&&(f*=Math.pow(Ms,h.length))):S2.test(e.charAt(c-1))?(f*=m2,m=e.slice(o,c-1).match(Bf),m&&o>0&&(f*=Math.pow(Ms,m.length))):(f*=v2,o>0&&(f*=Math.pow(Ms,c-o))),e.charAt(c)!==t.charAt(s)&&(f*=x2)),(f<As&&n.charAt(c-1)===r.charAt(s+1)||r.charAt(s+1)===r.charAt(s)&&n.charAt(c-1)!==r.charAt(s))&&(p=oi(e,t,n,r,c+1,s+2,i),p*As>f&&(f=p*As)),f>d&&(d=f),c=n.indexOf(u,c+1);return i[a]=d,d}function Lc(e){return e.toLowerCase().replace(Bf," ")}function E2(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,oi(e,t,Lc(e),Lc(t),0,0,{})}var $n='[cmdk-group=""]',Ps='[cmdk-group-items=""]',_2='[cmdk-group-heading=""]',Wf='[cmdk-item=""]',$c=`${Wf}:not([aria-disabled="true"])`,si="cmdk-item-select",Yt="data-value",N2=(e,t,n)=>E2(e,t,n),Gf=l.createContext(void 0),gr=()=>l.useContext(Gf),Uf=l.createContext(void 0),Ji=()=>l.useContext(Uf),Xf=l.createContext(void 0),Yf=l.forwardRef((e,t)=>{let n=Zt(()=>{var A,G;return{search:"",value:(G=(A=e.value)!=null?A:e.defaultValue)!=null?G:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Zt(()=>new Set),o=Zt(()=>new Map),s=Zt(()=>new Map),i=Zt(()=>new Set),a=Zf(e),{label:u,children:c,value:d,onValueChange:f,filter:p,shouldFilter:h,loop:m,disablePointerSelection:x=!1,vimBindings:y=!0,...w}=e,E=Me(),v=Me(),b=Me(),N=l.useRef(null),S=L2();$t(()=>{if(d!==void 0){let A=d.trim();n.current.value=A,R.emit()}},[d]),$t(()=>{S(6,W)},[]);let R=l.useMemo(()=>({subscribe:A=>(i.current.add(A),()=>i.current.delete(A)),snapshot:()=>n.current,setState:(A,G,T)=>{var Y,H,X,K;if(!Object.is(n.current[A],G)){if(n.current[A]=G,A==="search")$(),V(),S(1,I);else if(A==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let ee=document.getElementById(b);ee?ee.focus():(Y=document.getElementById(E))==null||Y.focus()}if(S(7,()=>{var ee;n.current.selectedItemId=(ee=_())==null?void 0:ee.id,R.emit()}),T||S(5,W),((H=a.current)==null?void 0:H.value)!==void 0){let ee=G??"";(K=(X=a.current).onValueChange)==null||K.call(X,ee);return}}R.emit()}},emit:()=>{i.current.forEach(A=>A())}}),[]),O=l.useMemo(()=>({value:(A,G,T)=>{var Y;G!==((Y=s.current.get(A))==null?void 0:Y.value)&&(s.current.set(A,{value:G,keywords:T}),n.current.filtered.items.set(A,D(G,T)),S(2,()=>{V(),R.emit()}))},item:(A,G)=>(r.current.add(A),G&&(o.current.has(G)?o.current.get(G).add(A):o.current.set(G,new Set([A]))),S(3,()=>{$(),V(),n.current.value||I(),R.emit()}),()=>{s.current.delete(A),r.current.delete(A),n.current.filtered.items.delete(A);let T=_();S(4,()=>{$(),T?.getAttribute("id")===A&&I(),R.emit()})}),group:A=>(o.current.has(A)||o.current.set(A,new Set),()=>{s.current.delete(A),o.current.delete(A)}),filter:()=>a.current.shouldFilter,label:u||e["aria-label"],getDisablePointerSelection:()=>a.current.disablePointerSelection,listId:E,inputId:b,labelId:v,listInnerRef:N}),[]);function D(A,G){var T,Y;let H=(Y=(T=a.current)==null?void 0:T.filter)!=null?Y:N2;return A?H(A,n.current.search,G):0}function V(){if(!n.current.search||a.current.shouldFilter===!1)return;let A=n.current.filtered.items,G=[];n.current.filtered.groups.forEach(Y=>{let H=o.current.get(Y),X=0;H.forEach(K=>{let ee=A.get(K);X=Math.max(ee,X)}),G.push([Y,X])});let T=N.current;j().sort((Y,H)=>{var X,K;let ee=Y.getAttribute("id"),ie=H.getAttribute("id");return((X=A.get(ie))!=null?X:0)-((K=A.get(ee))!=null?K:0)}).forEach(Y=>{let H=Y.closest(Ps);H?H.appendChild(Y.parentElement===H?Y:Y.closest(`${Ps} > *`)):T.appendChild(Y.parentElement===T?Y:Y.closest(`${Ps} > *`))}),G.sort((Y,H)=>H[1]-Y[1]).forEach(Y=>{var H;let X=(H=N.current)==null?void 0:H.querySelector(`${$n}[${Yt}="${encodeURIComponent(Y[0])}"]`);X?.parentElement.appendChild(X)})}function I(){let A=j().find(T=>T.getAttribute("aria-disabled")!=="true"),G=A?.getAttribute(Yt);R.setState("value",G||void 0)}function $(){var A,G,T,Y;if(!n.current.search||a.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let H=0;for(let X of r.current){let K=(G=(A=s.current.get(X))==null?void 0:A.value)!=null?G:"",ee=(Y=(T=s.current.get(X))==null?void 0:T.keywords)!=null?Y:[],ie=D(K,ee);n.current.filtered.items.set(X,ie),ie>0&&H++}for(let[X,K]of o.current)for(let ee of K)if(n.current.filtered.items.get(ee)>0){n.current.filtered.groups.add(X);break}n.current.filtered.count=H}function W(){var A,G,T;let Y=_();Y&&(((A=Y.parentElement)==null?void 0:A.firstChild)===Y&&((T=(G=Y.closest($n))==null?void 0:G.querySelector(_2))==null||T.scrollIntoView({block:"nearest"})),Y.scrollIntoView({block:"nearest"}))}function _(){var A;return(A=N.current)==null?void 0:A.querySelector(`${Wf}[aria-selected="true"]`)}function j(){var A;return Array.from(((A=N.current)==null?void 0:A.querySelectorAll($c))||[])}function M(A){let G=j()[A];G&&R.setState("value",G.getAttribute(Yt))}function F(A){var G;let T=_(),Y=j(),H=Y.findIndex(K=>K===T),X=Y[H+A];(G=a.current)!=null&&G.loop&&(X=H+A<0?Y[Y.length-1]:H+A===Y.length?Y[0]:Y[H+A]),X&&R.setState("value",X.getAttribute(Yt))}function L(A){let G=_(),T=G?.closest($n),Y;for(;T&&!Y;)T=A>0?O2(T,$n):j2(T,$n),Y=T?.querySelector($c);Y?R.setState("value",Y.getAttribute(Yt)):F(A)}let k=()=>M(j().length-1),U=A=>{A.preventDefault(),A.metaKey?k():A.altKey?L(1):F(1)},Z=A=>{A.preventDefault(),A.metaKey?M(0):A.altKey?L(-1):F(-1)};return l.createElement(ye.div,{ref:t,tabIndex:-1,...w,"cmdk-root":"",onKeyDown:A=>{var G;(G=w.onKeyDown)==null||G.call(w,A);let T=A.nativeEvent.isComposing||A.keyCode===229;if(!(A.defaultPrevented||T))switch(A.key){case"n":case"j":{y&&A.ctrlKey&&U(A);break}case"ArrowDown":{U(A);break}case"p":case"k":{y&&A.ctrlKey&&Z(A);break}case"ArrowUp":{Z(A);break}case"Home":{A.preventDefault(),M(0);break}case"End":{A.preventDefault(),k();break}case"Enter":{A.preventDefault();let Y=_();if(Y){let H=new Event(si);Y.dispatchEvent(H)}}}}},l.createElement("label",{"cmdk-label":"",htmlFor:O.inputId,id:O.labelId,style:F2},u),jo(e,A=>l.createElement(Uf.Provider,{value:R},l.createElement(Gf.Provider,{value:O},A))))}),R2=l.forwardRef((e,t)=>{var n,r;let o=Me(),s=l.useRef(null),i=l.useContext(Xf),a=gr(),u=Zf(e),c=(r=(n=u.current)==null?void 0:n.forceMount)!=null?r:i?.forceMount;$t(()=>{if(!c)return a.item(o,i?.id)},[c]);let d=Kf(o,s,[e.value,e.children,s],e.keywords),f=Ji(),p=gt(S=>S.value&&S.value===d.current),h=gt(S=>c||a.filter()===!1?!0:S.search?S.filtered.items.get(o)>0:!0);l.useEffect(()=>{let S=s.current;if(!(!S||e.disabled))return S.addEventListener(si,m),()=>S.removeEventListener(si,m)},[h,e.onSelect,e.disabled]);function m(){var S,R;x(),(R=(S=u.current).onSelect)==null||R.call(S,d.current)}function x(){f.setState("value",d.current,!0)}if(!h)return null;let{disabled:y,value:w,onSelect:E,forceMount:v,keywords:b,...N}=e;return l.createElement(ye.div,{ref:Qe(s,t),...N,id:o,"cmdk-item":"",role:"option","aria-disabled":!!y,"aria-selected":!!p,"data-disabled":!!y,"data-selected":!!p,onPointerMove:y||a.getDisablePointerSelection()?void 0:x,onClick:y?void 0:m},e.children)}),T2=l.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:o,...s}=e,i=Me(),a=l.useRef(null),u=l.useRef(null),c=Me(),d=gr(),f=gt(h=>o||d.filter()===!1?!0:h.search?h.filtered.groups.has(i):!0);$t(()=>d.group(i),[]),Kf(i,a,[e.value,e.heading,u]);let p=l.useMemo(()=>({id:i,forceMount:o}),[o]);return l.createElement(ye.div,{ref:Qe(a,t),...s,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},n&&l.createElement("div",{ref:u,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),jo(e,h=>l.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},l.createElement(Xf.Provider,{value:p},h))))}),D2=l.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,o=l.useRef(null),s=gt(i=>!i.search);return!n&&!s?null:l.createElement(ye.div,{ref:Qe(o,t),...r,"cmdk-separator":"",role:"separator"})}),A2=l.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,o=e.value!=null,s=Ji(),i=gt(c=>c.search),a=gt(c=>c.selectedItemId),u=gr();return l.useEffect(()=>{e.value!=null&&s.setState("search",e.value)},[e.value]),l.createElement(ye.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":u.listId,"aria-labelledby":u.labelId,"aria-activedescendant":a,id:u.inputId,type:"text",value:o?e.value:i,onChange:c=>{o||s.setState("search",c.target.value),n?.(c.target.value)}})}),M2=l.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...o}=e,s=l.useRef(null),i=l.useRef(null),a=gt(c=>c.selectedItemId),u=gr();return l.useEffect(()=>{if(i.current&&s.current){let c=i.current,d=s.current,f,p=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let h=c.offsetHeight;d.style.setProperty("--cmdk-list-height",h.toFixed(1)+"px")})});return p.observe(c),()=>{cancelAnimationFrame(f),p.unobserve(c)}}},[]),l.createElement(ye.div,{ref:Qe(s,t),...o,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":a,"aria-label":r,id:u.listId},jo(e,c=>l.createElement("div",{ref:Qe(i,u.listInnerRef),"cmdk-list-sizer":""},c)))}),P2=l.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:o,contentClassName:s,container:i,...a}=e;return l.createElement(Gl,{open:n,onOpenChange:r},l.createElement(Ul,{container:i},l.createElement(yi,{"cmdk-overlay":"",className:o}),l.createElement(vi,{"aria-label":e.label,"cmdk-dialog":"",className:s},l.createElement(Yf,{ref:t,...a}))))}),I2=l.forwardRef((e,t)=>gt(n=>n.filtered.count===0)?l.createElement(ye.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),k2=l.forwardRef((e,t)=>{let{progress:n,children:r,label:o="Loading...",...s}=e;return l.createElement(ye.div,{ref:t,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},jo(e,i=>l.createElement("div",{"aria-hidden":!0},i)))}),De=Object.assign(Yf,{List:M2,Item:R2,Input:A2,Group:T2,Separator:D2,Dialog:P2,Empty:I2,Loading:k2});function O2(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function j2(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function Zf(e){let t=l.useRef(e);return $t(()=>{t.current=e}),t}var $t=typeof window>"u"?l.useEffect:l.useLayoutEffect;function Zt(e){let t=l.useRef();return t.current===void 0&&(t.current=e()),t}function gt(e){let t=Ji(),n=()=>e(t.snapshot());return l.useSyncExternalStore(t.subscribe,n,n)}function Kf(e,t,n,r=[]){let o=l.useRef(),s=gr();return $t(()=>{var i;let a=(()=>{var c;for(let d of n){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(c=d.current.textContent)==null?void 0:c.trim():o.current}})(),u=r.map(c=>c.trim());s.value(e,a,u),(i=t.current)==null||i.setAttribute(Yt,a),o.current=a}),o}var L2=()=>{let[e,t]=l.useState(),n=Zt(()=>new Map);return $t(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,o)=>{n.current.set(r,o),t({})}};function $2(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function jo({asChild:e,children:t},n){return e&&l.isValidElement(t)?l.cloneElement($2(t),{ref:t.ref},n(t.props.children)):n(t)}var F2={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const qf=le.forwardRef(({className:e,...t},n)=>g.jsx(De,{ref:n,className:me("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));qf.displayName=De.displayName;const Qf=le.forwardRef(({className:e,...t},n)=>g.jsxs("div",{className:"flex items-center border-b px-3","data-cmdk-input-wrapper":"",children:[g.jsx(wh,{className:"mr-2 size-4 shrink-0 opacity-50"}),g.jsx(De.Input,{ref:n,className:me("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));Qf.displayName=De.Input.displayName;const Jf=le.forwardRef(({className:e,...t},n)=>g.jsx(De.List,{ref:n,className:me("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));Jf.displayName=De.List.displayName;const ep=le.forwardRef((e,t)=>g.jsx(De.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));ep.displayName=De.Empty.displayName;const tp=le.forwardRef(({className:e,...t},n)=>g.jsx(De.Group,{ref:n,className:me("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));tp.displayName=De.Group.displayName;const H2=le.forwardRef(({className:e,...t},n)=>g.jsx(De.Separator,{ref:n,className:me("-mx-1 h-px bg-border",e),...t}));H2.displayName=De.Separator.displayName;const np=le.forwardRef(({className:e,...t},n)=>g.jsx(De.Item,{ref:n,className:me("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));np.displayName=De.Item.displayName;function z2(e){const t=V2(e),n=l.forwardRef((r,o)=>{const{children:s,...i}=r,a=l.Children.toArray(s),u=a.find(W2);if(u){const c=u.props.children,d=a.map(f=>f===u?l.Children.count(c)>1?l.Children.only(null):l.isValidElement(c)?c.props.children:null:f);return g.jsx(t,{...i,ref:o,children:l.isValidElement(c)?l.cloneElement(c,void 0,d):null})}return g.jsx(t,{...i,ref:o,children:s})});return n.displayName=`${e}.Slot`,n}function V2(e){const t=l.forwardRef((n,r)=>{const{children:o,...s}=n;if(l.isValidElement(o)){const i=U2(o),a=G2(s,o.props);return o.type!==l.Fragment&&(a.ref=r?Qe(r,i):i),l.cloneElement(o,a)}return l.Children.count(o)>1?l.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var B2=Symbol("radix.slottable");function W2(e){return l.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===B2}function G2(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{const u=s(...a);return o(...a),u}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}function U2(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Lo="Popover",[rp]=pn(Lo,[uo]),mr=uo(),[X2,vt]=rp(Lo),op=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:o,onOpenChange:s,modal:i=!1}=e,a=mr(t),u=l.useRef(null),[c,d]=l.useState(!1),[f,p]=hn({prop:r,defaultProp:o??!1,onChange:s,caller:Lo});return g.jsx(ci,{...a,children:g.jsx(X2,{scope:t,contentId:Me(),triggerRef:u,open:f,onOpenChange:p,onOpenToggle:l.useCallback(()=>p(h=>!h),[p]),hasCustomAnchor:c,onCustomAnchorAdd:l.useCallback(()=>d(!0),[]),onCustomAnchorRemove:l.useCallback(()=>d(!1),[]),modal:i,children:n})})};op.displayName=Lo;var sp="PopoverAnchor",Y2=l.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=vt(sp,n),s=mr(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:a}=o;return l.useEffect(()=>(i(),()=>a()),[i,a]),g.jsx(li,{...s,...r,ref:t})});Y2.displayName=sp;var ip="PopoverTrigger",ap=l.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=vt(ip,n),s=mr(n),i=Te(t,o.triggerRef),a=g.jsx(ye.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":fp(o.open),...r,ref:i,onClick:fe(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?a:g.jsx(li,{asChild:!0,...s,children:a})});ap.displayName=ip;var ea="PopoverPortal",[Z2,K2]=rp(ea,{forceMount:void 0}),cp=e=>{const{__scopePopover:t,forceMount:n,children:r,container:o}=e,s=vt(ea,t);return g.jsx(Z2,{scope:t,forceMount:n,children:g.jsx(at,{present:n||s.open,children:g.jsx(fo,{asChild:!0,container:o,children:r})})})};cp.displayName=ea;var fn="PopoverContent",lp=l.forwardRef((e,t)=>{const n=K2(fn,e.__scopePopover),{forceMount:r=n.forceMount,...o}=e,s=vt(fn,e.__scopePopover);return g.jsx(at,{present:r||s.open,children:s.modal?g.jsx(Q2,{...o,ref:t}):g.jsx(J2,{...o,ref:t})})});lp.displayName=fn;var q2=z2("PopoverContent.RemoveScroll"),Q2=l.forwardRef((e,t)=>{const n=vt(fn,e.__scopePopover),r=l.useRef(null),o=Te(t,r),s=l.useRef(!1);return l.useEffect(()=>{const i=r.current;if(i)return pi(i)},[]),g.jsx(yo,{as:q2,allowPinchZoom:!0,children:g.jsx(up,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:fe(e.onCloseAutoFocus,i=>{i.preventDefault(),s.current||n.triggerRef.current?.focus()}),onPointerDownOutside:fe(e.onPointerDownOutside,i=>{const a=i.detail.originalEvent,u=a.button===0&&a.ctrlKey===!0,c=a.button===2||u;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:fe(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),J2=l.forwardRef((e,t)=>{const n=vt(fn,e.__scopePopover),r=l.useRef(!1),o=l.useRef(!1);return g.jsx(up,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{e.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||n.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:s=>{e.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=s.target;n.triggerRef.current?.contains(i)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),up=l.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:s,disableOutsidePointerEvents:i,onEscapeKeyDown:a,onPointerDownOutside:u,onFocusOutside:c,onInteractOutside:d,...f}=e,p=vt(fn,n),h=mr(n);return fi(),g.jsx(go,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:s,children:g.jsx(ai,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:d,onEscapeKeyDown:a,onPointerDownOutside:u,onFocusOutside:c,onDismiss:()=>p.onOpenChange(!1),children:g.jsx(Bc,{"data-state":fp(p.open),role:"dialog",id:p.contentId,...h,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),dp="PopoverClose",eS=l.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=vt(dp,n);return g.jsx(ye.button,{type:"button",...r,ref:t,onClick:fe(e.onClick,()=>o.onOpenChange(!1))})});eS.displayName=dp;var tS="PopoverArrow",nS=l.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=mr(n);return g.jsx(Wc,{...o,...r,ref:t})});nS.displayName=tS;function fp(e){return e?"open":"closed"}var rS=op,oS=ap,sS=cp,pp=lp;const iS=rS,aS=oS,hp=le.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},o)=>g.jsx(sS,{children:g.jsx(pp,{ref:o,align:t,sideOffset:n,className:me("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));hp.displayName=pp.displayName;const gp=l.forwardRef(({inputPlaceholder:e,emptyPlaceholder:t,placeholder:n,className:r,options:o,value:s,valueSuffix:i,onChange:a,multiple:u,oneLine:c,selectAll:d,optionSuffix:f,deselectAll:p,clearText:h,showClear:m,keepOrder:x,disabled:y,open:w,onOpenChange:E,popoverClassName:v,readonly:b,footerButtons:N,commandOnMouseDown:S,commandOnClick:R,onSearchChange:O,modal:D=!0},V)=>{const[I,$]=l.useState(""),[W,_]=l.useState(w??!1),{t:j}=Jp();l.useEffect(()=>{_(w??!1)},[w]);const M=l.useCallback(H=>{E?.(H),_(H),H&&$(""),setTimeout(()=>document.body.style.pointerEvents="",500)},[E]),F=l.useCallback((H,X)=>{if(u){const K=s?.includes(H)&&Array.isArray(s)?s.filter(ee=>ee!==H):[...s??[],H];a?.(K)}else a?.(H,X),_(!1)},[u,a,s]),L=l.useCallback(()=>{u&&a?.(u?[]:"")},[u,a]),k=l.useCallback(()=>{if(!u)return;const H=o.map(X=>X.value);a?.(H)},[u,a,o]),U=l.useMemo(()=>o.filter(H=>Array.isArray(s)&&s.includes(H.value)).sort((H,X)=>x&&Array.isArray(s)?s.indexOf(H.value)-s.indexOf(X.value):0).map(H=>g.jsxs("span",{className:`inline-flex min-w-0 shrink-0 items-center gap-1 rounded-md border py-0.5 pl-2 pr-1 text-xs font-medium text-foreground transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 ${c?"mx-0.5":""}`,children:[g.jsx("span",{children:H.label}),b?null:g.jsx("span",{onClick:X=>{X.preventDefault(),F(H.value)},className:"flex items-center rounded-sm px-px text-muted-foreground/60 hover:bg-accent hover:text-muted-foreground",children:g.jsx(jr,{})})]},H.value)),[o,s,F,c,x,b]),Z=l.useMemo(()=>u&&Array.isArray(s)&&o.every(H=>s.includes(H.value)),[o,s,u]),A=l.useCallback(H=>{!W&&H.code.toLowerCase()==="space"&&(H.preventDefault(),M(!0))},[W,M]),G=l.useMemo(()=>o.reduce((H,X)=>(X.group?(H[X.group]||(H[X.group]=[]),H[X.group].push(X)):(H.default||(H.default=[]),H.default.push(X)),H),{}),[o]),T=l.useMemo(()=>Object.keys(G).filter(H=>H!=="default").length>0,[G]),Y=l.useCallback(H=>{const X=Array.isArray(s)&&s.includes(H.value),K=H.regex&&new RegExp(H.regex)?.test(I),ee=H.extractRegex?I.match(H.extractRegex):void 0;return g.jsxs(np,{className:"flex items-center",value:H.label,keywords:[...H.regex?[H.regex]:[],...H.description?[H.description]:[]],onSelect:()=>F(H.value,ee?.map(ie=>ie?.toString())),onMouseDown:S,onClick:R,children:[u&&g.jsx("div",{className:me("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",X?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:g.jsx(ua,{})}),g.jsxs("div",{className:"flex flex-1 items-center truncate",children:[H.icon?g.jsx("span",{className:"mr-2 shrink-0",children:H.icon}):null,g.jsxs("span",{children:[K?I:H.label,!K&&f?f(H):""]}),H.description&&g.jsx("span",{className:"ml-1 w-0 flex-1 truncate text-xs text-muted-foreground",children:H.description})]}),(!u&&H.value===s||K)&&g.jsx(ua,{className:me("ml-auto",H.value===s?"opacity-100":"opacity-0")})]},H.value)},[s,u,I,F,f,R,S]);return g.jsxs(iS,{open:W,onOpenChange:M,modal:D,children:[g.jsx(aS,{asChild:!0,tabIndex:0,onKeyDown:A,children:g.jsxs("div",{className:me(`flex min-h-[36px] cursor-pointer items-center justify-between rounded-md border px-3 py-1 data-[state=open]:border-ring ${y?"bg-muted pointer-events-none":""} ${b?"pointer-events-none":""}`,r),children:[g.jsx("div",{className:me("items-center gap-1 overflow-hidden text-sm",u?"flex flex-grow flex-wrap":"inline-flex whitespace-nowrap"),children:s&&s.length>0?u?c?g.jsx("div",{className:"block w-full min-w-0 shrink-0 truncate",children:U}):U:g.jsxs("div",{className:"block w-full min-w-0 shrink-0 truncate",children:[o.find(H=>H.value===s)?.label,i||""]}):g.jsx("span",{className:"mr-auto text-muted-foreground",children:n})}),g.jsx("div",{className:"flex items-center self-stretch pl-1 text-muted-foreground/60 hover:text-foreground [&>div]:flex [&>div]:items-center [&>div]:self-stretch",children:s&&s.length>0&&u&&m?g.jsx("div",{onClick:H=>{H.preventDefault(),L()},children:h?g.jsx("span",{className:"text-xs",children:h}):g.jsx(jr,{className:"size-3.5"})}):g.jsx("div",{children:g.jsx(lh,{className:"size-4"})})})]})}),g.jsxs(hp,{className:me("w-fit min-w-[var(--radix-popover-trigger-width)] p-0",v),align:"center",onMouseDown:H=>H.stopPropagation(),onClick:H=>H.stopPropagation(),children:[g.jsxs(qf,{filter:(H,X,K)=>{const ee=X.toLowerCase();return K?.length&&K.some(ie=>ie.toLowerCase().includes(ee)||new RegExp(ie).test(X))||H.toLowerCase().includes(ee)?1:0},children:[g.jsxs("div",{className:"relative",children:[g.jsx(Qf,{value:I,onValueChange:H=>{$(H),O?.(H)},ref:V,placeholder:e??"Search...",className:"h-9"}),I&&g.jsx("div",{className:"absolute inset-y-0 right-0 flex cursor-pointer items-center pr-3 text-muted-foreground hover:text-foreground",onClick:()=>$(""),children:g.jsx(jr,{className:"size-4"})}),!I&&u&&d&&!Z&&g.jsx("div",{className:"absolute inset-y-0 right-0 flex cursor-pointer items-center pr-3 text-xs text-muted-foreground hover:text-foreground",onClick:H=>{H.preventDefault(),k()},children:j("select_all")}),!I&&u&&p&&Z&&g.jsx("div",{className:"absolute inset-y-0 right-0 flex cursor-pointer items-center pr-3 text-xs text-muted-foreground hover:text-foreground",onClick:H=>{H.preventDefault(),L()},children:j("deselect_all")})]}),g.jsx(ep,{children:t??"No results found."}),g.jsx(Si,{children:g.jsx("div",{className:"max-h-64 w-full",children:g.jsx(Jf,{className:"max-h-fit w-full",children:T?Object.entries(G).map(([H,X])=>g.jsx(tp,{heading:H,children:X.map(Y)},H)):o.map(Y)})})})]}),N?g.jsx("div",{className:"border-t",children:N}):null]})]})});gp.displayName="SelectBox";const cS=()=>l.useContext(Bm),FE=()=>l.useContext(qm),lS=l.createContext({closeAlert:z,showAlert:z}),HE=()=>l.useContext(lS),mp=()=>({graph:new Map,lastUpdated:Date.now()}),Fc=(e,t)=>(e.graph.has(t)||e.graph.set(t,[]),{...e,lastUpdated:Date.now()}),uS=(e,t,n)=>(e.graph.has(t)||Fc(e,t),e.graph.has(n)||Fc(e,n),e.graph.get(t)?.includes(n)||e.graph.get(t)?.push(n),e.graph.get(n)?.includes(t)||e.graph.get(n)?.push(t),{...e,lastUpdated:Date.now()}),zE=(e,t)=>(e.graph.delete(t),e.graph.forEach(n=>{const r=n.indexOf(t);r!==-1&&n.splice(r,1)}),{...e,lastUpdated:Date.now()}),dS=(e,t,n)=>{if(e.graph.has(t)){const r=e.graph.get(t)?.indexOf(n)??-1;r!==-1&&e.graph.get(t)?.splice(r,1)}if(e.graph.has(n)){const r=e.graph.get(n)?.indexOf(t)??-1;r!==-1&&e.graph.get(n)?.splice(r,1)}return{...e,lastUpdated:Date.now()}},fS=l.createContext({reorderTables:z,fitView:z,setOverlapGraph:z,overlapGraph:mp(),setShowFilter:z,showFilter:!1,editTableModeTable:null,setEditTableModeTable:z,openRelationshipPopover:z,closeRelationshipPopover:z,editRelationshipPopover:null,tempFloatingEdge:null,setTempFloatingEdge:z,startFloatingEdgeCreation:z,endFloatingEdgeCreation:z,hoveringTableId:null,setHoveringTableId:z,showCreateRelationshipNode:z,hideCreateRelationshipNode:z,events:new vl.EventEmitter}),VE=({cardinality:e,selected:t,side:n})=>`cardinality_${t?"selected":"not_selected"}_${e}_${n}`,Is=({node:e,table:t})=>{const n=e?.id??t?.id??"",r=e?.position.x??t?.x??0,o=e?.position.y??t?.y??0,s=e?.measured?.width??e?.data.table.width??t?.width??Ip,i=e?e?.measured?.height??sa(e.data.table):sa(t);return{id:n,left:r,right:r+s,top:o,bottom:o+i}},Hc=({node:e,table:t},{nodes:n,tables:r},o)=>{const s=e?.id??t?.id??"",i=Is(e?{node:e}:{table:t});for(const a of n??r??[]){if(s===a.id)continue;const c=Is(!!n?{node:a}:{table:a});i.left<c.right&&i.right>c.left&&i.top<c.bottom&&i.bottom>c.top?o=uS(o,s,a.id):o=dS(o,s,a.id)}return o},BE=({tables:e,nodes:t})=>{let n=mp();if(e)for(const r of e)n=Hc({table:r},{tables:e},n);else for(const r of t)n=Hc({node:r},{nodes:t},n);return n},pS=()=>l.useContext(fS),WE="__create-relationship-node__",zc="CREATE_NEW",hS=le.memo(({data:e})=>{const{sourceTableId:t,targetTableId:n}=e,{getTable:r,createRelationship:o,databaseType:s,addField:i}=ih(),{hideCreateRelationshipNode:a}=pS(),{setEdges:u}=Mo(),{openRelationshipFromSidebar:c}=cS(),[d,f]=l.useState(),[p,h]=l.useState(""),[m,x]=l.useState(!1),[y,w]=l.useState(!1),[E,v]=l.useState(""),b=l.useMemo(()=>r(t),[t,r]),N=l.useMemo(()=>r(n),[n,r]),S=l.useMemo(()=>b?b.fields.find(D=>D.primaryKey)||b.fields[0]:null,[b]);l.useEffect(()=>{f(void 0),v(""),h(""),w(!0)},[t,n]);const R=l.useMemo(()=>{if(!N||!S)return[];const D=N.fields.filter(V=>kp(S.type,V.type,s)).map(V=>({label:V.name,value:V.id,description:`(${V.type.name})`}));return E&&!D.find(V=>V.label.toLowerCase()===E.toLowerCase())&&D.push({label:`Create "${E}"`,value:zc,description:`(${S.type.name})`}),D},[N,S,s,E]);l.useEffect(()=>{if(R.length>0&&!d)f(R[0].value);else if(R.length===0&&!E&&b&&S){const D=S.name.toLowerCase()==="id"?`${b.name}_${S.name}`:S.name;v(D)}},[R.length,b,S,E,d,R]),l.useEffect(()=>{w(!0);const D=requestAnimationFrame(()=>{x(!0)});return()=>cancelAnimationFrame(D)},[]);const O=l.useCallback(async()=>{if(S)try{let D=d;if(d===zc&&E){const I={id:Ve(),name:E,type:S.type,unique:!1,nullable:!0,primaryKey:!1,createdAt:Date.now()};try{await i(n,I),D=I.id}catch($){console.error("Failed to create field:",$),h("Failed to create new field");return}}if(!D){h("Please select a target field");return}const V=await o({sourceTableId:t,sourceFieldId:S.id,targetTableId:n,targetFieldId:D});u(I=>I.map($=>$.id===V.id?{...$,selected:!0}:{...$,selected:!1})),c(V.id),a()}catch(D){console.error(D),h("Failed to create relationship")}},[S,d,E,t,n,o,i,u,c,a]);return!b||!N||!S?null:g.jsxs("div",{className:me("pointer-events-auto flex cursor-auto flex-col rounded-lg border border-slate-300 bg-white shadow-xl transition-all duration-150 ease-out dark:border-slate-600 dark:bg-slate-800",{"scale-100 opacity-100":m,"scale-95 opacity-0":!m}),style:{minWidth:"380px",maxWidth:"420px"},onClick:D=>D.stopPropagation(),children:[g.jsxs("div",{className:"flex cursor-move items-center justify-between gap-2 rounded-t-[7px] border-b bg-sky-600 px-3 py-1 dark:border-slate-600 dark:bg-sky-800",children:[g.jsx("div",{className:"text-xs font-semibold text-white",children:"Create Relationship"}),g.jsx(ia,{variant:"ghost",size:"sm",className:"size-6 p-0 text-white hover:bg-white/20 hover:text-white dark:hover:bg-white/10",onClick:a,children:g.jsx(Om,{className:"size-4"})})]}),g.jsxs("div",{className:"nodrag flex flex-col gap-3 p-3",children:[g.jsxs("div",{className:"flex flex-row gap-2",children:[g.jsxs("div",{className:"flex flex-1 flex-col gap-1.5",children:[g.jsx("label",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:"From (PK)"}),g.jsx("div",{className:"flex h-7 items-center rounded-md border border-slate-200 bg-slate-50 px-2.5 text-sm font-medium text-slate-700 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200",children:S.name}),g.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:b.name})]}),g.jsx("div",{className:"flex items-center",children:g.jsx(gm,{className:"size-3.5 text-slate-400 dark:text-slate-500"})}),g.jsxs("div",{className:"flex flex-1 flex-col gap-1.5",children:[g.jsx("label",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:"To (FK)"}),g.jsx(gp,{className:"flex h-7 min-h-0 w-full dark:border-slate-200",popoverClassName:"!z-[1001]",options:R,placeholder:"Select field...",inputPlaceholder:"Search or Create...",value:d,onChange:D=>{f(D)},emptyPlaceholder:"No compatible fields",onSearchChange:v,open:y,onOpenChange:w}),g.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:N.name})]})]}),p&&g.jsx("div",{className:"rounded-md bg-red-50 p-2 text-xs text-red-600 dark:bg-red-900/20 dark:text-red-400",children:p}),R.length===0&&g.jsx("div",{className:"rounded-md bg-yellow-50 p-2 text-xs text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400",children:"No compatible fields found in target table"})]}),g.jsx("div",{className:"flex cursor-move items-center justify-end gap-2 rounded-b-lg border-t border-slate-200 bg-slate-50 px-3 py-2 dark:border-slate-600 dark:bg-slate-900",children:g.jsx(ia,{disabled:!d||R.length===0,type:"button",onClick:O,variant:"default",className:"h-7 bg-sky-600 px-3 text-xs text-white hover:bg-sky-700 dark:bg-sky-800 dark:text-white dark:hover:bg-sky-900",children:"Create"})})]})});hS.displayName="CreateRelationshipNode";export{MS as $,iS as A,aS as B,SS as C,Yl as D,FS as E,go as F,VS as G,hp as H,kC as I,gp as J,rE as K,Oc as L,XS as M,Si as N,yi as O,Ul as P,Ei as Q,Nb as R,IC as S,Xl as T,JS as U,KS as V,AS as W,Om as X,Ea as Y,Mo as Z,di as _,eE as a,lE as a$,g2 as a0,$E as a1,Zl as a2,jr as a3,DS as a4,_S as a5,TS as a6,wE as a7,bE as a8,kE as a9,xE as aA,vE as aB,_C as aC,pe as aD,uE as aE,LS as aF,jS as aG,qs as aH,VE as aI,iE as aJ,GS as aK,WS as aL,zS as aM,NC as aN,RC as aO,BS as aP,oE as aQ,sE as aR,Hc as aS,zE as aT,BE as aU,er as aV,tE as aW,qn as aX,hS as aY,cE as aZ,ZS as a_,ko as aa,of as ab,sf as ac,CE as ad,SE as ae,EE as af,RE as ag,PE as ah,OE as ai,jE as aj,TE as ak,ME as al,_E as am,NE as an,DE as ao,AE as ap,IE as aq,NS as ar,HE as as,FE as at,nE as au,xb as av,so as aw,ne as ax,pS as ay,US as az,Gl as b,aE as b0,ht as b1,Os as b2,Tt as b3,Up as b4,Yp as b5,Zp as b6,qS as b7,Lm as b8,$l as b9,WE as bA,fS as bB,Ym as bC,h2 as bD,zm as ba,Bm as bb,Wm as bc,Gm as bd,qm as be,$m as bf,Hm as bg,Vm as bh,Fm as bi,QS as bj,kS as bk,RS as bl,Ix as bm,gE as bn,mE as bo,hE as bp,pE as bq,fE as br,CS as bs,yE as bt,ah as bu,PS as bv,IS as bw,lS as bx,mp as by,Xm as bz,vi as c,dE as d,Nt as e,aC as f,ih as g,Jp as h,ui as i,Vi as j,wl as k,fo as l,pi as m,fi as n,yo as o,lh as p,ua as q,ES as r,bS as s,LE as t,cS as u,wS as v,HS as w,$S as x,YS as y,OS as z};
